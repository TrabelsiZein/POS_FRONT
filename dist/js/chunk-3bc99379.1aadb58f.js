(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bc99379"],{"0f9c":function(e,t,r){},"216b":function(e,t,r){},"223c":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toastification"},[r("div",{staticClass:"d-flex align-items-start"},[r("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:e.variant,size:"1.8rem"}},[r("feather-icon",{attrs:{icon:e.icon,size:"15"}})],1),r("div",{staticClass:"d-flex flex-grow-1"},[r("div",[e.title?r("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+e.variant,domProps:{textContent:e._s(e.title)}}):e._e(),e.text?r("small",{staticClass:"d-inline-block text-body",domProps:{textContent:e._s(e.text)}}):e._e()]),r("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(t){return e.$emit("close-toast")}}},[e.hideClose?e._e():r("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},a=[],o=r("e8a3"),n={components:{BAvatar:o["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},l=n,i=(r("2edd"),r("2877")),c=Object(i["a"])(l,s,a,!1,null,"55dd3057",null);t["default"]=c.exports},"2edd":function(e,t,r){"use strict";r("216b")},"58ff":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-management-container"},[r("div",{staticClass:"page-header"},[r("h2",{staticClass:"mb-0"},[e._v("User Management")]),r("b-button",{attrs:{variant:"primary"},on:{click:e.openAddUserModal}},[r("feather-icon",{attrs:{icon:"PlusIcon",size:"16"}}),e._v(" Add User ")],1)],1),r("b-card",[r("b-table",{attrs:{items:e.users,fields:e.userFields,striped:"",hover:"",responsive:"",busy:e.loading},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center my-2"},[r("b-spinner",{staticClass:"align-middle"}),r("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(role)",fn:function(t){return[r("b-badge",{attrs:{variant:e.getRoleBadgeVariant(t.item.role)}},[e._v(" "+e._s(t.item.role)+" ")])]}},{key:"cell(active)",fn:function(t){return[r("b-badge",{attrs:{variant:t.item.active?"success":"danger"}},[e._v(" "+e._s(t.item.active?"Active":"Inactive")+" ")])]}},{key:"cell(actions)",fn:function(t){return[r("b-button-group",{attrs:{size:"sm"}},[r("b-button",{attrs:{variant:"outline-primary",disabled:"ADMIN"===t.item.role},on:{click:function(r){return e.editUser(t.item)}}},[r("feather-icon",{attrs:{icon:"EditIcon",size:"14"}})],1),r("b-button",{attrs:{variant:"outline-danger",disabled:"ADMIN"===t.item.role},on:{click:function(r){return e.confirmDeleteUser(t.item)}}},[r("feather-icon",{attrs:{icon:"TrashIcon",size:"14"}})],1)],1)]}}])})],1),r("b-modal",{attrs:{title:e.editingUser?"Edit User":"Add New User"},on:{ok:e.saveUser,cancel:e.resetUserForm},model:{value:e.showAddUserModal,callback:function(t){e.showAddUserModal=t},expression:"showAddUserModal"}},[r("b-form",[r("b-form-group",{attrs:{label:"Username","label-for":"username"}},[r("b-form-input",{attrs:{id:"username",disabled:e.editingUser,required:""},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),r("b-form-group",{attrs:{label:"Full Name","label-for":"fullName"}},[r("b-form-input",{attrs:{id:"fullName"},model:{value:e.userForm.fullName,callback:function(t){e.$set(e.userForm,"fullName",t)},expression:"userForm.fullName"}})],1),r("b-form-group",{attrs:{label:"Email","label-for":"email"}},[r("b-form-input",{attrs:{id:"email",type:"email"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),r("b-form-group",{attrs:{label:"Password","label-for":"password"}},[r("b-form-input",{attrs:{id:"password",type:"password",required:!e.editingUser},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}}),e.editingUser?r("small",{staticClass:"form-text text-muted"},[e._v(" Leave empty to keep current password ")]):e._e()],1),r("b-form-group",{attrs:{label:"Role","label-for":"role"}},[r("b-form-select",{attrs:{id:"role",options:e.roleOptions,required:""},model:{value:e.userForm.role,callback:function(t){e.$set(e.userForm,"role",t)},expression:"userForm.role"}})],1),e.editingUser?r("b-form-group",{attrs:{label:"Status"}},[r("b-form-checkbox",{model:{value:e.userForm.active,callback:function(t){e.$set(e.userForm,"active",t)},expression:"userForm.active"}},[e._v(" Active ")])],1):e._e()],1)],1),r("b-modal",{attrs:{title:"Delete User"},on:{ok:e.deleteUser},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[r("p",[e._v("Are you sure you want to delete user "),r("strong",[e._v(e._s(e.userToDelete&&e.userToDelete.username?e.userToDelete.username:""))]),e._v("?")]),r("p",{staticClass:"text-danger"},[e._v("This action cannot be undone.")])])],1)},a=[],o=r("c7eb"),n=r("1da1"),l=r("223c"),i={name:"UserManagement",data:function(){return{users:[],loading:!1,showAddUserModal:!1,showDeleteModal:!1,editingUser:null,userToDelete:null,userForm:{username:"",fullName:"",email:"",password:"",role:"POS_USER",active:!0},userFields:[{key:"username",label:"Username",sortable:!0},{key:"fullName",label:"Full Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!0},{key:"active",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],roleOptions:[{value:"ADMIN",text:"Administrator"},{value:"RESPONSIBLE",text:"Responsible"},{value:"POS_USER",text:"POS User"}]}},mounted:function(){this.loadUsers()},methods:{openAddUserModal:function(){this.resetUserForm(),this.showAddUserModal=!0},loadUsers:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.get("/user-account");case 4:r=t.sent,e.users=r.data,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error loading users:",t.t0),e.$toast({component:l["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load users",variant:"danger"}});case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},editUser:function(e){this.editingUser=e,this.userForm={username:e.username,fullName:e.fullName||"",email:e.email||"",password:"",role:e.role,active:e.active},this.showAddUserModal=!0},saveUser:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var r,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.editingUser){t.next=9;break}return r={fullName:e.userForm.fullName,email:e.userForm.email,role:e.userForm.role,active:e.userForm.active},e.userForm.password&&(r.password=e.userForm.password),t.next=6,e.$http.put("/user-account/".concat(e.editingUser.id),r);case 6:e.$toast({component:l["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"User updated successfully",variant:"success"}}),t.next=12;break;case 9:return t.next=11,e.$http.post("/user-account",e.userForm);case 11:e.$toast({component:l["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"User created successfully",variant:"success"}});case 12:e.resetUserForm(),e.loadUsers(),t.next=22;break;case 16:t.prev=16,t.t0=t["catch"](0),console.error("Error saving user:",t.t0),s="Failed to save user",t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(s=t.t0.response.data.error),e.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:s,variant:"danger"}});case 22:case"end":return t.stop()}}),t,null,[[0,16]])})))()},confirmDeleteUser:function(e){this.userToDelete=e,this.showDeleteModal=!0},deleteUser:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.delete("/user-account/".concat(e.userToDelete.id));case 3:e.$toast({component:l["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"User deleted successfully",variant:"success"}}),e.showDeleteModal=!1,e.userToDelete=null,e.loadUsers(),t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("Error deleting user:",t.t0),r="Failed to delete user",t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(r=t.t0.response.data.error),e.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:r,variant:"danger"}});case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))()},resetUserForm:function(){this.editingUser=null,this.userForm={username:"",fullName:"",email:"",password:"",role:"POS_USER",active:!0},this.showAddUserModal=!1},getRoleBadgeVariant:function(e){switch(e){case"ADMIN":return"danger";case"RESPONSIBLE":return"warning";case"POS_USER":return"info";default:return"secondary"}}}},c=i,u=(r("d31c"),r("2877")),d=Object(u["a"])(c,s,a,!1,null,"278d6507",null);t["default"]=d.exports},d31c:function(e,t,r){"use strict";r("0f9c")}}]);
//# sourceMappingURL=chunk-3bc99379.1aadb58f.js.map