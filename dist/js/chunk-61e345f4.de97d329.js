(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61e345f4"],{"0570":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-subfamilies-page"},[i("div",{staticClass:"page-header"},[i("h2",{staticClass:"mb-0"},[t._v("Item Subfamilies")]),i("b-button",{attrs:{variant:"outline-primary",disabled:t.loadingSubFamilies||t.loadingFamilies},on:{click:t.refreshData}},[i("feather-icon",{staticClass:"mr-1",attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),i("b-card",{staticClass:"mb-3"},[i("b-row",[i("b-col",{attrs:{cols:"12",md:"6"}},[i("b-form-group",{attrs:{label:"Search","label-for":"subfamily-search"}},[i("b-input-group",[i("b-form-input",{attrs:{id:"subfamily-search",placeholder:"Search by code, name, description, or family..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),i("b-input-group-append",[i("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[i("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),i("b-col",{staticClass:"d-flex align-items-end justify-content-md-end",attrs:{cols:"12",md:"6"}},[i("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"subfamily":"subfamilies")+" ")])])],1)],1),i("b-card",[i("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[i("h4",{staticClass:"mb-0"},[t._v("Subfamilies")]),i("b-button",{attrs:{variant:"primary",size:"sm",disabled:t.actionsDisabled},on:{click:function(e){return t.openSubFamilyModal()}}},[i("feather-icon",{staticClass:"mr-1",attrs:{icon:"PlusIcon",size:"14"}}),t._v(" Add Subfamily ")],1)],1),0!==t.families.length||t.loadingFamilies?t._e():i("b-alert",{staticClass:"mb-3",attrs:{variant:"warning",show:""}},[t._v(" You must create at least one item family before adding subfamilies. ")]),i("b-table",{attrs:{items:t.paginatedSubFamilies,fields:t.subFamilyFields,striped:"",hover:"",responsive:"",small:"",busy:t.loadingSubFamilies,"show-empty":""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center text-muted my-2"},[i("b-spinner",{staticClass:"align-middle mr-2"}),i("strong",[t._v("Loading subfamiliesâ€¦")])],1)]},proxy:!0},{key:"empty",fn:function(){return[i("div",{staticClass:"text-center py-4"},[i("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"GridIcon",size:"48"}}),i("p",{staticClass:"text-muted mb-0"},[t._v("No subfamilies found.")])],1)]},proxy:!0},{key:"cell(name)",fn:function(e){return[i("div",{staticClass:"font-weight-bold"},[t._v(t._s(e.item.name))]),e.item.description?i("div",{staticClass:"small text-muted"},[t._v(t._s(e.item.description))]):t._e()]}},{key:"cell(itemFamily)",fn:function(e){return[e.item.itemFamily?i("span",[t._v(t._s(e.item.itemFamily.name))]):i("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(active)",fn:function(e){return[i("b-badge",{attrs:{variant:!1!==e.item.active?"success":"secondary"}},[t._v(" "+t._s(!1!==e.item.active?"Active":"Inactive")+" ")])]}},{key:"cell(actions)",fn:function(e){return[i("div",{staticClass:"text-right"},[i("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-primary",disabled:t.actionsDisabled},on:{click:function(i){return t.openSubFamilyModal(e.item)}}},[i("feather-icon",{attrs:{icon:"Edit2Icon",size:"14"}})],1),i("b-button",{attrs:{size:"sm",variant:"outline-danger",disabled:t.actionsDisabled},on:{click:function(i){return t.confirmDeleteSubFamily(e.item)}}},[i("feather-icon",{attrs:{icon:"Trash2Icon",size:"14"}})],1)],1)]}}])}),i("div",{staticClass:"mt-3"},[i("b-row",{attrs:{"align-v":"center"}},[i("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[i("div",{staticClass:"d-flex align-items-center"},[i("label",{staticClass:"mr-2 mb-0",attrs:{for:"subfamilies-per-page"}},[t._v("Items per page:")]),i("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"subfamilies-per-page",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),i("b-col",{attrs:{cols:"12",md:"6"}},[i("div",{staticClass:"text-center text-md-right"},[i("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" subfamilies ")])])])],1),i("div",{staticClass:"d-flex justify-content-center mt-2"},[i("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),i("b-modal",{attrs:{id:"subfamily-modal",title:t.editingSubFamily?"Edit Subfamily":"Add Subfamily","ok-disabled":!t.canSaveSubFamily},on:{ok:t.saveSubFamily,hidden:t.resetSubFamilyForm},model:{value:t.showSubFamilyModal,callback:function(e){t.showSubFamilyModal=e},expression:"showSubFamilyModal"}},[i("b-form",[i("b-form-group",{attrs:{label:"Family *","label-for":"subfamily-family"}},[i("b-form-select",{attrs:{id:"subfamily-family",options:t.familyOptions,disabled:0===t.families.length},model:{value:t.subFamilyForm.itemFamilyId,callback:function(e){t.$set(t.subFamilyForm,"itemFamilyId",e)},expression:"subFamilyForm.itemFamilyId"}})],1),i("b-form-group",{attrs:{label:"Code *","label-for":"subfamily-code"}},[i("b-form-input",{attrs:{id:"subfamily-code",placeholder:"Unique code"},model:{value:t.subFamilyForm.code,callback:function(e){t.$set(t.subFamilyForm,"code","string"===typeof e?e.trim():e)},expression:"subFamilyForm.code"}})],1),i("b-form-group",{attrs:{label:"Name *","label-for":"subfamily-name"}},[i("b-form-input",{attrs:{id:"subfamily-name",placeholder:"Subfamily name"},model:{value:t.subFamilyForm.name,callback:function(e){t.$set(t.subFamilyForm,"name","string"===typeof e?e.trim():e)},expression:"subFamilyForm.name"}})],1),i("b-form-group",{attrs:{label:"Description","label-for":"subfamily-description"}},[i("b-form-textarea",{attrs:{id:"subfamily-description",rows:"3",placeholder:"Optional description"},model:{value:t.subFamilyForm.description,callback:function(e){t.$set(t.subFamilyForm,"description","string"===typeof e?e.trim():e)},expression:"subFamilyForm.description"}})],1),i("b-form-group",{attrs:{label:"Display Order","label-for":"subfamily-order"}},[i("b-form-input",{attrs:{id:"subfamily-order",type:"number",min:"0"},model:{value:t.subFamilyForm.displayOrder,callback:function(e){t.$set(t.subFamilyForm,"displayOrder",t._n(e))},expression:"subFamilyForm.displayOrder"}})],1),i("b-form-group",[i("b-form-checkbox",{attrs:{switch:""},model:{value:t.subFamilyForm.active,callback:function(e){t.$set(t.subFamilyForm,"active",e)},expression:"subFamilyForm.active"}},[t._v(" Active ")])],1)],1)],1),i("b-modal",{attrs:{id:"delete-subfamily-modal",title:"Delete Subfamily","ok-variant":"danger","ok-title":"Delete"},on:{ok:t.deleteSubFamily},model:{value:t.showDeleteSubFamilyModal,callback:function(e){t.showDeleteSubFamilyModal=e},expression:"showDeleteSubFamilyModal"}},[i("p",{staticClass:"mb-0"},[t._v(" Are you sure you want to delete the subfamily "),t.subFamilyToDelete?i("strong",[t._v(t._s(t.subFamilyToDelete.name))]):t._e(),t._v("? ")]),i("p",{staticClass:"text-danger small mb-0"},[t._v(" This action cannot be undone. ")])])],1)},s=[],l=(i("a4d3"),i("e01a"),i("4de4"),i("caad"),i("d81d"),i("fb6a"),i("4e82"),i("b0c0"),i("d3b7"),i("2532"),i("223c")),o={name:"ItemSubFamiliesManagement",data:function(){return{subFamilies:[],families:[],loadingSubFamilies:!1,loadingFamilies:!1,actionsDisabled:!0,searchTerm:"",currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],subFamilyFields:[{key:"code",label:"Code",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"itemFamily",label:"Family",sortable:!0},{key:"displayOrder",label:"Order",sortable:!0},{key:"active",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1,thClass:"text-right",tdClass:"text-right"}],showSubFamilyModal:!1,showDeleteSubFamilyModal:!1,editingSubFamily:null,subFamilyToDelete:null,subFamilyForm:{code:"",name:"",description:"",displayOrder:0,active:!0,itemFamilyId:null}}},computed:{filteredSubFamilies:function(){if(!this.searchTerm)return this.subFamilies;var t=this.searchTerm.toLowerCase();return this.subFamilies.filter((function(e){var i=e.itemFamily&&e.itemFamily.name?e.itemFamily.name.toLowerCase():"";return e.code&&e.code.toLowerCase().includes(t)||e.name&&e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||i&&i.includes(t)}))},totalRows:function(){return this.filteredSubFamilies.length},paginatedSubFamilies:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredSubFamilies.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)},familyOptions:function(){var t=this.families.filter((function(t){return!1!==t.active})).sort((function(t,e){var i=(t.displayOrder||0)-(e.displayOrder||0);return 0!==i?i:t.name.localeCompare(e.name)})).map((function(t){return{value:t.id,text:t.name}}));return 0===t.length&&t.push({value:null,text:"No families available"}),t},canSaveSubFamily:function(){return this.subFamilyForm.code&&this.subFamilyForm.name&&this.subFamilyForm.itemFamilyId}},watch:{searchTerm:function(){this.currentPage=1},perPage:function(){this.currentPage=1},filteredSubFamilies:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},mounted:function(){this.refreshData()},methods:{refreshData:function(){this.loadFamilies(),this.loadSubFamilies()},loadSubFamilies:function(){var t=this;this.loadingSubFamilies=!0,this.$http.get("/item-sub-family").then((function(e){t.subFamilies=Array.isArray(e.data)?e.data:[]})).catch((function(e){console.error("Error loading item subfamilies:",e),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:"Failed to load item subfamilies.",variant:"danger"}})})).finally((function(){t.loadingSubFamilies=!1}))},loadFamilies:function(){var t=this;this.loadingFamilies=!0,this.$http.get("/item-family").then((function(e){t.families=Array.isArray(e.data)?e.data:[],t.families.length>0&&!t.subFamilyForm.itemFamilyId&&(t.subFamilyForm.itemFamilyId=t.families[0].id)})).catch((function(e){console.error("Error loading item families:",e),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:"Failed to load item families.",variant:"danger"}})})).finally((function(){t.loadingFamilies=!1}))},clearSearch:function(){this.searchTerm=""},openSubFamilyModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;0!==this.families.length?(t?(this.editingSubFamily=t,this.subFamilyForm={code:t.code||"",name:t.name||"",description:t.description||"",displayOrder:t.displayOrder||0,active:!1!==t.active,itemFamilyId:t.itemFamily?t.itemFamily.id:null}):(this.editingSubFamily=null,this.subFamilyForm={code:"",name:"",description:"",displayOrder:0,active:!0,itemFamilyId:this.families.length>0?this.families[0].id:null}),this.showSubFamilyModal=!0):this.$toast({component:l["default"],props:{title:"No Families",icon:"AlertCircleIcon",text:"Create an item family before adding subfamilies.",variant:"warning"}})},resetSubFamilyForm:function(){this.editingSubFamily=null,this.subFamilyForm={code:"",name:"",description:"",displayOrder:0,active:!0,itemFamilyId:this.families.length>0?this.families[0].id:null}},saveSubFamily:function(){var t,e=this,i={code:this.subFamilyForm.code,name:this.subFamilyForm.name,description:this.subFamilyForm.description,displayOrder:this.subFamilyForm.displayOrder||0,active:!1!==this.subFamilyForm.active,itemFamily:{id:this.subFamilyForm.itemFamilyId}};return t=this.editingSubFamily?this.$http.put("/item-sub-family/".concat(this.editingSubFamily.id),i):this.$http.post("/item-sub-family",i),t.then((function(){e.$toast({component:l["default"],props:{title:"Success",icon:"CheckIcon",text:"Subfamily ".concat(e.editingSubFamily?"updated":"created"," successfully."),variant:"success"}}),e.showSubFamilyModal=!1,e.loadSubFamilies()})).catch((function(t){var i;return console.error("Error saving subfamily:",t),e.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:(null===(i=t.response)||void 0===i?void 0:i.data)||"Failed to save subfamily.",variant:"danger"}}),!1}))},confirmDeleteSubFamily:function(t){this.subFamilyToDelete=t,this.showDeleteSubFamilyModal=!0},deleteSubFamily:function(){var t=this;if(this.subFamilyToDelete)return this.$http.delete("/item-sub-family/".concat(this.subFamilyToDelete.id)).then((function(){t.$toast({component:l["default"],props:{title:"Deleted",icon:"Trash2Icon",text:"Subfamily deleted successfully.",variant:"success"}}),t.loadSubFamilies()})).catch((function(e){var i;console.error("Error deleting subfamily:",e),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:(null===(i=e.response)||void 0===i?void 0:i.data)||"Failed to delete subfamily.",variant:"danger"}})})).finally((function(){t.showDeleteSubFamilyModal=!1,t.subFamilyToDelete=null}))}}},n=o,r=(i("b435"),i("2877")),m=Object(r["a"])(n,a,s,!1,null,"1c55b49e",null);e["default"]=m.exports},"216b":function(t,e,i){},"223c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toastification"},[i("div",{staticClass:"d-flex align-items-start"},[i("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[i("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),i("div",{staticClass:"d-flex flex-grow-1"},[i("div",[t.title?i("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?i("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),i("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():i("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},s=[],l=i("e8a3"),o={components:{BAvatar:l["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},n=o,r=(i("2edd"),i("2877")),m=Object(r["a"])(n,a,s,!1,null,"55dd3057",null);e["default"]=m.exports},"2edd":function(t,e,i){"use strict";i("216b")},"4e82":function(t,e,i){"use strict";var a=i("23e7"),s=i("1c0b"),l=i("7b0b"),o=i("d039"),n=i("a640"),r=[],m=r.sort,c=o((function(){r.sort(void 0)})),u=o((function(){r.sort(null)})),d=n("sort"),b=c||!u||!d;a({target:"Array",proto:!0,forced:b},{sort:function(t){return void 0===t?m.call(l(this)):m.call(l(this),s(t))}})},"9b55":function(t,e,i){},b435:function(t,e,i){"use strict";i("9b55")}}]);
//# sourceMappingURL=chunk-61e345f4.de97d329.js.map