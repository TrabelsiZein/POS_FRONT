(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-126a2044"],{"216b":function(t,e,a){},"223c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[t.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},i=[],n=a("e8a3"),r={components:{BAvatar:n["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},o=r,l=(a("2edd"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"55dd3057",null);e["default"]=c.exports},2660:function(t,e,a){"use strict";a("cf58")},"2edd":function(t,e,a){"use strict";a("216b")},a8b6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"general-setup-container"},[a("div",{staticClass:"page-header"},[a("h2",{staticClass:"mb-0"},[t._v("General Setup")]),a("b-button",{attrs:{variant:"outline-primary"},on:{click:t.loadGeneralSetup}},[a("feather-icon",{attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),a("b-card",{staticClass:"mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Search","label-for":"search-input"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"search-input",placeholder:"Search by code, description, or value..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[a("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),a("b-col",{staticClass:"d-flex align-items-end justify-content-md-end",attrs:{cols:"12",md:"6"}},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"setting":"settings")+" ")])])],1)],1),a("b-card",[a("b-table",{attrs:{items:t.paginatedSettings,fields:t.setupFields,striped:"",hover:"",responsive:"",busy:t.loading,"show-empty":""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[t._v(" Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center py-4"},[a("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"SettingsIcon",size:"48"}}),a("p",{staticClass:"text-muted mb-0"},[t._v("No general setup settings found.")])],1)]},proxy:!0},{key:"cell(code)",fn:function(e){return[a("strong",[t._v(t._s(e.item.code))])]}},{key:"cell(valeur)",fn:function(e){return[a("code",{staticClass:"text-primary"},[t._v(t._s(e.item.valeur))])]}},{key:"cell(description)",fn:function(e){return[e.item.description?a("span",{staticClass:"small"},[t._v(t._s(e.item.description))]):a("span",{staticClass:"text-muted small"},[t._v("-")])]}},{key:"cell(readOnly)",fn:function(e){return[a("b-badge",{attrs:{variant:e.item.readOnly?"info":"secondary"}},[t._v(" "+t._s(e.item.readOnly?"Read Only":"Editable")+" ")])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{variant:"outline-primary",size:"sm",disabled:e.item.readOnly},on:{click:function(a){return t.openEditModal(e.item)}}},[a("feather-icon",{attrs:{icon:"EditIcon",size:"14"}})],1)],1)]}}])}),a("div",{staticClass:"mt-3"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"per-page-select"}},[t._v("Items per page:")]),a("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"per-page-select",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-center text-md-right"},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" settings ")])])])],1),a("div",{staticClass:"d-flex justify-content-center mt-2"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{title:"Edit Setting","ok-disabled":!t.canSaveSetting},on:{ok:t.saveSetting,hidden:t.resetEditForm},model:{value:t.showEditModal,callback:function(e){t.showEditModal=e},expression:"showEditModal"}},[t.settingToEdit?a("div",[a("b-form-group",{attrs:{label:"Code"}},[a("b-form-input",{attrs:{value:t.settingToEdit.code,disabled:""}})],1),a("b-form-group",{attrs:{label:"Value","label-for":"setting-value"}},[a("b-form-input",{attrs:{id:"setting-value",required:""},model:{value:t.editForm.valeur,callback:function(e){t.$set(t.editForm,"valeur",e)},expression:"editForm.valeur"}})],1),a("b-form-group",{attrs:{label:"Description","label-for":"setting-description"}},[a("b-form-textarea",{attrs:{id:"setting-description",rows:"3",placeholder:"Optional description",disabled:""},model:{value:t.editForm.description,callback:function(e){t.$set(t.editForm,"description",e)},expression:"editForm.description"}})],1)],1):a("div",[a("p",{staticClass:"text-muted mb-0"},[t._v("Select a setting to edit.")])])])],1)},i=[],n=a("5530"),r=a("c7eb"),o=a("1da1"),l=(a("a4d3"),a("e01a"),a("4de4"),a("caad"),a("fb6a"),a("d3b7"),a("2532"),a("223c")),c={name:"GeneralSetupManagement",data:function(){return{settings:[],loading:!1,searchTerm:"",currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],setupFields:[{key:"code",label:"Code",sortable:!0},{key:"valeur",label:"Value",sortable:!0},{key:"description",label:"Description",sortable:!1},{key:"readOnly",label:"Read Only",sortable:!0},{key:"actions",label:"Actions",sortable:!1,thClass:"text-right",tdClass:"text-right"}],showEditModal:!1,settingToEdit:null,editForm:{valeur:"",description:""}}},computed:{filteredSettings:function(){if(!this.searchTerm)return this.settings;var t=this.searchTerm.toLowerCase();return this.settings.filter((function(e){return e.code&&e.code.toLowerCase().includes(t)||e.valeur&&e.valeur.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)}))},totalRows:function(){return this.filteredSettings.length},paginatedSettings:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredSettings.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)},canSaveSetting:function(){return!!this.settingToEdit&&null!==this.editForm.valeur&&void 0!==this.editForm.valeur}},watch:{searchTerm:function(){this.currentPage=1},perPage:function(){this.currentPage=1},filteredSettings:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},mounted:function(){this.loadGeneralSetup()},methods:{loadGeneralSetup:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.get("/general-setup");case 4:a=e.sent,t.settings=Array.isArray(a.data)?a.data:[],e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Error loading general setup:",e.t0),t.$toast({component:l["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load general setup",variant:"danger"}});case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},clearSearch:function(){this.searchTerm=""},openEditModal:function(t){t&&!t.readOnly?(this.settingToEdit=t,this.editForm={valeur:t.valeur,description:t.description||""},this.showEditModal=!0):this.$toast({component:l["default"],props:{title:"Read Only",icon:"AlertCircleIcon",text:"This setting is read only and cannot be modified.",variant:"warning"}})},saveSetting:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a,s,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.settingToEdit){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a=Object(n["a"])(Object(n["a"])({},t.settingToEdit),{},{valeur:t.editForm.valeur,description:t.editForm.description}),e.next=6,t.$http.put("/general-setup/".concat(t.settingToEdit.id),a);case 6:if(s=e.sent,200!==s.status){e.next=13;break}return t.$toast({component:l["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"Setting updated successfully",variant:"success"}}),t.showEditModal=!1,t.resetEditForm(),e.next=13,t.loadGeneralSetup();case 13:e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](2),console.error("Error updating setting:",e.t0),i="Failed to update setting",e.t0.response&&e.t0.response.data&&(i=e.t0.response.data||i),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:i,variant:"danger"}});case 21:case"end":return e.stop()}}),e,null,[[2,15]])})))()},resetEditForm:function(){this.settingToEdit=null,this.editForm={valeur:"",description:""}}}},d=c,u=(a("2660"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,"7da728e2",null);e["default"]=p.exports},cf58:function(t,e,a){}}]);
//# sourceMappingURL=chunk-126a2044.412e33e8.js.map