(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5df1258f"],{"0ccb":function(t,e,n){var r=n("50c4"),s=n("1148"),a=n("1d80"),i=Math.ceil,o=function(t){return function(e,n,o){var l,c,u=String(a(e)),d=u.length,b=void 0===o?" ":String(o),p=r(n);return p<=d||""==b?u:(l=p-d,c=s.call(b,i(l/b.length)),c.length>l&&(c=c.slice(0,l)),t?u+c:c+u)}};t.exports={start:o(!1),end:o(!0)}},1148:function(t,e,n){"use strict";var r=n("a691"),s=n("1d80");t.exports="".repeat||function(t){var e=String(s(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},1276:function(t,e,n){"use strict";var r=n("d784"),s=n("44e7"),a=n("825a"),i=n("1d80"),o=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),d=n("9263"),b=n("d039"),p=[].push,f=Math.min,h=4294967295,v=!b((function(){return!RegExp(h,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(i(this)),a=void 0===n?h:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!s(t))return e.call(r,t,a);var o,l,c,u=[],b=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,b+"g");while(o=d.call(v,r)){if(l=v.lastIndex,l>f&&(u.push(r.slice(f,o.index)),o.length>1&&o.index<r.length&&p.apply(u,o.slice(1)),c=o[0].length,f=l,u.length>=a))break;v.lastIndex===o.index&&v.lastIndex++}return f===r.length?!c&&v.test("")||u.push(""):u.push(r.slice(f)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var s=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,s,n):r.call(String(s),e,n)},function(t,s){var i=n(r,t,this,s,r!==e);if(i.done)return i.value;var d=a(t),b=String(this),p=o(d,RegExp),m=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),y=new p(v?d:"^(?:"+d.source+")",g),x=void 0===s?h:s>>>0;if(0===x)return[];if(0===b.length)return null===u(y,b)?[b]:[];var k=0,E=0,w=[];while(E<b.length){y.lastIndex=v?E:0;var C,J=u(y,v?b:b.slice(E));if(null===J||(C=f(c(y.lastIndex+(v?0:E)),b.length))===k)E=l(b,E,m);else{if(w.push(b.slice(k,E)),w.length===x)return w;for(var T=1;T<=J.length-1;T++)if(w.push(J[T]),w.length===x)return w;E=k=C}}return w.push(b.slice(k)),w}]}),!v)},"2ca0":function(t,e,n){"use strict";var r=n("23e7"),s=n("06cf").f,a=n("50c4"),i=n("5a34"),o=n("1d80"),l=n("ab13"),c=n("c430"),u="".startsWith,d=Math.min,b=l("startsWith"),p=!c&&!b&&!!function(){var t=s(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!p&&!b},{startsWith:function(t){var e=String(o(this));i(t);var n=a(d(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,n):e.slice(n,n+r.length)===r}})},"31b3":function(t,e,n){"use strict";n("468f")},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function s(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw s}}return o}}var a=n("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return r(t)||s(t,e)||Object(a["a"])(t,e)||i()}},"468f":function(t,e,n){},"4d90":function(t,e,n){"use strict";var r=n("23e7"),s=n("0ccb").start,a=n("9a0c");r({target:"String",proto:!0,forced:a},{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e82":function(t,e,n){"use strict";var r=n("23e7"),s=n("1c0b"),a=n("7b0b"),i=n("d039"),o=n("a640"),l=[],c=l.sort,u=i((function(){l.sort(void 0)})),d=i((function(){l.sort(null)})),b=o("sort"),p=u||!d||!b;r({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(a(this)):c.call(a(this),s(t))}})},6062:function(t,e,n){"use strict";var r=n("6d61"),s=n("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(t,e,n){"use strict";var r=n("9bf2").f,s=n("7c73"),a=n("e2cc"),i=n("0366"),o=n("19aa"),l=n("2266"),c=n("7dd0"),u=n("2626"),d=n("83ab"),b=n("f183").fastKey,p=n("69f3"),f=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,r){o(t,u,e),f(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=r&&l(r,t[c],{that:t,AS_ENTRIES:n})})),p=h(e),v=function(t,e,n){var r,s,a=p(t),i=m(t,e);return i?i.value=n:(a.last=i={index:s=b(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=i),r&&(r.next=i),d?a.size++:t.size++,"F"!==s&&(a.index[s]=i)),t},m=function(t,e){var n,r=p(t),s=b(e);if("F"!==s)return r.index[s];for(n=r.first;n;n=n.next)if(n.key==e)return n};return a(u.prototype,{clear:function(){var t=this,e=p(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),r=m(e,t);if(r){var s=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=s),s&&(s.previous=a),n.first==r&&(n.first=s),n.last==r&&(n.last=a),d?n.size--:e.size--}return!!r},forEach:function(t){var e,n=p(this),r=i(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),a(u.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),d&&r(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(t,e,n){var r=e+" Iterator",s=h(e),a=h(r);c(t,e,(function(t,e){f(this,{type:r,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"6d61":function(t,e,n){"use strict";var r=n("23e7"),s=n("da84"),a=n("94ca"),i=n("6eeb"),o=n("f183"),l=n("2266"),c=n("19aa"),u=n("861d"),d=n("d039"),b=n("1c7e"),p=n("d44e"),f=n("7156");t.exports=function(t,e,n){var h=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),m=h?"set":"add",g=s[t],y=g&&g.prototype,x=g,k={},E=function(t){var e=y[t];i(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(a(t,"function"!=typeof g||!(v||y.forEach&&!d((function(){(new g).entries().next()})))))x=n.getConstructor(e,t,h,m),o.REQUIRED=!0;else if(a(t,!0)){var w=new x,C=w[m](v?{}:-0,1)!=w,J=d((function(){w.has(1)})),T=b((function(t){new g(t)})),_=!v&&d((function(){var t=new g,e=5;while(e--)t[m](e,e);return!t.has(-0)}));T||(x=e((function(e,n){c(e,x,t);var r=f(new g,e,x);return void 0!=n&&l(n,r[m],{that:r,AS_ENTRIES:h}),r})),x.prototype=y,y.constructor=x),(J||_)&&(E("delete"),E("has"),h&&E("get")),(_||C)&&E(m),v&&y.clear&&delete y.clear}return k[t]=x,r({global:!0,forced:x!=g},k),p(x,t),v||n.setStrong(x,t,h),x}},"78b6":function(t,e,n){"use strict";n("78be")},"78be":function(t,e,n){},"9a0c":function(t,e,n){var r=n("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc74:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"erp-jobs-container"},[n("div",{staticClass:"page-header"},[n("h2",{staticClass:"mb-0"},[t._v("ERP Sync Jobs")]),n("b-button",{attrs:{variant:"outline-primary",disabled:t.loading},on:{click:t.loadJobs}},[n("feather-icon",{staticClass:"mr-50",attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),n("b-card",{staticClass:"mb-3"},[n("b-row",[n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Search","label-for":"job-search-input"}},[n("b-input-group",[n("b-form-input",{attrs:{id:"job-search-input",placeholder:"Search by job type, description, cron, or checkpoint code..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[n("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),n("b-col",{attrs:{cols:"12",lg:"6"}},[n("b-row",[n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{staticClass:"mb-md-0",attrs:{label:"Status","label-for":"job-status-filter"}},[n("b-form-select",{attrs:{id:"job-status-filter",options:t.statusOptions},model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}})],1)],1),n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Enabled","label-for":"job-enabled-filter"}},[n("b-form-select",{attrs:{id:"job-enabled-filter",options:t.enabledOptions},model:{value:t.enabledFilter,callback:function(e){t.enabledFilter=e},expression:"enabledFilter"}})],1)],1)],1)],1)],1),n("b-row",{staticClass:"mt-1"},[n("b-col",{staticClass:"d-flex align-items-end justify-content-lg-end",attrs:{cols:"12"}},[n("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"job":"jobs")+" ")])])],1)],1),n("b-card",[t.isAnyJobRunning?n("b-progress",{staticClass:"mb-2",attrs:{max:100,height:"6px",animated:"",striped:""}},[n("b-progress-bar",{attrs:{value:t.runProgress,variant:"info"}})],1):t._e(),n("b-table",{staticClass:"jobs-table",attrs:{items:t.paginatedJobs,fields:t.jobFields,striped:"",hover:"",responsive:"","show-empty":"",busy:t.loading},on:{"row-clicked":t.openDetails},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",{staticClass:"ml-1"},[t._v("Loading jobs...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[n("div",{staticClass:"text-center py-4"},[n("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"RefreshCwIcon",size:"48"}}),n("p",{staticClass:"text-muted mb-0"},[t._v("No jobs found.")])],1)]},proxy:!0},{key:"cell(jobType)",fn:function(e){return[t._v(" "+t._s(t.formatJobType(e.item.jobType))+" ")]}},{key:"cell(description)",fn:function(e){return[e.item.description?n("span",[t._v(t._s(e.item.description))]):n("span",{staticClass:"text-muted"},[t._v("—")])]}},{key:"cell(cronExpression)",fn:function(e){return[e.item.cronDescription?n("div",{staticClass:"text-primary"},[t._v(" "+t._s(e.item.cronDescription)+" ")]):n("span",{staticClass:"text-muted"},[t._v("—")])]}},{key:"cell(enabled)",fn:function(e){return[n("b-badge",{attrs:{variant:e.item.enabled?"success":"secondary"}},[t._v(" "+t._s(e.item.enabled?"Enabled":"Disabled")+" ")])]}},{key:"cell(lastRunAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.lastRunAt))+" ")]}},{key:"cell(nextRunAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.nextRunAt))+" ")]}}])}),n("div",{staticClass:"mt-3"},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"d-flex align-items-center"},[n("label",{staticClass:"mr-2 mb-0",attrs:{for:"jobs-per-page"}},[t._v("Items per page:")]),n("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"jobs-per-page",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),n("b-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"text-center text-md-right"},[n("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" jobs ")])])])],1),n("div",{staticClass:"d-flex justify-content-center mt-2"},[n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),n("b-modal",{attrs:{title:t.isEditMode?"Edit Job":"Job Details",size:"lg"},on:{hide:t.handleModalHide},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100 d-flex justify-content-between"},[n("div",[!t.isEditMode&&t.selectedJob?n("b-button",{attrs:{variant:"link",size:"sm"},on:{click:t.goToStatistics}},[n("feather-icon",{staticClass:"mr-50",attrs:{icon:"BarChartIcon",size:"16"}}),t._v(" View Statistics ")],1):t._e()],1),n("div",{staticClass:"d-flex align-items-center"},[t.isEditMode?n("b-button",{staticClass:"mr-2",attrs:{variant:"secondary",disabled:t.saving},on:{click:t.cancelEdit}},[t._v(" Cancel ")]):t._e(),t.isEditMode?t._e():n("b-button",{staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:function(e){t.showDetailsModal=!1}}},[t._v(" Close ")]),t.isEditMode?n("b-button",{attrs:{variant:"primary",disabled:t.saving},on:{click:t.saveJob}},[t.saving?n("b-spinner",{staticClass:"mr-50",attrs:{small:""}}):t._e(),t._v(" Save ")],1):t._e(),!t.isEditMode&&t.selectedJob?n("b-button",{staticClass:"mr-2",attrs:{variant:"outline-primary"},on:{click:t.startEdit}},[n("feather-icon",{staticClass:"mr-50",attrs:{icon:"EditIcon",size:"16"}}),t._v(" Edit ")],1):t._e(),!t.isEditMode&&t.selectedJob?n("b-button",{attrs:{variant:"primary",disabled:t.isAnyJobRunning},on:{click:t.handleRunClick}},[t.selectedJob&&t.isRunning(t.selectedJob.id)?[n("b-spinner",{staticClass:"mr-50",attrs:{small:""}})]:[n("feather-icon",{staticClass:"mr-50",attrs:{icon:"PlayCircleIcon",size:"16"}})],t._v(" Run Now ")],2):t._e()],1)])]},proxy:!0}]),model:{value:t.showDetailsModal,callback:function(e){t.showDetailsModal=e},expression:"showDetailsModal"}},[t.selectedJob?n("div",[t.isEditMode?n("div",[n("b-form-group",{attrs:{label:"Description","label-for":"job-description"}},[n("b-form-input",{attrs:{id:"job-description"},model:{value:t.editedJob.description,callback:function(e){t.$set(t.editedJob,"description",e)},expression:"editedJob.description"}})],1),n("b-form-group",{attrs:{label:"Enabled","label-for":"job-enabled-toggle"}},[n("b-form-checkbox",{attrs:{id:"job-enabled-toggle",switch:""},model:{value:t.editedJob.enabled,callback:function(e){t.$set(t.editedJob,"enabled",e)},expression:"editedJob.enabled"}},[t._v(" "+t._s(t.editedJob.enabled?"Enabled":"Disabled")+" ")])],1),n("CronBuilder",{model:{value:t.editedJob.cronExpression,callback:function(e){t.$set(t.editedJob,"cronExpression",e)},expression:"editedJob.cronExpression"}})],1):n("div",[n("b-row",[n("b-col",{attrs:{cols:"12",md:"6"}},[n("p",[n("strong",[t._v("Job:")]),t._v(" "+t._s(t.formatJobType(t.selectedJob.jobType)))]),n("p",[n("strong",[t._v("Description:")]),t._v(" "+t._s(t.selectedJob.description||"—"))]),n("p",[n("strong",[t._v("Last Status: ")]),n("b-badge",{attrs:{variant:t.statusVariant(t.selectedJob.lastStatus)}},[t._v(" "+t._s(t.formatStatusText(t.selectedJob.lastStatus))+" ")])],1),n("p",[n("strong",[t._v("Enabled: ")]),n("b-badge",{staticClass:"mr-2",attrs:{variant:t.selectedJob.enabled?"success":"secondary"}},[t._v(" "+t._s(t.selectedJob.enabled?"Enabled":"Disabled")+" ")]),n("b-button",{staticClass:"p-0",attrs:{variant:"link",size:"sm"},on:{click:function(e){return t.toggleEnabled(t.selectedJob)}}},[t._v(" "+t._s(t.selectedJob.enabled?"Disable":"Enable")+" ")])],1)]),n("b-col",{attrs:{cols:"12",md:"6"}},[t.selectedJob.cronDescription?n("p",[n("strong",[t._v("Schedule:")]),t._v(" "+t._s(t.selectedJob.cronDescription)+" ")]):t._e(),n("p",[n("strong",[t._v("Last Run:")]),t._v(" "+t._s(t.formatDateTime(t.selectedJob.lastRunAt)||"—"))]),n("p",[n("strong",[t._v("Next Run:")]),t._v(" "+t._s(t.formatDateTime(t.selectedJob.nextRunAt)||"—"))]),n("p",[n("strong",[t._v("Checkpoint:")]),t.selectedJob.checkpointValue?n("span",[t._v(t._s(t.selectedJob.checkpointValue))]):n("span",{staticClass:"text-muted"},[t._v("—")])]),n("p",[n("strong",[t._v("Last Checkpoint:")]),t._v(" "+t._s(t.formatDateTime(t.selectedJob.lastCheckpointAt)||"—")+" ")])])],1)],1)]):t._e()])],1)],1)},s=[],a=n("c7eb"),i=n("1da1"),o=n("2909"),l=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("7db0"),n("c740"),n("a630"),n("caad"),n("a15b9"),n("d81d"),n("fb6a"),n("4e82"),n("d3b7"),n("25f0"),n("6062"),n("2532"),n("3ca3"),n("498a"),n("159b"),n("ddb0"),n("c1df")),c=n.n(l),u=n("223c"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cron-builder"},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",[n("label",{staticClass:"mb-2"},[t._v("Schedule")]),n("b-form-select",{staticClass:"mb-3",attrs:{options:t.presetTypeOptions},on:{change:t.onPresetTypeChange},model:{value:t.presetType,callback:function(e){t.presetType=e},expression:"presetType"}}),"minute"===t.presetType?n("div",{staticClass:"preset-config"},[n("b-form-group",{attrs:{label:"Every N minutes","label-for":"minute-interval"}},[n("b-form-select",{attrs:{id:"minute-interval",options:t.minuteIntervalOptions},on:{change:t.generateCron},model:{value:t.minuteInterval,callback:function(e){t.minuteInterval=e},expression:"minuteInterval"}})],1)],1):t._e(),"hour"===t.presetType?n("div",{staticClass:"preset-config"},[n("b-form-group",{attrs:{label:"Every N hours","label-for":"hour-interval"}},[n("b-form-select",{attrs:{id:"hour-interval",options:t.hourIntervalOptions},on:{change:t.generateCron},model:{value:t.hourInterval,callback:function(e){t.hourInterval=e},expression:"hourInterval"}})],1),n("b-form-group",{attrs:{label:"At minute","label-for":"hour-minute"}},[n("b-form-select",{attrs:{id:"hour-minute",options:t.hourMinuteOptions},on:{change:t.generateCron},model:{value:t.hourMinute,callback:function(e){t.hourMinute=e},expression:"hourMinute"}})],1)],1):t._e(),"day"===t.presetType?n("div",{staticClass:"preset-config"},[n("b-form-group",{attrs:{label:"Time","label-for":"daily-time"}},[n("b-form-timepicker",{attrs:{id:"daily-time",locale:"en"},on:{input:t.generateCron},model:{value:t.dailyTime,callback:function(e){t.dailyTime=e},expression:"dailyTime"}})],1)],1):t._e(),"week"===t.presetType?n("div",{staticClass:"preset-config"},[n("b-form-group",{attrs:{label:"Day of week","label-for":"weekday"}},[n("b-form-select",{attrs:{id:"weekday",options:t.weekdayOptions},on:{change:t.generateCron},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}})],1),n("b-form-group",{attrs:{label:"Time","label-for":"weekly-time"}},[n("b-form-timepicker",{attrs:{id:"weekly-time",locale:"en"},on:{input:t.generateCron},model:{value:t.weeklyTime,callback:function(e){t.weeklyTime=e},expression:"weeklyTime"}})],1)],1):t._e(),"month"===t.presetType?n("div",{staticClass:"preset-config"},[n("b-form-group",{attrs:{label:"Day of month","label-for":"month-day"}},[n("b-form-select",{attrs:{id:"month-day",options:t.monthDayOptions},on:{change:t.generateCron},model:{value:t.monthDay,callback:function(e){t.monthDay=e},expression:"monthDay"}})],1),n("b-form-group",{attrs:{label:"Time","label-for":"monthly-time"}},[n("b-form-timepicker",{attrs:{id:"monthly-time",locale:"en"},on:{input:t.generateCron},model:{value:t.monthlyTime,callback:function(e){t.monthlyTime=e},expression:"monthlyTime"}})],1)],1):t._e()],1)],1)],1),t.cronDescription?n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-alert",{staticClass:"mb-0",attrs:{variant:"info",show:""}},[n("strong",[t._v("Schedule:")]),t._v(" "+t._s(t.cronDescription)+" ")])],1)],1):t._e()],1)},b=[],p=n("3835");n("ac1f"),n("4d90"),n("1276"),n("2ca0");function f(t){if(!t||!t.trim())return"Invalid CRON expression";var e=t.trim().split(/\s+/);if(e.length<5)return"Invalid CRON expression";var n=6===e.length,r=n?h(e[0],0,59):-1,s=e[n?1:0],a=e[n?2:1],i=e[n?3:2],o=e[n?4:3],l=e[n?5:4];if(0===r&&"*"===s&&"*"===a&&"*"===i&&"*"===o&&"*"===l)return"Every second";if("*"===s&&"*"===a&&"*"===i&&"*"===o&&"*"===l)return"Every minute";if(s.startsWith("*/")&&"*"===a&&"*"===i&&"*"===o&&"*"===l){var c=parseInt(s.substring(2),10);if(!isNaN(c))return 1===c?"Every minute":"Every ".concat(c," minutes")}if("0"===s&&"*"===a&&"*"===i&&"*"===o&&"*"===l)return"Every hour at minute 0";if(a.startsWith("*/")&&"*"===i&&"*"===o&&"*"===l){var u=parseInt(a.substring(2),10);if(!isNaN(u)){var d="0"===s?"":" at minute ".concat(s);return"Every ".concat(u," hours").concat(d)}}if("*"!==s&&"*"!==a&&"*"===i&&"*"===o&&"*"===l){var b=h(a,0,23),p=h(s,0,59);if(-1!==b&&-1!==p)return"Daily at ".concat(String(b).padStart(2,"0"),":").concat(String(p).padStart(2,"0"))}if("*"!==l&&"*"===i&&"*"===o){var f=v(l);if(f){var m=h(a,0,23),g=h(s,0,59);return-1!==m&&-1!==g?"Every ".concat(f," at ").concat(String(m).padStart(2,"0"),":").concat(String(g).padStart(2,"0")):"Every ".concat(f)}}if("*"!==i&&"*"===o&&"*"===l){var y=h(i,1,31);if(-1!==y){var x=h(a,0,23),k=h(s,0,59);return-1!==x&&-1!==k?"Monthly on day ".concat(y," at ").concat(String(x).padStart(2,"0"),":").concat(String(k).padStart(2,"0")):"Monthly on day ".concat(y)}}return"Custom schedule (".concat(t,")")}function h(t,e,n){if(!t||"*"===t)return-1;var r=parseInt(t,10);return!isNaN(r)&&r>=e&&r<=n?r:-1}function v(t){var e=parseInt(t,10);if(isNaN(e))return null;var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return 0===e||7===e?n[0]:e>=1&&e<=6?n[e]:null}function m(t){if(!t||!t.trim())return!1;var e=t.trim().split(/\s+/);return e.length>=5&&e.length<=6}var g={name:"CronBuilder",props:{value:{type:String,default:""}},data:function(){for(var t=[],e=1;e<=60;e++)t.push({value:e,text:1===e?"Every 1 minute":"Every ".concat(e," minutes")});for(var n=[],r=1;r<=23;r++)n.push({value:r,text:1===r?"Every 1 hour":"Every ".concat(r," hours")});for(var s=[],a=0;a<=59;a++)s.push({value:a,text:String(a).padStart(2,"0")});for(var i=[],o=1;o<=28;o++)i.push({value:o,text:String(o)});return{cronExpression:this.value||"",presetType:"day",presetTypeOptions:[{value:"minute",text:"Every N minutes"},{value:"hour",text:"Every N hours"},{value:"day",text:"Daily at specific time"},{value:"week",text:"Weekly on specific day"},{value:"month",text:"Monthly on specific day"}],minuteInterval:5,minuteIntervalOptions:t,hourInterval:1,hourIntervalOptions:n,hourMinute:0,hourMinuteOptions:s,dailyTime:"02:00",weekday:"1",weekdayOptions:[{value:"0",text:"Sunday"},{value:"1",text:"Monday"},{value:"2",text:"Tuesday"},{value:"3",text:"Wednesday"},{value:"4",text:"Thursday"},{value:"5",text:"Friday"},{value:"6",text:"Saturday"}],weeklyTime:"02:00",monthDay:1,monthDayOptions:i,monthlyTime:"02:00"}},computed:{cronDescription:function(){return!this.cronExpression||this.cronError?null:f(this.cronExpression)}},watch:{value:function(t){t!==this.cronExpression&&(this.cronExpression=t||"",this.cronExpression&&this.parseCronToPreset(),this.validateCron())}},mounted:function(){this.cronExpression&&this.parseCronToPreset()},methods:{generateCron:function(){var t="";switch(this.presetType){case"minute":t="0 */".concat(this.minuteInterval," * * * *");break;case"hour":t="0 ".concat(this.hourMinute," */").concat(this.hourInterval," * * *");break;case"day":if(this.dailyTime){var e=this.dailyTime.split(":"),n=Object(p["a"])(e,2),r=n[0],s=n[1];t="0 ".concat(s," ").concat(r," * * *")}break;case"week":if(this.weeklyTime){var a=this.weeklyTime.split(":"),i=Object(p["a"])(a,2),o=i[0],l=i[1];t="0 ".concat(l," ").concat(o," * * ").concat(this.weekday)}break;case"month":if(this.monthlyTime){var c=this.monthlyTime.split(":"),u=Object(p["a"])(c,2),d=u[0],b=u[1];t="0 ".concat(b," ").concat(d," ").concat(this.monthDay," * *")}break}t&&(this.cronExpression=t,this.$emit("input",t),this.validateCron())},parseCronToPreset:function(){if(this.cronExpression){var t=this.cronExpression.trim().split(/\s+/);if(!(t.length<5)){var e=6===t.length,n=t[e?1:0],r=t[e?2:1],s=t[e?3:2],a=t[e?5:4];if(n.startsWith("*/")&&"*"===r&&"*"===s&&"*"===a)this.presetType="minute",this.minuteInterval=parseInt(n.substring(2),10)||5;else if(r.startsWith("*/")&&"*"===s&&"*"===a)this.presetType="hour",this.hourInterval=parseInt(r.substring(2),10)||1,this.hourMinute=parseInt(n,10)||0;else if("*"===s&&"*"===a){this.presetType="day";var i=parseInt(r,10)||2,o=parseInt(n,10)||0;this.dailyTime="".concat(String(i).padStart(2,"0"),":").concat(String(o).padStart(2,"0"))}else if("*"===s&&"*"!==a){this.presetType="week",this.weekday=a;var l=parseInt(r,10)||2,c=parseInt(n,10)||0;this.weeklyTime="".concat(String(l).padStart(2,"0"),":").concat(String(c).padStart(2,"0"))}else if("*"!==s&&"*"===a){this.presetType="month",this.monthDay=parseInt(s,10)||1;var u=parseInt(r,10)||2,d=parseInt(n,10)||0;this.monthlyTime="".concat(String(u).padStart(2,"0"),":").concat(String(d).padStart(2,"0"))}}}},validateCron:function(){this.cronExpression&&m(this.cronExpression)&&this.$emit("input",this.cronExpression)},onPresetTypeChange:function(){this.generateCron()}}},y=g,x=(n("31b3"),n("2877")),k=Object(x["a"])(y,d,b,!1,null,"44cd71b6",null),E=k.exports,w={name:"ErpJobs",components:{CronBuilder:E},data:function(){return{jobs:[],loading:!1,searchTerm:"",statusFilter:"ALL",enabledFilter:"ALL",currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],enabledOptions:[{value:"ALL",text:"All states"},{value:"ENABLED",text:"Enabled"},{value:"DISABLED",text:"Disabled"}],runningJobId:null,runProgress:0,progressTimer:null,jobFields:[{key:"jobType",label:"Job",sortable:!0},{key:"description",label:"Description",sortable:!0},{key:"cronExpression",label:"Cron",sortable:!1},{key:"enabled",label:"Enabled",sortable:!0},{key:"lastRunAt",label:"Last Run",sortable:!0},{key:"nextRunAt",label:"Next Run",sortable:!0}],showDetailsModal:!1,selectedJob:null,isEditMode:!1,editedJob:{description:"",cronExpression:"",enabled:!1},saving:!1}},computed:{statusOptions:function(){var t=this,e=new Set;this.jobs.forEach((function(t){t.lastStatus&&e.add((t.lastStatus||"").toUpperCase())}));var n=Array.from(e).sort();return[{value:"ALL",text:"All statuses"}].concat(Object(o["a"])(n.map((function(e){return{value:e,text:t.formatStatusText(e)}}))))},filteredJobs:function(){var t=this,e=this.searchTerm.trim().toLowerCase();return this.jobs.filter((function(n){if("ALL"!==t.statusFilter){var r=(n.lastStatus||"").toUpperCase();if(r!==t.statusFilter)return!1}if("ALL"!==t.enabledFilter){var s="ENABLED"===t.enabledFilter;if(Boolean(n.enabled)!==s)return!1}if(!e)return!0;var a=t.formatJobType(n.jobType||"");return a.toLowerCase().includes(e)||n.description&&n.description.toLowerCase().includes(e)||n.cronExpression&&n.cronExpression.toLowerCase().includes(e)||n.checkpointValue&&n.checkpointValue.toLowerCase().includes(e)}))},totalRows:function(){return this.filteredJobs.length},paginatedJobs:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredJobs.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)},isAnyJobRunning:function(){return null!==this.runningJobId}},watch:{searchTerm:function(){this.currentPage=1},statusFilter:function(){this.currentPage=1},enabledFilter:function(){this.currentPage=1},perPage:function(){this.currentPage=1},filteredJobs:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},beforeDestroy:function(){this.clearProgressTimer()},mounted:function(){this.loadJobs()},methods:{loadJobs:function(){var t=this;return Object(i["a"])(Object(a["a"])().mark((function e(){var n,r,s;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.get("/admin/erp/jobs");case 4:n=e.sent,r=Array.isArray(n.data)?n.data:[],t.jobs=r,t.selectedJob&&(s=r.find((function(e){return e.id===t.selectedJob.id})),s&&(t.selectedJob=s)),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.error("Error loading ERP jobs:",e.t0),t.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load ERP jobs",variant:"danger"}});case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))()},clearSearch:function(){this.searchTerm=""},openDetails:function(t){t&&(this.selectedJob=t,this.showDetailsModal=!0)},handleRunClick:function(){var t=this;if(this.selectedJob&&!this.isAnyJobRunning){var e=this.selectedJob;this.showDetailsModal=!1,this.$nextTick((function(){t.runJob(e)}))}},isRunning:function(t){return this.runningJobId===t},startProgressTimer:function(){var t=this;this.clearProgressTimer(),this.runProgress=0,this.progressTimer=setInterval((function(){t.runProgress<90&&(t.runProgress+=5)}),300)},finishProgress:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.runProgress=e?100:0,setTimeout((function(){t.clearProgressTimer(),t.runningJobId=null,t.runProgress=0}),e?300:0)},clearProgressTimer:function(){this.progressTimer&&(clearInterval(this.progressTimer),this.progressTimer=null)},runJob:function(t){var e=this;return Object(i["a"])(Object(a["a"])().mark((function n(){var r,s,i,o;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t&&!e.runningJobId){n.next=2;break}return n.abrupt("return");case 2:return e.runningJobId=t.id,e.startProgressTimer(),n.prev=4,n.next=7,e.$http.post("/admin/erp/jobs/".concat(t.id,"/run"));case 7:r=n.sent,s=r&&r.data?r.data:null,e.$toast({component:u["default"],props:{title:"Job executed",icon:"CheckCircleIcon",text:"".concat(e.formatJobType(t.jobType)," started successfully"),variant:"success"}}),s?(i=e.jobs.findIndex((function(e){return e.id===t.id})),-1!==i&&e.$set(e.jobs,i,s),e.selectedJob&&e.selectedJob.id===s.id&&(e.selectedJob=s)):e.loadJobs(),e.finishProgress(!0),n.next=22;break;case 14:n.prev=14,n.t0=n["catch"](4),console.error("Error running ERP job:",n.t0),o="Failed to run job",n.t0.response&&n.t0.response.data&&n.t0.response.data.error&&(o=n.t0.response.data.error),e.$toast({component:u["default"],props:{title:"Error",icon:"XIcon",text:o,variant:"danger"}}),e.selectedJob&&e.selectedJob.id===t.id&&(e.showDetailsModal=!0),e.finishProgress(!1);case 22:case"end":return n.stop()}}),n,null,[[4,14]])})))()},formatJobType:function(t){return t?t.toString().toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" "):"Unknown"},formatStatusText:function(t){return t?t.toString().toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" "):"N/A"},formatDateTime:function(t){return t?c()(t).format("YYYY-MM-DD HH:mm:ss"):"—"},statusVariant:function(t){var e=(t||"").toUpperCase();return"SUCCESS"===e?"success":"FAILED"===e||"ERROR"===e?"danger":"RUNNING"===e||"IN_PROGRESS"===e?"warning":"secondary"},startEdit:function(){this.selectedJob&&(this.editedJob={description:this.selectedJob.description||"",cronExpression:this.selectedJob.cronExpression||"",enabled:Boolean(this.selectedJob.enabled)},this.isEditMode=!0)},cancelEdit:function(){this.isEditMode=!1,this.editedJob={description:"",cronExpression:"",enabled:!1}},handleModalHide:function(){this.isEditMode=!1,this.selectedJob=null,this.editedJob={description:"",cronExpression:"",enabled:!1}},saveJob:function(){var t=this;return Object(i["a"])(Object(a["a"])().mark((function e(){var n,r,s,i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectedJob){e.next=2;break}return e.abrupt("return");case 2:return t.saving=!0,e.prev=3,e.next=6,t.$http.put("/admin/erp/jobs/".concat(t.selectedJob.id),{description:t.editedJob.description,cronExpression:t.editedJob.cronExpression,enabled:t.editedJob.enabled});case 6:if(n=e.sent,r=n&&n.data?n.data:null,t.$toast({component:u["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"Job updated successfully",variant:"success"}}),!r){e.next=15;break}s=t.jobs.findIndex((function(e){return e.id===t.selectedJob.id})),-1!==s&&t.$set(t.jobs,s,r),t.selectedJob=r,e.next=17;break;case 15:return e.next=17,t.loadJobs();case 17:t.isEditMode=!1,e.next=26;break;case 20:e.prev=20,e.t0=e["catch"](3),console.error("Error updating job:",e.t0),i="Failed to update job",e.t0.response&&e.t0.response.data&&(e.t0.response.data.error?i=e.t0.response.data.error:e.t0.response.data.message&&(i=e.t0.response.data.message)),t.$toast({component:u["default"],props:{title:"Error",icon:"XIcon",text:i,variant:"danger"}});case 26:return e.prev=26,t.saving=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[3,20,26,29]])})))()},toggleEnabled:function(t){var e=this;return Object(i["a"])(Object(a["a"])().mark((function n(){var r,s,i;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.$http.patch("/admin/erp/jobs/".concat(t.id),{enabled:!t.enabled});case 5:if(r=n.sent,s=r&&r.data?r.data:null,e.$toast({component:u["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"Job ".concat(s&&s.enabled?"enabled":"disabled"," successfully"),variant:"success"}}),!s){n.next=14;break}i=e.jobs.findIndex((function(e){return e.id===t.id})),-1!==i&&e.$set(e.jobs,i,s),e.selectedJob&&e.selectedJob.id===s.id&&(e.selectedJob=s),n.next=16;break;case 14:return n.next=16,e.loadJobs();case 16:n.next=22;break;case 18:n.prev=18,n.t0=n["catch"](2),console.error("Error toggling job enabled status:",n.t0),e.$toast({component:u["default"],props:{title:"Error",icon:"XIcon",text:"Failed to update job status",variant:"danger"}});case 22:case"end":return n.stop()}}),n,null,[[2,18]])})))()},goToStatistics:function(){this.selectedJob&&this.$router.push({name:"erp-job-statistics",params:{jobId:this.selectedJob.id}})}}},C=w,J=(n("78b6"),Object(x["a"])(C,r,s,!1,null,"5b142b7e",null));e["default"]=J.exports},f183:function(t,e,n){var r=n("d012"),s=n("861d"),a=n("5135"),i=n("9bf2").f,o=n("90e3"),l=n("bb2f"),c=o("meta"),u=0,d=Object.isExtensible||function(){return!0},b=function(t){i(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,c)){if(!d(t))return"F";if(!e)return"E";b(t)}return t[c].objectID},f=function(t,e){if(!a(t,c)){if(!d(t))return!0;if(!e)return!1;b(t)}return t[c].weakData},h=function(t){return l&&v.REQUIRED&&d(t)&&!a(t,c)&&b(t),t},v=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:h};r[c]=!0}}]);
//# sourceMappingURL=chunk-5df1258f.5104731d.js.map