(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58c57485"],{1148:function(t,e,s){"use strict";var a=s("a691"),n=s("1d80");t.exports="".repeat||function(t){var e=String(n(this)),s="",i=a(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(s+=e);return s}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13d5":function(t,e,s){"use strict";var a=s("23e7"),n=s("d58f").left,i=s("a640"),r=s("ae40"),o=s("2d00"),l=s("605d"),c=i("reduce"),u=r("reduce",{1:0}),d=!l&&o>79&&o<83;a({target:"Array",proto:!0,forced:!c||!u||d},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"408a":function(t,e,s){var a=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"4c74":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"session-history-container"},[s("div",{staticClass:"page-header"},[s("h2",{staticClass:"mb-0"},[t._v("Session History")]),s("b-button",{attrs:{variant:"outline-primary"},on:{click:t.loadSessions}},[s("feather-icon",{attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),s("b-card",{staticClass:"mb-2"},[s("div",{attrs:{role:"button",tabindex:"0"},on:{click:t.toggleFilters,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggleFilters(e)}}},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("div",{staticClass:"d-flex align-items-center"},[s("feather-icon",{staticClass:"mr-2 text-primary",attrs:{icon:"FilterIcon",size:"18"}}),s("h6",{staticClass:"mb-0 text-primary font-weight-bold"},[t._v(" Filters "),s("span",{staticClass:"text-muted font-weight-normal ml-2"},[t._v("(Total: "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"session":"sessions")+")")])])],1),s("feather-icon",{staticClass:"text-primary",attrs:{icon:t.filtersExpanded?"ChevronUpIcon":"ChevronDownIcon",size:"20"}})],1)]),s("b-collapse",{attrs:{id:"filters-collapse"},model:{value:t.filtersExpanded,callback:function(e){t.filtersExpanded=e},expression:"filtersExpanded"}},[s("div",{staticClass:"pt-2"},[s("b-row",[s("b-col",{staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Search","label-for":"search-input"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-white"},[s("feather-icon",{attrs:{icon:"SearchIcon",size:"16"}})],1)],1),s("b-form-input",{attrs:{id:"search-input",placeholder:"Search by session number, cashier..."},on:{input:t.onFilterChange},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}}),s("b-input-group-append",[s("b-button",{attrs:{variant:"outline-secondary",disabled:!t.filters.search},on:{click:t.clearSearch}},[s("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),s("b-col",{staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"3",lg:"3"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Date From","label-for":"date-from"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-white"},[s("feather-icon",{attrs:{icon:"CalendarIcon",size:"16"}})],1)],1),s("b-form-input",{attrs:{id:"date-from",type:"date"},on:{input:t.onFilterChange},model:{value:t.filters.dateFrom,callback:function(e){t.$set(t.filters,"dateFrom",e)},expression:"filters.dateFrom"}})],1)],1)],1),s("b-col",{staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"3",lg:"3"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Date To","label-for":"date-to"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-white"},[s("feather-icon",{attrs:{icon:"CalendarIcon",size:"16"}})],1)],1),s("b-form-input",{attrs:{id:"date-to",type:"date"},on:{input:t.onFilterChange},model:{value:t.filters.dateTo,callback:function(e){t.$set(t.filters,"dateTo",e)},expression:"filters.dateTo"}})],1)],1)],1)],1),s("b-row",[s("b-col",{staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Status","label-for":"status-filter"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-white"},[s("feather-icon",{attrs:{icon:"TagIcon",size:"16"}})],1)],1),s("b-form-select",{attrs:{id:"status-filter",options:t.statusOptions},on:{input:t.onFilterChange},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1)],1)],1),s("b-col",{staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Sync Status","label-for":"sync-status-filter"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-white"},[s("feather-icon",{attrs:{icon:"CloudIcon",size:"16"}})],1)],1),s("b-form-select",{attrs:{id:"sync-status-filter",options:t.syncStatusOptions},on:{input:t.onFilterChange},model:{value:t.filters.syncStatus,callback:function(e){t.$set(t.filters,"syncStatus",e)},expression:"filters.syncStatus"}})],1)],1)],1)],1)],1)])],1),s("b-card",[s("b-table",{staticClass:"cursor-pointer",attrs:{items:t.paginatedSessions,fields:t.sessionFields,striped:"",hover:"",responsive:"",busy:t.loading,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"show-empty":""},on:{"row-clicked":t.viewSessionDetails},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center my-2"},[s("b-spinner",{staticClass:"align-middle"}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[s("div",{staticClass:"text-center text-muted py-4"},[s("p",[t._v("No sessions found")]),s("p",{staticClass:"small"},[t._v("Try adjusting your filters")])])]},proxy:!0},{key:"cell(sessionNumber)",fn:function(e){return[s("strong",{staticClass:"text-primary"},[t._v(t._s(e.item.sessionNumber))])]}},{key:"cell(cashierFullName)",fn:function(e){return[t._v(" "+t._s(e.item.cashierFullName||e.item.cashierUsername)+" ")]}},{key:"cell(status)",fn:function(e){return[s("b-badge",{attrs:{variant:t.getStatusBadgeVariant(e.item.status)}},[t._v(" "+t._s(e.item.status)+" ")])]}},{key:"cell(synchronizationStatus)",fn:function(e){return[s("div",{staticClass:"sync-status-cell"},[s("b-badge",{staticClass:"sync-badge",attrs:{variant:t.getSyncStatusVariant(e.item.synchronizationStatus)}},[s("feather-icon",{staticClass:"mr-1",attrs:{icon:t.getSyncStatusIcon(e.item.synchronizationStatus),size:"12"}}),t._v(" "+t._s(t.formatSyncStatus(e.item.synchronizationStatus))+" ")],1),e.item.erpNo?s("small",{staticClass:"text-muted d-block mt-1"},[t._v(" ERP: "+t._s(e.item.erpNo)+" ")]):t._e()],1)]}},{key:"cell(openedAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.openedAt))+" ")]}},{key:"cell(closedAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.closedAt)||"-")+" ")]}},{key:"cell(totalSalesAmount)",fn:function(e){return[s("strong",[t._v(t._s(t.formatPrice(e.item.totalSalesAmount||0))+" TND")])]}},{key:"cell(realCash)",fn:function(e){return[t._v(" "+t._s(t.formatPrice(e.item.realCash||0))+" TND ")]}},{key:"cell(posUserClosureCash)",fn:function(e){return[t._v(" "+t._s(t.formatPrice(e.item.posUserClosureCash||0))+" TND ")]}},{key:"cell(responsibleClosureCash)",fn:function(e){return[e.item.responsibleClosureCash?s("span",[t._v(" "+t._s(t.formatPrice(e.item.responsibleClosureCash))+" TND ")]):s("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(cashDifference)",fn:function(e){return[s("span",{class:t.getDifferenceClass(e.item.cashDifference)},[t._v(" "+t._s(t.formatPrice(e.item.cashDifference||0))+" TND ")])]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(s){return s.stopPropagation(),t.viewSessionDetails(e.item)}}},[t._v(" View Details ")])]}}])}),s("div",{staticClass:"mt-3"},[s("b-row",{attrs:{"align-v":"center"}},[s("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[s("div",{staticClass:"d-flex align-items-center"},[s("label",{staticClass:"mr-2 mb-0",attrs:{for:"per-page-select"}},[t._v("Items per page:")]),s("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"per-page-select",options:t.perPageOptions,size:"sm"},on:{change:t.onPerPageChange},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),s("b-col",{attrs:{cols:"12",md:"6"}},[s("div",{staticClass:"text-center text-md-right"},[s("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" sessions ")])])])],1),s("div",{staticClass:"d-flex justify-content-center mt-2"},[s("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),s("b-modal",{attrs:{title:"Session Details",size:"xl",scrollable:""},on:{hide:t.resetDetailsForm},model:{value:t.showDetailsModal,callback:function(e){t.showDetailsModal=e},expression:"showDetailsModal"}},[t.sessionDetails?s("div",{staticClass:"session-details"},[s("b-card",{staticClass:"mb-3"},[s("h5",{staticClass:"mb-3"},[t._v("Session Information")]),s("b-row",[s("b-col",{attrs:{cols:"12",md:"6"}},[s("div",{staticClass:"detail-item"},[s("strong",[t._v("Session Number:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.sessionDetails.session.sessionNumber))])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Cashier:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.sessionDetails.session.cashierName))])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Opened At:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatDateTime(t.sessionDetails.session.openedAt)))])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Closed At:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatDateTime(t.sessionDetails.session.closedAt)||"-"))])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Status:")]),s("b-badge",{staticClass:"ml-2",attrs:{variant:t.getStatusBadgeVariant(t.sessionDetails.session.status)}},[t._v(" "+t._s(t.sessionDetails.session.status)+" ")])],1)]),s("b-col",{attrs:{cols:"12",md:"6"}},[s("div",{staticClass:"detail-item"},[s("strong",[t._v("Opening Cash:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatPrice(t.sessionDetails.session.openingCash))+" TND")])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Real Cash:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatPrice(t.sessionDetails.session.realCash))+" TND")])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("POS User Closure Cash:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatPrice(t.sessionDetails.session.posUserClosureCash))+" TND")])]),t.sessionDetails.session.responsibleClosureCash?s("div",{staticClass:"detail-item"},[s("strong",[t._v("Responsible Closure Cash:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatPrice(t.sessionDetails.session.responsibleClosureCash))+" TND")])]):t._e(),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Sales Count:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.sessionDetails.salesCount))])]),s("div",{staticClass:"detail-item"},[s("strong",[t._v("Total Sales:")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.formatPrice(t.sessionDetails.totalSalesAmount))+" TND")])])])],1)],1),s("b-card",{staticClass:"mb-3 sync-info-card"},[s("div",{staticClass:"d-flex align-items-center mb-3"},[s("feather-icon",{staticClass:"mr-2 text-primary",attrs:{icon:"CloudIcon",size:"20"}}),s("h5",{staticClass:"mb-0"},[t._v("ERP Synchronization")])],1),s("b-row",[s("b-col",{attrs:{md:"6"}},[s("div",{staticClass:"sync-detail-item"},[s("label",{staticClass:"sync-label"},[t._v("Synchronization Status")]),s("div",{staticClass:"sync-value"},[s("b-badge",{staticClass:"sync-badge-large",attrs:{variant:t.getSyncStatusVariant(t.sessionDetails.session.synchronizationStatus)}},[s("feather-icon",{staticClass:"mr-1",attrs:{icon:t.getSyncStatusIcon(t.sessionDetails.session.synchronizationStatus),size:"14"}}),t._v(" "+t._s(t.formatSyncStatus(t.sessionDetails.session.synchronizationStatus))+" ")],1)],1)])]),s("b-col",{attrs:{md:"6"}},[s("div",{staticClass:"sync-detail-item"},[s("label",{staticClass:"sync-label"},[t._v("ERP Document Number")]),s("div",{staticClass:"sync-value"},[t.sessionDetails.session.erpNo?s("code",{staticClass:"erp-number"},[t._v(t._s(t.sessionDetails.session.erpNo))]):s("span",{staticClass:"text-muted"},[t._v("Not synchronized")])])])])],1)],1),t.sessionDetails.paymentHeaders&&t.sessionDetails.paymentHeaders.length>0?s("b-card",{staticClass:"mb-3"},[s("h5",{staticClass:"mb-3"},[t._v("Payment Headers & Lines")]),t._l(t.sessionDetails.paymentHeaders,(function(e){return s("div",{key:e.id,staticClass:"payment-header-section mb-4"},[s("b-card",{staticClass:"bg-light"},[s("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[s("div",[s("strong",[t._v("Payment Class:")]),t._v(" "+t._s(e.paymentClass)+" "),s("span",{staticClass:"ml-2"},[s("b-badge",{staticClass:"sync-badge",attrs:{variant:t.getSyncStatusVariant(e.synchronizationStatus)}},[s("feather-icon",{staticClass:"mr-1",attrs:{icon:t.getSyncStatusIcon(e.synchronizationStatus),size:"12"}}),t._v(" "+t._s(t.formatSyncStatus(e.synchronizationStatus))+" ")],1)],1)]),s("div",[s("small",{staticClass:"text-muted"},[t._v("Post Date: "+t._s(t.formatDate(e.postDate)))]),e.erpNo?s("span",{staticClass:"ml-2"},[s("small",{staticClass:"text-muted"},[t._v("ERP: "),s("code",[t._v(t._s(e.erpNo))])])]):t._e()])]),s("b-table",{staticClass:"payment-lines-table",attrs:{items:t.getPaymentLinesForHeader(e.id),fields:t.paymentLineFields,small:"",striped:"",responsive:""},scopedSlots:t._u([{key:"cell(custNo)",fn:function(e){return[t._v(" "+t._s(e.item.custNo)+" ")]}},{key:"cell(amount)",fn:function(e){return[s("strong",[t._v(t._s(t.formatPrice(e.item.amount))+" TND")])]}},{key:"cell(ticketNo)",fn:function(e){return[t._v(" "+t._s(e.item.ticketNo)+" ")]}},{key:"cell(synched)",fn:function(e){return[s("b-badge",{staticClass:"sync-indicator",attrs:{variant:e.item.synched?"success":"secondary"}},[s("feather-icon",{staticClass:"mr-1",attrs:{icon:e.item.synched?"CheckIcon":"XIcon",size:"12"}}),t._v(" "+t._s(e.item.synched?"Synced":"Not Synced")+" ")],1)]}}],null,!0)})],1)],1)}))],2):t._e(),t.posUserCashCounts.length>0?s("b-card",{staticClass:"mb-3"},[s("h5",[t._v("Cash Count - POS User")]),s("b-table",{attrs:{items:t.posUserCashCounts,fields:t.cashCountFields,small:"",striped:""},scopedSlots:t._u([{key:"cell(paymentMethod)",fn:function(e){return[t._v(" "+t._s(e.item.paymentMethod?e.item.paymentMethod.name:"Cash")+" ")]}},{key:"cell(lineTotal)",fn:function(e){return[t._v(" "+t._s(t.formatPrice(e.item.lineTotal))+" TND ")]}},{key:"cell(counterType)",fn:function(e){return[s("b-badge",{attrs:{variant:"info"}},[t._v(t._s(e.item.counterType))])]}}],null,!1,3477647032)}),s("div",{staticClass:"mt-2"},[s("strong",[t._v("Total: "+t._s(t.formatPrice(t.posUserCashCountsTotal))+" TND")])])],1):t._e(),t.responsibleCashCounts.length>0?s("b-card",{staticClass:"mb-3"},[s("h5",[t._v("Cash Count - Responsible")]),s("b-table",{attrs:{items:t.responsibleCashCounts,fields:t.cashCountFields,small:"",striped:""},scopedSlots:t._u([{key:"cell(paymentMethod)",fn:function(e){return[t._v(" "+t._s(e.item.paymentMethod?e.item.paymentMethod.name:"Cash")+" ")]}},{key:"cell(lineTotal)",fn:function(e){return[t._v(" "+t._s(t.formatPrice(e.item.lineTotal))+" TND ")]}},{key:"cell(counterType)",fn:function(e){return[s("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(e.item.counterType))])]}}],null,!1,2673458748)}),s("div",{staticClass:"mt-2"},[s("strong",[t._v("Total: "+t._s(t.formatPrice(t.responsibleCashCountsTotal))+" TND")])])],1):t._e()],1):t._e()])],1)},n=[],i=s("2909"),r=s("c7eb"),o=s("1da1"),l=(s("4de4"),s("caad"),s("a15b9"),s("d81d"),s("13d5"),s("fb6a"),s("b680"),s("d3b7"),s("ac1f"),s("2532"),s("841c"),s("c1df")),c=s.n(l),u=s("223c"),d={name:"SessionHistory",data:function(){return{sessions:[],allSessions:[],filteredSessions:[],loading:!1,showDetailsModal:!1,sessionDetails:null,sortBy:"openedAt",sortDesc:!0,filtersExpanded:!1,currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],filters:{search:"",dateFrom:"",dateTo:"",status:"TERMINATED",syncStatus:"all"},statusOptions:[{value:"all",text:"All Status"},{value:"TERMINATED",text:"Terminated"},{value:"CLOSED",text:"Closed"},{value:"OPENED",text:"Opened"}],syncStatusOptions:[{value:"all",text:"All"},{value:"NOT_SYNCHED",text:"Not Synced"},{value:"PARTIALLY_SYNCHED",text:"Partially Synced"},{value:"TOTALLY_SYNCHED",text:"Totally Synced"}],sessionFields:[{key:"sessionNumber",label:"Session #",sortable:!0},{key:"cashierFullName",label:"Cashier",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"synchronizationStatus",label:"Sync Status",sortable:!0},{key:"openedAt",label:"Opened At",sortable:!0},{key:"closedAt",label:"Closed At",sortable:!0},{key:"salesCount",label:"Sales",sortable:!0},{key:"totalSalesAmount",label:"Total Sales",sortable:!0},{key:"realCash",label:"Real Cash",sortable:!0},{key:"posUserClosureCash",label:"POS Closure",sortable:!0},{key:"responsibleClosureCash",label:"Resp Closure",sortable:!0},{key:"cashDifference",label:"Difference",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],cashCountFields:[{key:"denominationValue",label:"Value"},{key:"quantity",label:"Qty"},{key:"paymentMethod",label:"Payment Method"},{key:"referenceNumber",label:"Reference"},{key:"lineTotal",label:"Total"},{key:"counterType",label:"Counter"}],paymentLineFields:[{key:"custNo",label:"Customer"},{key:"amount",label:"Amount"},{key:"ticketNo",label:"Ticket #"},{key:"fenceNo",label:"Fence #"},{key:"titleNumber",label:"Title #"},{key:"synched",label:"Synced",class:"text-center"}]}},computed:{totalRows:function(){return this.filteredSessions.length},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)},paginatedSessions:function(){var t=(this.currentPage-1)*this.perPage,e=t+this.perPage;return this.filteredSessions.slice(t,e)},posUserCashCounts:function(){return this.sessionDetails&&this.sessionDetails.cashCountLines?this.sessionDetails.cashCountLines.filter((function(t){return"POS_USER"===t.counterType})):[]},responsibleCashCounts:function(){return this.sessionDetails&&this.sessionDetails.cashCountLines?this.sessionDetails.cashCountLines.filter((function(t){return"RESPONSIBLE"===t.counterType})):[]},posUserCashCountsTotal:function(){return this.posUserCashCounts.reduce((function(t,e){return t+(e.lineTotal||0)}),0)},responsibleCashCountsTotal:function(){return this.responsibleCashCounts.reduce((function(t,e){return t+(e.lineTotal||0)}),0)}},watch:{currentPage:function(){},perPage:function(){this.currentPage>Math.ceil(this.totalRows/this.perPage)&&(this.currentPage=Math.max(1,Math.ceil(this.totalRows/this.perPage)))}},mounted:function(){this.loadSessions()},methods:{loadSessions:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.get("/cashier-session/dashboard");case 4:s=e.sent,t.allSessions=s.data||[],t.applyFilters(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error("Error loading sessions:",e.t0),t.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load sessions",variant:"danger"}});case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},applyFilters:function(){var t=this,e=Object(i["a"])(this.allSessions);if(this.filters.status&&"all"!==this.filters.status&&(e=e.filter((function(e){return e.status===t.filters.status}))),this.filters.syncStatus&&"all"!==this.filters.syncStatus&&(e=e.filter((function(e){return e.synchronizationStatus===t.filters.syncStatus}))),this.filters.search){var s=this.filters.search.toLowerCase();e=e.filter((function(t){var e=(t.sessionNumber||"").toLowerCase(),a=(t.cashierFullName||t.cashierUsername||"").toLowerCase();return e.includes(s)||a.includes(s)}))}if(this.filters.dateFrom){var a=c()(this.filters.dateFrom).startOf("day");e=e.filter((function(t){var e=c()(t.openedAt);return e.isSameOrAfter(a)}))}if(this.filters.dateTo){var n=c()(this.filters.dateTo).endOf("day");e=e.filter((function(t){var e=c()(t.openedAt);return e.isSameOrBefore(n)}))}this.filteredSessions=e,this.currentPage>Math.ceil(this.filteredSessions.length/this.perPage)&&(this.currentPage=Math.max(1,Math.ceil(this.filteredSessions.length/this.perPage)))},onFilterChange:function(){this.currentPage=1,this.applyFilters()},toggleFilters:function(){this.filtersExpanded=!this.filtersExpanded},clearSearch:function(){this.filters.search="",this.onFilterChange()},resetFilters:function(){this.filters={search:"",dateFrom:"",dateTo:"",status:"TERMINATED",syncStatus:"all"},this.onFilterChange()},onPerPageChange:function(){this.currentPage=1},viewSessionDetails:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function s(){var a;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,e.$http.get("/cashier-session/".concat(t.id,"/details"));case 3:a=s.sent,e.sessionDetails=a.data,e.showDetailsModal=!0,s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](0),console.error("Error loading session details:",s.t0),e.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load session details",variant:"danger"}});case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},getPaymentLinesForHeader:function(t){return this.sessionDetails&&this.sessionDetails.paymentLines?this.sessionDetails.paymentLines.filter((function(e){return e.paymentHeader&&e.paymentHeader.id===t})):[]},resetDetailsForm:function(){this.sessionDetails=null},formatPrice:function(t){return t||0===t?parseFloat(t).toFixed(2):"0.00"},formatDateTime:function(t){return t?c()(t).format("YYYY-MM-DD HH:mm:ss"):null},formatDate:function(t){return t?c()(t).format("YYYY-MM-DD"):null},formatSyncStatus:function(t){return t?t.split("_").map((function(t){return t.charAt(0)+t.slice(1).toLowerCase()})).join(" "):"Not Synced"},getSyncStatusVariant:function(t){if(!t)return"secondary";switch(t){case"TOTALLY_SYNCHED":return"success";case"PARTIALLY_SYNCHED":return"warning";case"NOT_SYNCHED":return"secondary";default:return"secondary"}},getSyncStatusIcon:function(t){if(!t)return"XIcon";switch(t){case"TOTALLY_SYNCHED":return"CheckCircleIcon";case"PARTIALLY_SYNCHED":return"AlertCircleIcon";case"NOT_SYNCHED":return"XCircleIcon";default:return"XCircleIcon"}},getStatusBadgeVariant:function(t){switch(t){case"OPENED":return"success";case"CLOSED":return"warning";case"TERMINATED":return"secondary";default:return"secondary"}},getDifferenceClass:function(t){return t||0===t?t>=0?"text-success":"text-danger":""}}},f=d,m=(s("c720"),s("2877")),p=Object(m["a"])(f,a,n,!1,null,"0feed868",null);e["default"]=p.exports},"841c":function(t,e,s){"use strict";var a=s("d784"),n=s("825a"),i=s("1d80"),r=s("129f"),o=s("14c3");a("search",1,(function(t,e,s){return[function(e){var s=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,s):new RegExp(e)[t](String(s))},function(t){var a=s(e,t,this);if(a.done)return a.value;var i=n(t),l=String(this),c=i.lastIndex;r(c,0)||(i.lastIndex=0);var u=o(i,l);return r(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},"92bc":function(t,e,s){},b680:function(t,e,s){"use strict";var a=s("23e7"),n=s("a691"),i=s("408a"),r=s("1148"),o=s("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,s){return 0===e?s:e%2===1?u(t,e-1,s*t):u(t*t,e/2,s)},d=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,s,a,o,l=i(this),f=n(t),m=[0,0,0,0,0,0],p="",h="0",b=function(t,e){var s=-1,a=e;while(++s<6)a+=t*m[s],m[s]=a%1e7,a=c(a/1e7)},C=function(t){var e=6,s=0;while(--e>=0)s+=m[e],m[e]=c(s/t),s=s%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==m[t]){var s=String(m[t]);e=""===e?s:e+r.call("0",7-s.length)+s}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(e=d(l*u(2,69,1))-69,s=e<0?l*u(2,-e,1):l/u(2,e,1),s*=4503599627370496,e=52-e,e>0){b(0,s),a=f;while(a>=7)b(1e7,0),a-=7;b(u(10,a,1),0),a=e-1;while(a>=23)C(1<<23),a-=23;C(1<<a),b(1,1),C(2),h=y()}else b(0,s),b(1<<-e,0),h=y()+r.call("0",f);return f>0?(o=h.length,h=p+(o<=f?"0."+r.call("0",f-o)+h:h.slice(0,o-f)+"."+h.slice(o-f))):h=p+h,h}})},c720:function(t,e,s){"use strict";s("92bc")},d58f:function(t,e,s){var a=s("1c0b"),n=s("7b0b"),i=s("44ad"),r=s("50c4"),o=function(t){return function(e,s,o,l){a(s);var c=n(e),u=i(c),d=r(c.length),f=t?d-1:0,m=t?-1:1;if(o<2)while(1){if(f in u){l=u[f],f+=m;break}if(f+=m,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=m)f in u&&(l=s(l,u[f],f,c));return l}};t.exports={left:o(!1),right:o(!0)}}}]);
//# sourceMappingURL=chunk-58c57485.2d9b33c2.js.map