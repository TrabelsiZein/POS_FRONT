(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9baffa62"],{1148:function(t,e,a){"use strict";var i=a("a691"),s=a("1d80");t.exports="".repeat||function(t){var e=String(s(this)),a="",r=i(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1541:function(t,e,a){},"216b":function(t,e,a){},"223c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[t.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},s=[],r=a("e8a3"),l={components:{BAvatar:r["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},n=l,c=(a("2edd"),a("2877")),o=Object(c["a"])(n,i,s,!1,null,"55dd3057",null);e["default"]=o.exports},2513:function(t,e,a){"use strict";a("1541")},"2edd":function(t,e,a){"use strict";a("216b")},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"841c":function(t,e,a){"use strict";var i=a("d784"),s=a("825a"),r=a("1d80"),l=a("129f"),n=a("14c3");i("search",1,(function(t,e,a){return[function(e){var a=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var r=s(t),c=String(this),o=r.lastIndex;l(o,0)||(r.lastIndex=0);var m=n(r,c);return l(r.lastIndex,o)||(r.lastIndex=o),null===m?-1:m.index}]}))},"8c72":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-barcodes-container"},[a("div",{staticClass:"page-header"},[a("h2",{staticClass:"mb-0"},[t._v("Items/ Barcodes")]),a("b-button",{attrs:{variant:"outline-primary"},on:{click:t.loadData}},[a("feather-icon",{attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),a("b-card",{staticClass:"mb-2 filter-card"},[a("div",{attrs:{role:"button",tabindex:"0"},on:{click:t.toggleFilters,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggleFilters(e)}}},[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex align-items-center"},[a("feather-icon",{staticClass:"mr-2 text-primary",attrs:{icon:"FilterIcon",size:"18"}}),a("h6",{staticClass:"mb-0 text-primary font-weight-bold d-flex align-items-center"},[t._v(" Filters "),a("span",{staticClass:"filters-count text-muted ml-1"},[t._v("("+t._s(t.displayTotal)+" items)")])])],1),a("feather-icon",{staticClass:"text-primary",attrs:{icon:t.filtersExpanded?"ChevronUpIcon":"ChevronDownIcon",size:"20"}})],1)]),a("b-collapse",{attrs:{id:"filters-collapse"},model:{value:t.filtersExpanded,callback:function(e){t.filtersExpanded=e},expression:"filtersExpanded"}},[a("div",{staticClass:"pt-2"},[a("b-row",[a("b-col",{attrs:{cols:"12",lg:"6"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Search","label-for":"search-input"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"search-input",placeholder:"Search by item code, name, or barcode..."},on:{input:t.scheduleSearch},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[a("feather-icon",{attrs:{icon:"XIcon"}})],1)],1)],1)],1)],1),a("b-col",{attrs:{cols:"12",lg:"3"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Family","label-for":"family-filter"}},[a("b-form-select",{attrs:{id:"family-filter",options:t.familyOptions},on:{input:t.onFamilyChange},model:{value:t.familyId,callback:function(e){t.familyId=e},expression:"familyId"}})],1)],1),a("b-col",{attrs:{cols:"12",lg:"3"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Subfamily","label-for":"subfamily-filter"}},[a("b-form-select",{attrs:{id:"subfamily-filter",options:t.subFamilyOptions,disabled:"all"===t.familyId},on:{input:t.onSubFamilyChange},model:{value:t.subFamilyId,callback:function(e){t.subFamilyId=e},expression:"subFamilyId"}})],1)],1),a("b-col",{attrs:{cols:"6",lg:"2"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Price min","label-for":"price-min"}},[a("b-form-input",{attrs:{id:"price-min",type:"number",min:"0",step:"0.01",placeholder:"Min"},model:{value:t.priceMin,callback:function(e){t.priceMin=t._n(e)},expression:"priceMin"}})],1)],1),a("b-col",{attrs:{cols:"6",lg:"2"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Price max","label-for":"price-max"}},[a("b-form-input",{attrs:{id:"price-max",type:"number",min:"0",step:"0.01",placeholder:"Max"},model:{value:t.priceMax,callback:function(e){t.priceMax=t._n(e)},expression:"priceMax"}})],1)],1)],1),a("b-row",{staticClass:"mt-1"},[a("b-col",{staticClass:"d-flex align-items-end justify-content-lg-end",attrs:{cols:"12"}},[a("div",{staticClass:"filter-chips"},[t.searchTerm?a("b-badge",{staticClass:"mr-50",attrs:{variant:"light-primary"}},[t._v(' Search: "'+t._s(t.searchTerm)+'" ')]):t._e(),"all"!==t.familyId?a("b-badge",{staticClass:"mr-50",attrs:{variant:"light-info"}},[t._v(" Family: "+t._s(t.selectedFamilyName)+" ")]):t._e(),"all"!==t.subFamilyId?a("b-badge",{staticClass:"mr-50",attrs:{variant:"light-warning"}},[t._v(" Subfamily: "+t._s(t.selectedSubFamilyName)+" ")]):t._e(),null!==t.priceMin?a("b-badge",{staticClass:"mr-50",attrs:{variant:"light-success"}},[t._v(" Min: "+t._s(t.formatPrice(t.priceMin))+" ")]):t._e(),null!==t.priceMax?a("b-badge",{staticClass:"mr-50",attrs:{variant:"light-success"}},[t._v(" Max: "+t._s(t.formatPrice(t.priceMax))+" ")]):t._e()],1)])],1)],1)])],1),t.loading?a("b-card",{staticClass:"text-center py-5"},[a("div",{staticClass:"text-center my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",{staticClass:"d-block mt-2"},[t._v("Loading...")])],1)]):t.items.length>0?a("div",[a("b-card",{staticClass:"table-card mb-0"},[a("b-table",{attrs:{items:t.tableItems,fields:t.itemFields,hover:"",responsive:"","show-empty":"",small:""},scopedSlots:t._u([{key:"cell(unitPrice)",fn:function(e){return[t._v(" "+t._s(t.formatPrice(e.item.unitPrice))+" ")]}},{key:"cell(familyName)",fn:function(e){return[e.item.familyName?a("span",[t._v(t._s(e.item.familyName))]):a("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(subFamilyName)",fn:function(e){return[e.item.subFamilyName?a("span",[t._v(t._s(e.item.subFamilyName))]):a("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("span",{staticClass:"mr-2"},[t._v(t._s(e.item.barcodeCount))]),a("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.toggleDetails}},[a("feather-icon",{staticClass:"mr-50",attrs:{icon:e.detailsShowing?"ChevronUpIcon":"ChevronDownIcon",size:"16"}}),t._v(" Details ")],1)],1)]}},{key:"row-details",fn:function(e){return[a("b-card",{staticClass:"mb-2"},[a("h6",{staticClass:"mb-2 d-flex align-items-center"},[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"HashIcon",size:"18"}}),t._v(" Barcodes ("+t._s(e.item.barcodes.length)+") ")],1),e.item.barcodes.length>0?a("b-table",{attrs:{items:e.item.barcodes,fields:t.barcodeFields,small:"",responsive:"",striped:"",hover:""},scopedSlots:t._u([{key:"cell(isPrimary)",fn:function(e){return[e.item.isPrimary?a("b-badge",{attrs:{variant:"success"}},[t._v("Primary")]):a("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(description)",fn:function(e){return[t._v(" "+t._s(e.item.description||"-")+" ")]}}],null,!0)}):a("div",{staticClass:"text-muted"},[t._v("No barcodes assigned for this item.")])],1)]}}])}),a("div",{staticClass:"mt-3"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"items-per-page"}},[t._v("Items per page:")]),a("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"items-per-page",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-center text-md-right"},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalElements)+" items ")])])])],1),a("div",{staticClass:"d-flex justify-content-center mt-2"},[a("b-pagination",{attrs:{"per-page":t.perPage,"total-rows":t.totalElements,align:"center"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1):a("b-card",{staticClass:"text-center py-5"},[a("feather-icon",{staticClass:"text-muted mb-3",attrs:{icon:"InboxIcon",size:"48"}}),a("h5",{staticClass:"text-muted"},[t._v("No Items Found")]),a("p",{staticClass:"text-muted mb-0"},[t._v("No items match your search criteria.")])],1)],1)},s=[],r=a("c7eb"),l=a("1da1"),n=a("2909"),c=(a("99af"),a("4de4"),a("7db0"),a("caad"),a("d81d"),a("b0c0"),a("b680"),a("d3b7"),a("ac1f"),a("2532"),a("841c"),a("498a"),a("223c")),o={name:"ItemBarcodes",data:function(){return{items:[],loading:!1,searchTerm:"",filtersExpanded:!1,familyId:"all",subFamilyId:"all",priceMin:null,priceMax:null,page:1,perPage:20,totalElements:0,totalPages:0,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],debounceTimer:null,barcodeFields:[{key:"barcode",label:"Barcode",sortable:!0},{key:"isPrimary",label:"Primary",sortable:!0},{key:"description",label:"Description",sortable:!0}],itemFields:[{key:"itemCode",label:"Code",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"familyName",label:"Family",sortable:!0},{key:"subFamilyName",label:"Subfamily",sortable:!0},{key:"unitPrice",label:"Price",sortable:!0},{key:"actions",label:"Barcodes",sortable:!1,class:"text-right"}],families:[],subFamilies:[]}},computed:{startIndex:function(){return 0===this.totalElements?0:(this.page-1)*this.perPage+1},endIndex:function(){return 0===this.totalElements?0:Math.min(this.page*this.perPage,this.totalElements)},tableItems:function(){var t=this,e=(this.searchTerm||"").toLowerCase().trim(),a="all"!==this.familyId,i="all"!==this.subFamilyId,s=this.items.filter((function(s){var r=s.item,l=s.barcodes,n=!a||r.itemFamily&&r.itemFamily.id===t.familyId,c=!i||r.itemSubFamily&&r.itemSubFamily.id===t.subFamilyId;if(!n||!c)return!1;if(!e)return!0;var o=r.itemCode&&r.itemCode.toLowerCase().includes(e)||r.name&&r.name.toLowerCase().includes(e)||r.itemFamily&&r.itemFamily.name&&r.itemFamily.name.toLowerCase().includes(e)||r.itemSubFamily&&r.itemSubFamily.name&&r.itemSubFamily.name.toLowerCase().includes(e),m=Array.isArray(l)&&l.length>0,u=m&&l.some((function(t){return t.barcode&&t.barcode.toLowerCase().includes(e)}));return o||u}));return s.map((function(t){var e=t.item,a=t.barcodes;return{id:e.id,itemCode:e.itemCode,name:e.name,familyName:e.itemFamily?e.itemFamily.name:null,subFamilyName:e.itemSubFamily?e.itemSubFamily.name:null,unitPrice:e.unitPrice,barcodeCount:a.length,barcodes:a}}))},familyOptions:function(){return[{value:"all",text:"All families"}].concat(Object(n["a"])(this.families.map((function(t){return{value:t.id,text:t.name}}))))},subFamilyOptions:function(){var t=this,e=this.subFamilies.filter((function(e){return"all"===t.familyId||e.itemFamily&&e.itemFamily.id===t.familyId}));return[{value:"all",text:"all"===this.familyId?"Select a family first":"All subfamilies"}].concat(Object(n["a"])(e.map((function(t){return{value:t.id,text:t.name}}))))},selectedFamilyName:function(){var t=this;if("all"===this.familyId)return"";var e=this.families.find((function(e){return e.id===t.familyId}));return e?e.name:""},selectedSubFamilyName:function(){var t=this;if("all"===this.subFamilyId)return"";var e=this.subFamilies.find((function(e){return e.id===t.subFamilyId}));return e?e.name:""},displayTotal:function(){var t;return null!==(t=this.totalElements)&&void 0!==t?t:this.tableItems.length}},watch:{page:function(t,e){t!==e&&this.loadData()},perPage:function(t,e){t!==e&&(1===this.page?this.loadData():this.page=1)},priceMin:function(){this.page=1,this.scheduleSearch()},priceMax:function(){this.page=1,this.scheduleSearch()}},mounted:function(){this.loadFamilies(),this.loadSubFamilies(),this.loadData()},beforeDestroy:function(){this.debounceTimer&&clearTimeout(this.debounceTimer)},methods:{loadFamilies:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/item-family");case 3:a=e.sent,t.families=Array.isArray(a.data)?a.data:[],e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error loading families",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadSubFamilies:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/item-sub-family");case 3:a=e.sent,t.subFamilies=Array.isArray(a.data)?a.data:[],e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error loading subfamilies",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadData:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var a,i,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,a={page:Math.max(t.page-1,0),size:t.perPage},t.searchTerm&&(a.search=t.searchTerm),"all"!==t.familyId&&(a.familyId=t.familyId),"all"!==t.subFamilyId&&(a.subFamilyId=t.subFamilyId),null==t.priceMin||""===t.priceMin||isNaN(t.priceMin)||(a.priceMin=parseFloat(t.priceMin)),null==t.priceMax||""===t.priceMax||isNaN(t.priceMax)||(a.priceMax=parseFloat(t.priceMax)),e.next=10,t.$http.get("/item-barcode/items-with-barcodes",{params:a});case 10:i=e.sent,s=i.data||{},t.items=Array.isArray(s.content)?s.content:[],t.totalElements=s.totalElements||0,t.totalPages=s.totalPages||0,t.totalPages>0&&t.page>t.totalPages?t.page=t.totalPages:0===t.totalPages&&(t.page=1),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error("Error loading items with barcodes:",e.t0),t.$toast({component:c["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load items and barcodes",variant:"danger"}});case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,18,22,25]])})))()},scheduleSearch:function(){var t=this;this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){t.page=1,t.loadData()}),400)},toggleFilters:function(){this.filtersExpanded=!this.filtersExpanded},clearSearch:function(){this.searchTerm&&(this.searchTerm="",this.scheduleSearch())},onFamilyChange:function(){this.subFamilyId="all",this.page=1,this.loadData()},onSubFamilyChange:function(){this.page=1,this.loadData()},resetFilters:function(){this.searchTerm="",this.familyId="all",this.subFamilyId="all",this.priceMin=null,this.priceMax=null,this.page=1,this.loadData()},formatPrice:function(t){return t||0===t?parseFloat(t).toFixed(2):"0.00"}}},m=o,u=(a("2513"),a("2877")),d=Object(u["a"])(m,i,s,!1,null,"4ecf28a0",null);e["default"]=d.exports},b680:function(t,e,a){"use strict";var i=a("23e7"),s=a("a691"),r=a("408a"),l=a("1148"),n=a("d039"),c=1..toFixed,o=Math.floor,m=function(t,e,a){return 0===e?a:e%2===1?m(t,e-1,a*t):m(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){c.call({})}));i({target:"Number",proto:!0,forced:d},{toFixed:function(t){var e,a,i,n,c=r(this),d=s(t),f=[0,0,0,0,0,0],b="",p="0",h=function(t,e){var a=-1,i=e;while(++a<6)i+=t*f[a],f[a]=i%1e7,i=o(i/1e7)},y=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=o(a/t),a=a%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+l.call("0",7-a.length)+a}return e};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(b="-",c=-c),c>1e-21)if(e=u(c*m(2,69,1))-69,a=e<0?c*m(2,-e,1):c/m(2,e,1),a*=4503599627370496,e=52-e,e>0){h(0,a),i=d;while(i>=7)h(1e7,0),i-=7;h(m(10,i,1),0),i=e-1;while(i>=23)y(1<<23),i-=23;y(1<<i),h(1,1),y(2),p=g()}else h(0,a),h(1<<-e,0),p=g()+l.call("0",d);return d>0?(n=p.length,p=b+(n<=d?"0."+l.call("0",d-n)+p:p.slice(0,n-d)+"."+p.slice(n-d))):p=b+p,p}})}}]);
//# sourceMappingURL=chunk-9baffa62.927b9842.js.map