(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4d49a6"],{"216b":function(t,e,a){},"223c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[t.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},s=[],l=a("e8a3"),o={components:{BAvatar:l["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},r=o,n=(a("2edd"),a("2877")),c=Object(n["a"])(r,i,s,!1,null,"55dd3057",null);e["default"]=c.exports},"2edd":function(t,e,a){"use strict";a("216b")},"6887f":function(t,e,a){},d1e76:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-families-page"},[a("div",{staticClass:"page-header"},[a("h2",{staticClass:"mb-0"},[t._v("Item Families")]),a("b-button",{attrs:{variant:"outline-primary",disabled:t.loading},on:{click:t.loadFamilies}},[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),a("b-card",{staticClass:"mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Search","label-for":"family-search"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"family-search",placeholder:"Search by code, name, or description..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[a("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),a("b-col",{staticClass:"d-flex align-items-end justify-content-md-end",attrs:{cols:"12",md:"6"}},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"family":"families")+" ")])])],1)],1),a("b-card",[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[a("h4",{staticClass:"mb-0"},[t._v("Families")]),a("b-button",{attrs:{variant:"primary",size:"sm",disabled:t.actionsDisabled},on:{click:function(e){return t.openFamilyModal()}}},[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"PlusIcon",size:"14"}}),t._v(" Add Family ")],1)],1),a("b-table",{attrs:{items:t.paginatedFamilies,fields:t.familyFields,striped:"",hover:"",responsive:"",busy:t.loading,"show-empty":"",small:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-muted my-2"},[a("b-spinner",{staticClass:"align-middle mr-2"}),a("strong",[t._v("Loading familiesâ€¦")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center py-4"},[a("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"LayersIcon",size:"48"}}),a("p",{staticClass:"text-muted mb-0"},[t._v("No families found.")])],1)]},proxy:!0},{key:"cell(name)",fn:function(e){return[a("div",{staticClass:"font-weight-bold"},[t._v(t._s(e.item.name))]),e.item.description?a("div",{staticClass:"small text-muted"},[t._v(t._s(e.item.description))]):t._e()]}},{key:"cell(active)",fn:function(e){return[a("b-badge",{attrs:{variant:!1!==e.item.active?"success":"secondary"}},[t._v(" "+t._s(!1!==e.item.active?"Active":"Inactive")+" ")])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"text-right"},[a("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-primary",disabled:t.actionsDisabled},on:{click:function(a){return t.openFamilyModal(e.item)}}},[a("feather-icon",{attrs:{icon:"Edit2Icon",size:"14"}})],1),a("b-button",{attrs:{size:"sm",variant:"outline-danger",disabled:t.actionsDisabled},on:{click:function(a){return t.confirmDeleteFamily(e.item)}}},[a("feather-icon",{attrs:{icon:"Trash2Icon",size:"14"}})],1)],1)]}}])}),a("div",{staticClass:"mt-3"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"families-per-page"}},[t._v("Items per page:")]),a("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"families-per-page",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-center text-md-right"},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" families ")])])])],1),a("div",{staticClass:"d-flex justify-content-center mt-2"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{id:"family-modal",title:t.editingFamily?"Edit Family":"Add Family","ok-disabled":!t.canSaveFamily},on:{ok:t.saveFamily,hidden:t.resetFamilyForm},model:{value:t.showFamilyModal,callback:function(e){t.showFamilyModal=e},expression:"showFamilyModal"}},[a("b-form",[a("b-form-group",{attrs:{label:"Code *","label-for":"family-code"}},[a("b-form-input",{attrs:{id:"family-code",placeholder:"Unique code"},model:{value:t.familyForm.code,callback:function(e){t.$set(t.familyForm,"code","string"===typeof e?e.trim():e)},expression:"familyForm.code"}})],1),a("b-form-group",{attrs:{label:"Name *","label-for":"family-name"}},[a("b-form-input",{attrs:{id:"family-name",placeholder:"Family name"},model:{value:t.familyForm.name,callback:function(e){t.$set(t.familyForm,"name","string"===typeof e?e.trim():e)},expression:"familyForm.name"}})],1),a("b-form-group",{attrs:{label:"Description","label-for":"family-description"}},[a("b-form-textarea",{attrs:{id:"family-description",rows:"3",placeholder:"Optional description"},model:{value:t.familyForm.description,callback:function(e){t.$set(t.familyForm,"description","string"===typeof e?e.trim():e)},expression:"familyForm.description"}})],1),a("b-form-group",{attrs:{label:"Display Order","label-for":"family-order"}},[a("b-form-input",{attrs:{id:"family-order",type:"number",min:"0"},model:{value:t.familyForm.displayOrder,callback:function(e){t.$set(t.familyForm,"displayOrder",t._n(e))},expression:"familyForm.displayOrder"}})],1),a("b-form-group",[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.familyForm.active,callback:function(e){t.$set(t.familyForm,"active",e)},expression:"familyForm.active"}},[t._v(" Active ")])],1)],1)],1),a("b-modal",{attrs:{id:"delete-family-modal",title:"Delete Family","ok-variant":"danger","ok-title":"Delete"},on:{ok:t.deleteFamily},model:{value:t.showDeleteFamilyModal,callback:function(e){t.showDeleteFamilyModal=e},expression:"showDeleteFamilyModal"}},[a("p",{staticClass:"mb-0"},[t._v(" Are you sure you want to delete the family "),t.familyToDelete?a("strong",[t._v(t._s(t.familyToDelete.name))]):t._e(),t._v("? ")]),a("p",{staticClass:"text-danger small mb-0"},[t._v(" This action cannot be undone. ")])])],1)},s=[],l=(a("a4d3"),a("e01a"),a("4de4"),a("caad"),a("fb6a"),a("b0c0"),a("d3b7"),a("2532"),a("223c")),o={name:"ItemFamiliesManagement",data:function(){return{families:[],loading:!1,actionsDisabled:!0,searchTerm:"",currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],familyFields:[{key:"code",label:"Code",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"displayOrder",label:"Order",sortable:!0},{key:"active",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1,thClass:"text-right",tdClass:"text-right"}],showFamilyModal:!1,showDeleteFamilyModal:!1,editingFamily:null,familyToDelete:null,familyForm:{code:"",name:"",description:"",displayOrder:0,active:!0}}},computed:{filteredFamilies:function(){if(!this.searchTerm)return this.families;var t=this.searchTerm.toLowerCase();return this.families.filter((function(e){return e.code&&e.code.toLowerCase().includes(t)||e.name&&e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)}))},totalRows:function(){return this.filteredFamilies.length},paginatedFamilies:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredFamilies.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)},canSaveFamily:function(){return this.familyForm.code&&this.familyForm.name}},watch:{searchTerm:function(){this.currentPage=1},perPage:function(){this.currentPage=1},filteredFamilies:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},mounted:function(){this.loadFamilies()},methods:{loadFamilies:function(){var t=this;this.loading=!0,this.$http.get("/item-family").then((function(e){t.families=Array.isArray(e.data)?e.data:[]})).catch((function(e){console.error("Error loading item families:",e),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:"Failed to load item families.",variant:"danger"}})})).finally((function(){t.loading=!1}))},clearSearch:function(){this.searchTerm=""},openFamilyModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(this.editingFamily=t,this.familyForm={code:t.code||"",name:t.name||"",description:t.description||"",displayOrder:t.displayOrder||0,active:!1!==t.active}):(this.editingFamily=null,this.familyForm={code:"",name:"",description:"",displayOrder:0,active:!0}),this.showFamilyModal=!0},resetFamilyForm:function(){this.familyForm={code:"",name:"",description:"",displayOrder:0,active:!0},this.editingFamily=null},saveFamily:function(){var t,e=this,a={code:this.familyForm.code,name:this.familyForm.name,description:this.familyForm.description,displayOrder:this.familyForm.displayOrder||0,active:!1!==this.familyForm.active};return t=this.editingFamily?this.$http.put("/item-family/".concat(this.editingFamily.id),a):this.$http.post("/item-family",a),t.then((function(){e.$toast({component:l["default"],props:{title:"Success",icon:"CheckIcon",text:"Family ".concat(e.editingFamily?"updated":"created"," successfully."),variant:"success"}}),e.showFamilyModal=!1,e.loadFamilies()})).catch((function(t){var a;return console.error("Error saving family:",t),e.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:(null===(a=t.response)||void 0===a?void 0:a.data)||"Failed to save family.",variant:"danger"}}),!1}))},confirmDeleteFamily:function(t){var e=this;t&&this.$http.get("/item-sub-family/by-family/".concat(t.id)).then((function(a){var i=Array.isArray(a.data)?a.data:[];i.length>0?e.$toast({component:l["default"],props:{title:"Cannot Delete",icon:"AlertCircleIcon",text:"Delete or reassign the subfamilies before removing this family.",variant:"warning"}}):(e.familyToDelete=t,e.showDeleteFamilyModal=!0)})).catch((function(t){console.error("Error checking subfamilies for family deletion:",t),e.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:"Unable to verify subfamilies for this family.",variant:"danger"}})}))},deleteFamily:function(){var t=this;if(this.familyToDelete)return this.$http.delete("/item-family/".concat(this.familyToDelete.id)).then((function(){t.$toast({component:l["default"],props:{title:"Deleted",icon:"Trash2Icon",text:"Family deleted successfully.",variant:"success"}}),t.loadFamilies()})).catch((function(e){var a;console.error("Error deleting family:",e),t.$toast({component:l["default"],props:{title:"Error",icon:"XIcon",text:(null===(a=e.response)||void 0===a?void 0:a.data)||"Failed to delete family.",variant:"danger"}})})).finally((function(){t.showDeleteFamilyModal=!1,t.familyToDelete=null}))}}},r=o,n=(a("d3eb"),a("2877")),c=Object(n["a"])(r,i,s,!1,null,"baf1d47a",null);e["default"]=c.exports},d3eb:function(t,e,a){"use strict";a("6887f")}}]);
//# sourceMappingURL=chunk-0d4d49a6.d14d8a54.js.map