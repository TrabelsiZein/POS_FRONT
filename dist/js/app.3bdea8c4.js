(function(e){function t(t){for(var i,o,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},o={app:0},a={app:0},r=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-0d4d49a6":"d14d8a54","chunk-126a2044":"412e33e8","chunk-135f7500":"af28b4da","chunk-22421e23":"a95e14b4","chunk-ff2d1a3e":"16d14e7b","chunk-280c29d6":"3e1c1f7c","chunk-46bd009e":"5a166256","chunk-58c57485":"2d9b33c2","chunk-5df1258f":"5104731d","chunk-de41b178":"748dc967","chunk-15e290d2":"269059db","chunk-71903056":"3380fd62","chunk-9fec372c":"558f1865","chunk-eeafe182":"c5415486","chunk-29250da6":"2821010d","chunk-2c6de018":"a2385163","chunk-2d21a3d2":"ee9b89fe","chunk-2d22bcc3":"de3fc013","chunk-3bc99379":"1aadb58f","chunk-61e345f4":"de97d329","chunk-6f5a77a6":"5cee0ad6","chunk-24e8c820":"130f927e","chunk-e06f13ce":"f7be6f0d","chunk-70d4f87e":"df2e4650","chunk-802162b8":"71bf40c4","chunk-9baffa62":"927b9842","chunk-cae318d8":"8923f5d3","chunk-d2595d6e":"1b025783","chunk-d73191b6":"629112a4"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-0d4d49a6":1,"chunk-126a2044":1,"chunk-135f7500":1,"chunk-22421e23":1,"chunk-ff2d1a3e":1,"chunk-280c29d6":1,"chunk-46bd009e":1,"chunk-58c57485":1,"chunk-5df1258f":1,"chunk-de41b178":1,"chunk-15e290d2":1,"chunk-71903056":1,"chunk-9fec372c":1,"chunk-eeafe182":1,"chunk-29250da6":1,"chunk-2c6de018":1,"chunk-3bc99379":1,"chunk-61e345f4":1,"chunk-6f5a77a6":1,"chunk-24e8c820":1,"chunk-e06f13ce":1,"chunk-70d4f87e":1,"chunk-802162b8":1,"chunk-9baffa62":1,"chunk-cae318d8":1,"chunk-d2595d6e":1,"chunk-d73191b6":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-0d4d49a6":"842a543f","chunk-126a2044":"f3ebe9c4","chunk-135f7500":"4dbea570","chunk-22421e23":"9a32f472","chunk-ff2d1a3e":"a5ba2aa8","chunk-280c29d6":"17537be5","chunk-46bd009e":"3ab4b874","chunk-58c57485":"da4e3ef1","chunk-5df1258f":"db6f5874","chunk-de41b178":"24a7a81e","chunk-15e290d2":"c766c92d","chunk-71903056":"e21a35be","chunk-9fec372c":"818b4979","chunk-eeafe182":"8c2a2afa","chunk-29250da6":"33b3ba89","chunk-2c6de018":"27686596","chunk-2d21a3d2":"31d6cfe0","chunk-2d22bcc3":"31d6cfe0","chunk-3bc99379":"08200c39","chunk-61e345f4":"c4aea19f","chunk-6f5a77a6":"b0502c9c","chunk-24e8c820":"077d5447","chunk-e06f13ce":"06194056","chunk-70d4f87e":"818d11d5","chunk-802162b8":"c0732149","chunk-9baffa62":"33cb84c8","chunk-cae318d8":"22afbe94","chunk-d2595d6e":"959611be","chunk-d73191b6":"c0732149"}[e]+".css",a=l.p+i,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var u=r[s],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===i||c===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],c=u.getAttribute("data-href");if(c===i||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete o[e],p.parentNode.removeChild(p),n(r)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){o[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=a[e]=[t,n]}));t.push(i[2]=r);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=s(e);var d=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",d.name="ChunkLoadError",d.type=i,d.request=o,n[1](d)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1dff":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var i={},o={},a={app:{appName:"Vuexy",appLogoImage:n("ed29")},layout:{isRTL:!1,skin:"light",routerTransition:"zoom-fade",type:"vertical",contentWidth:"full",menu:{hidden:!1,isCollapsed:!0},navbar:{type:"sticky",backgroundColor:""},footer:{type:"hidden"},customizer:!0,enableScrollToTop:!0}}},"203c":function(e,t,n){},2184:function(e,t,n){},"226d":function(e,t,n){},"36ec":function(e,t,n){"use strict";n("8fdc")},4131:function(e,t,n){},4360:function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=n("2f62"),a=n("1dff"),r={namespaced:!0,state:{windowWidth:0,shallShowOverlay:!1},getters:{currentBreakPoint:function(e){var t=e.windowWidth;return t>=a["a"].xl?"xl":t>=a["a"].lg?"lg":t>=a["a"].md?"md":t>=a["a"].sm?"sm":"xs"}},mutations:{UPDATE_WINDOW_WIDTH:function(e,t){e.windowWidth=t},TOGGLE_OVERLAY:function(e,t){e.shallShowOverlay=void 0!==t?t:!e.shallShowOverlay}},actions:{}},s=(n("ac1f"),n("466d"),{namespaced:!0,state:{layout:{isRTL:a["c"].layout.isRTL,skin:localStorage.getItem("vuexy-skin")||a["c"].layout.skin,routerTransition:a["c"].layout.routerTransition,type:a["c"].layout.type,contentWidth:a["c"].layout.contentWidth,menu:{hidden:a["c"].layout.menu.hidden},navbar:{type:a["c"].layout.navbar.type,backgroundColor:a["c"].layout.navbar.backgroundColor},footer:{type:a["c"].layout.footer.type}}},getters:{},mutations:{TOGGLE_RTL:function(e){e.layout.isRTL=!e.layout.isRTL,document.documentElement.setAttribute("dir",e.layout.isRTL?"rtl":"ltr")},UPDATE_SKIN:function(e,t){e.layout.skin=t,localStorage.setItem("vuexy-skin",t),"dark"===t?document.body.classList.add("dark-layout"):document.body.className.match("dark-layout")&&document.body.classList.remove("dark-layout")},UPDATE_ROUTER_TRANSITION:function(e,t){e.layout.routerTransition=t},UPDATE_LAYOUT_TYPE:function(e,t){e.layout.type=t},UPDATE_CONTENT_WIDTH:function(e,t){e.layout.contentWidth=t},UPDATE_NAV_MENU_HIDDEN:function(e,t){e.layout.menu.hidden=t},UPDATE_NAVBAR_CONFIG:function(e,t){Object.assign(e.layout.navbar,t)},UPDATE_FOOTER_CONFIG:function(e,t){Object.assign(e.layout.footer,t)}},actions:{}}),l={namespaced:!0,state:{isVerticalMenuCollapsed:a["c"].layout.menu.isCollapsed},getters:{},mutations:{UPDATE_VERTICAL_MENU_COLLAPSED:function(e,t){e.isVerticalMenuCollapsed=t}},actions:{}},u=n("c7eb"),c=n("1da1"),d=n("5530"),p=(n("d3b7"),n("3ca3"),n("ddb0"),{namespaced:!0,state:{cart:[],orderSummary:null,currentSession:null,sessionChecked:!1,pendingTicketId:null,selectedCustomerId:null},mutations:{SET_CART:function(e,t){e.cart=t},SET_ORDER_SUMMARY:function(e,t){e.orderSummary=t},CLEAR_CART:function(e){e.cart=[]},CLEAR_ORDER_SUMMARY:function(e){e.orderSummary=null},SET_CURRENT_SESSION:function(e,t){e.currentSession=t,e.sessionChecked=!0},CLEAR_CURRENT_SESSION:function(e){e.currentSession=null,e.sessionChecked=!0},SET_SESSION_CHECKED:function(e,t){e.sessionChecked=t},SET_PENDING_TICKET_ID:function(e,t){e.pendingTicketId=t},CLEAR_PENDING_TICKET_ID:function(e){e.pendingTicketId=null},SET_SELECTED_CUSTOMER_ID:function(e,t){e.selectedCustomerId=t},CLEAR_SELECTED_CUSTOMER_ID:function(e){e.selectedCustomerId=null}},actions:{setCart:function(e,t){var n=e.commit;n("SET_CART",t)},setOrderSummary:function(e,t){var n=e.commit;n("SET_ORDER_SUMMARY",t)},updateOrderSummary:function(e,t){var n=e.commit,i=e.state,o=i.orderSummary||{};n("SET_ORDER_SUMMARY",Object(d["a"])(Object(d["a"])({},o),t))},clearCart:function(e){var t=e.commit;t("CLEAR_CART")},clearOrderSummary:function(e){var t=e.commit;t("CLEAR_ORDER_SUMMARY")},checkSession:function(e){return Object(c["a"])(Object(u["a"])().mark((function t(){var i,o,a,r;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.commit,o=e.state,!o.sessionChecked||!o.currentSession){t.next=3;break}return t.abrupt("return",o.currentSession);case 3:return t.prev=3,t.next=6,Promise.resolve().then(n.bind(null,"7f80"));case 6:return a=t.sent.default,t.next=9,a.get("/cashier-session/current");case 9:if(r=t.sent,!r.data){t.next=15;break}return i("SET_CURRENT_SESSION",r.data),t.abrupt("return",r.data);case 15:return i("CLEAR_CURRENT_SESSION"),t.abrupt("return",null);case 17:t.next=24;break;case 19:return t.prev=19,t.t0=t["catch"](3),console.error("Error checking session:",t.t0),i("CLEAR_CURRENT_SESSION"),t.abrupt("return",null);case 24:case"end":return t.stop()}}),t,null,[[3,19]])})))()},setCurrentSession:function(e,t){var n=e.commit;n("SET_CURRENT_SESSION",t)},clearCurrentSession:function(e){var t=e.commit;t("CLEAR_CURRENT_SESSION")},resetSessionCheck:function(e){var t=e.commit;t("SET_SESSION_CHECKED",!1)},setPendingTicketId:function(e,t){var n=e.commit;n("SET_PENDING_TICKET_ID",t)},clearPendingTicketId:function(e){var t=e.commit;t("CLEAR_PENDING_TICKET_ID")},setSelectedCustomerId:function(e,t){var n=e.commit;n("SET_SELECTED_CUSTOMER_ID",t)},clearSelectedCustomerId:function(e){var t=e.commit;t("CLEAR_SELECTED_CUSTOMER_ID")}},getters:{hasOpenSession:function(e){return null!==e.currentSession},isSessionChecked:function(e){return e.sessionChecked}}});i["default"].use(o["a"]);t["default"]=new o["a"].Store({modules:{app:r,appConfig:s,verticalMenu:l,pos:p},strict:Object({NODE_ENV:"production",BASE_URL:"/"}).DEV})},"43f3":function(e,t,n){},4563:function(e,t,n){"use strict";n("8675")},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"eventBus",(function(){return bt}));var i,o,a=n("c7eb"),r=n("1da1"),s=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7"),n("2b0e")),l=n("51c2"),u=n("dbbe"),c=n("ed09"),d=n("5f5b"),p=n("a18c"),f=n("4360"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-100",class:[e.skinClasses],attrs:{id:"app"}},[n(e.layout,{tag:"component"},[n("router-view")],1)],1)},h=[],b=(n("fb6a"),n("a9e3"),n("3ca3"),n("498a"),n("ddb0"),n("1dff")),g=n("04b0"),C=n("b8f2"),v=n("16ce"),y=function(){return Promise.all([n.e("chunk-6f5a77a6"),n.e("chunk-e06f13ce")]).then(n.bind(null,"03d1"))},k=function(){return Promise.all([n.e("chunk-6f5a77a6"),n.e("chunk-24e8c820")]).then(n.bind(null,"2607"))},S=function(){return n.e("chunk-2d22bcc3").then(n.bind(null,"f102"))},w={components:{LayoutHorizontal:k,LayoutVertical:y,LayoutFull:S},computed:{layout:function(){return"full"===this.$route.meta.layout?"layout-full":"layout-".concat(this.contentLayoutType)},contentLayoutType:function(){return this.$store.state.appConfig.layout.type}},beforeCreate:function(){for(var e=["primary","secondary","success","info","warning","danger","light","dark"],t=0,n=e.length;t<n;t++)b["b"][e[t]]=Object(v["a"])("--".concat(e[t]),document.documentElement).value.trim();for(var i=["xs","sm","md","lg","xl"],o=0,a=i.length;o<a;o++)b["a"][i[o]]=Number(Object(v["a"])("--breakpoint-".concat(i[o]),document.documentElement).value.slice(0,-2));var r=b["c"].layout.isRTL;document.documentElement.setAttribute("dir",r?"rtl":"ltr")},setup:function(){var e=Object(C["a"])(),t=e.skin,n=e.skinClasses;"dark"===t.value&&document.body.classList.add("dark-layout"),Object(g["provideToast"])({hideProgressBar:!0,closeOnClick:!1,closeButton:!1,icon:!1,timeout:3e3,transition:"Vue-Toastification__fade"}),f["default"].commit("app/UPDATE_WINDOW_WIDTH",window.innerWidth);var i=Object(v["b"])(),o=i.width;return Object(c["watch"])(o,(function(e){f["default"].commit("app/UPDATE_WINDOW_WIDTH",e)})),{skinClasses:n}}},E=w,_=n("2877"),T=Object(_["a"])(E,m,h,!1,null,null,null),O=T.exports,A=(n("b0c0"),n("5530")),D=n("0a35"),I={name:"FeatherIcon",functional:!0,props:{icon:{required:!0,type:[String,Object]},size:{type:String,default:"14"},badge:{type:[String,Object,Number],default:null},badgeClasses:{type:[String,Object,Array],default:"badge-primary"}},render:function(e,t){var n=t.props,i=t.data,o=e(D[n.icon],Object(A["a"])({props:{size:n.size}},i));if(!n.badge)return o;var a=e("span",{staticClass:"badge badge-up badge-pill",class:n.badgeClasses},[n.badge]);return e("span",{staticClass:"feather-icon position-relative"},[o,a])}},R=I,x=(n("925e"),Object(_["a"])(R,i,o,!1,null,null,null)),N=x.exports;s["default"].component(N.name,N);var j=n("2b88"),L=n.n(j);s["default"].use(L.a);var P=n("6c42");n("cc0f");s["default"].use(P["default"],{hideProgressBar:!0,closeOnClick:!1,closeButton:!1,icon:!1,timeout:3e3,transition:"Vue-Toastification__fade"});var B=n("2b52"),F=n("d680");s["default"].use(B["a"],F["a"]);var z=n("5886");s["default"].use(z["default"]);var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative w-full"},[n("b-input-group",[n("b-form-input",{attrs:{size:e.size,value:e.localValue,readonly:"",title:e.localValue,disabled:e.disabled}}),n("b-input-group-append",{attrs:{"is-text":""}},[n("feather-icon",{staticClass:"cursor-pointer",class:{disabled:e.disabled},attrs:{icon:"SearchIcon"},on:{click:e.openModal}})],1)],1),n("b-modal",{ref:"modal",attrs:{"hide-footer":"",scrollable:"",size:e.localLookupSize}},[n("List",{attrs:{componentName:e.componentName,showBreadCrumbOpenNewTab:!0,hideBreadCrumbPath:!0,onlyListComponent:!0},on:{lookupItemClicked:e.cellDoubleClicked}})],1)],1)},$=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-overlay",{attrs:{show:e.showLoading,"spinner-variant":"primary"}},[e.onlyListComponent?n("CardPopup",{ref:"popup",attrs:{componentName:e.componentName,entityData:e.entityPopup,editMode:e.editMode,enableAutoSave:!e.isCardLine},on:{entitySaved:e.loadData,saveClicked:function(t){return e.$emit("saveClicked",t)}}}):e._e(),n("b-card",[n("Breadcrumb",{attrs:{hidePrintButton:!!e.isCardLine,hideDownloadButton:!!e.isCardLine,hideFilterButton:!!e.isCardLine,showBreadCrumbOpenNewTab:!e.isCardLine&&e.showBreadCrumbOpenNewTab,hideBreadCrumbPath:!!e.isCardLine||e.hideBreadCrumbPath,filterFields:e.filterFields,onlyListComponent:e.onlyListComponent,componentName:e.componentName,breadcrumbData:e.localBreadcrumbData,linesEnabled:e.linesEnabled},on:{editClicked:e.editClicked,downloadClicked:e.downloadClicked,printClicked:e.printClicked,deleteClicked:e.deleteClicked,updateSearchQuery:e.updateSearchQuery,newClicked:e.newClicked,filterSearchChnaged:e.filterSearchChnaged}}),n("hr"),e.agGridColumnDefs?n("AgGrid",{ref:"agGrid",attrs:{sizeColumnsToFit:e.sizeColumnsToFit,agGridColumnDefs:e.agGridColumnDefs,agGridData:e.localAgGridData,multiRowSelection:e.multiRowSelection},on:{cellDoubleClicked:e.cellDoubleClicked,onColumnChanged:e.onColumnChanged,onGridReady:e.onGridReady}}):e._e()],1),e.columnApi?n("ListCustomizer",{attrs:{columnApi:e.columnApi,gridApi:e.gridApi,sizeColumnsToFit:e.sizeColumnsToFit,multiRowSelection:e.multiRowSelection},on:{sizeColumnsToFit:e.sizeColumnsToFitChanged,multiRowSelectionChanged:e.multiRowSelectionChanged,visibleColumnsChanged:e.visibleColumnsChanged}}):e._e()],1)},U=[],G=(n("99af"),n("4de4"),n("7db0"),n("c740"),n("caad"),n("d81d"),n("a434"),n("b64b"),n("07ac"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",{staticClass:"content-header"},[n("b-col",{staticClass:"content-header-left mb-2",attrs:{sm:"12",md:"5",lg:"7"}},[n("b-row",{staticClass:"breadcrumbs-top"},[n("b-col",{attrs:{cols:"12"}},[n("h2",{staticClass:"content-header-title float-left pr-1 mb-0"},[e._v(" "+e._s(e.breadcrumbData.title)+" ")]),e.hideBreadCrumbPath?e._e():n("div",{staticClass:"breadcrumb-wrapper"},[n("b-breadcrumb",[n("b-breadcrumb-item",{attrs:{to:"/"}},[n("feather-icon",{staticClass:"align-text-top",attrs:{icon:"HomeIcon",size:"16"}})],1),e._l(e.breadcrumbData.route,(function(t){return n("b-breadcrumb-item",{key:t.text,attrs:{active:t.active,to:t.to}},[e._v(" "+e._s(t.text)+" ")])}))],2)],1)])],1)],1),n("b-col",{staticClass:"content-header-right text-md-right mb-1",attrs:{sm:"12",md:"7",lg:"5"}},[e.showBreadCrumbOpenNewTab?n("b-button",{staticClass:"btn-icon mr-50",attrs:{variant:"relief-primary"},on:{click:e.openInNewTab}},[n("feather-icon",{attrs:{icon:"ExternalLinkIcon"}})],1):e._e(),n("b-button",{staticClass:"btn-icon mr-50 ",attrs:{variant:"relief-info"},on:{click:e.searchClicked}},[n("feather-icon",{attrs:{icon:"SearchIcon"}})],1),e.hideFilterButton?e._e():n("b-button",{staticClass:"btn-icon mr-50 ",attrs:{variant:"relief-info"},on:{click:e.filterClicked}},[n("feather-icon",{attrs:{icon:"FilterIcon"}})],1),e.hideDownloadButton?e._e():n("b-button",{staticClass:"btn-icon mr-50",attrs:{variant:"relief-secondary"},on:{click:function(t){return e.$emit("downloadClicked")}}},[n("feather-icon",{attrs:{icon:"DownloadIcon"}})],1),e.hidePrintButton?e._e():n("b-button",{staticClass:"btn-icon mr-50",attrs:{variant:"relief-warning"},on:{click:function(t){return e.$emit("printClicked")}}},[n("feather-icon",{attrs:{icon:"PrinterIcon"}})],1),e.$can("DELETE",e.componentName)&&e.linesEnabled?n("b-button",{staticClass:"btn-icon mr-50",attrs:{variant:"relief-danger"},on:{click:function(t){return e.$emit("deleteClicked")}}},[n("feather-icon",{attrs:{icon:"Trash2Icon"}})],1):e._e(),e.$can("EDIT",e.componentName)&&e.linesEnabled?n("b-button",{staticClass:"btn-icon mr-50",attrs:{variant:"relief-primary"},on:{click:function(t){return e.$emit("editClicked")}}},[n("feather-icon",{attrs:{icon:"EditIcon"}})],1):e._e(),e.$can("WRITE",e.componentName)&&e.linesEnabled?n("b-button",{staticClass:"btn-icon",attrs:{variant:"relief-success"},on:{click:e.newClicked}},[n("feather-icon",{attrs:{icon:"PlusIcon"}})],1):e._e()],1),e.showSearchBar?n("b-col",{attrs:{cols:"12"}},[n("b-form-group",[n("b-input-group",{staticClass:"input-group-merge"},[n("b-input-group-prepend",{attrs:{"is-text":""}},[n("feather-icon",{attrs:{icon:"SearchIcon"}})],1),n("b-form-input",{ref:"icons-search",attrs:{id:"icons-search",placeholder:"Recherche..."},on:{input:e.updateSearchQuery},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}})],1)],1)],1):e._e()],1),e.showFilterBar?n("div",e._l(e.filters,(function(t,i){return n("b-row",{key:i},[n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("b-form-group",{attrs:{label:"Paramètre","label-for":"param-select"}},[n("b-form-select",{attrs:{id:"param-select",size:"sm",options:e.filterFields,label:"label"},model:{value:t.parameter,callback:function(n){e.$set(t,"parameter",n)},expression:"filter.parameter"}})],1)],1),n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("b-form-group",{attrs:{label:"Valeur","label-for":"value-input"}},[n("b-form-input",{attrs:{id:"value-input",size:"sm"},on:{input:e.filterSearchChnaged},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"filter.value"}})],1)],1),n("b-col",{staticClass:"mt-2 text-right",attrs:{sm:"12",md:"6",lg:"4"}},[e.filters.length>1?n("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:function(t){return e.deleteRow(i)}}},[e._v(" Supprimer ")]):e._e(),i===e.filters.length-1?n("b-button",{staticClass:"ml-1 ",attrs:{variant:"outline-success",size:"sm"},on:{click:function(t){return e.filters.push({parameter:"",value:""})}}},[e._v(" Ajouter ")]):e._e()],1)],1)})),1):e._e()],1)}),V=[],H={props:{hidePrintButton:{type:Boolean,default:!1,required:!1},hideDownloadButton:{type:Boolean,default:!1,required:!1},hideFilterButton:{type:Boolean,default:!1,required:!1},showBreadCrumbOpenNewTab:{type:Boolean,default:!1},hideBreadCrumbPath:{type:Boolean,default:!1},filterFields:{type:Array,required:!1},componentName:{type:String,required:!0},breadcrumbData:{type:Object,required:!0},onlyListComponent:{type:Boolean},linesEnabled:{type:Boolean,default:!0}},data:function(){return{filters:[{parameter:"",value:""}],paramsOptions:["Code","Désignation"],inputSearch:"",showSearchBar:!1,showFilterBar:!1}},methods:{openInNewTab:function(){var e=this.$router.resolve({name:this.componentName+"_READ"}).href;window.open(e,"_blank")},newClicked:function(){this.onlyListComponent?this.$emit("newClicked"):this.$router.push({name:this.componentName+"_WRITE"})},searchClicked:function(){var e=this;this.showSearchBar=!this.showSearchBar,this.showSearchBar&&setTimeout((function(){e.$refs["icons-search"].focus()}),100)},filterClicked:function(){this.showFilterBar=!this.showFilterBar},updateSearchQuery:function(e){this.$emit("updateSearchQuery",e)},deleteRow:function(e){this.filters.splice(e,1),this.$emit("filterSearchChnaged",this.filters)},filterSearchChnaged:function(){this.$emit("filterSearchChnaged",this.filters)}}},W=H,K=(n("6872"),Object(_["a"])(W,G,V,!1,null,"db6e3b58",null)),J=K.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ag-grid-vue",{class:e.isDark?"ag-theme-balham-dark":"ag-theme-balham",staticStyle:{width:"100%",height:"67vh"},attrs:{gridOptions:e.gridOptions,headerHeight:32,rowHeight:50,defaultColDef:e.defaultColDef,pagination:!0,paginationPageSize:"30",columnDefs:e.agGridColumnDefs,rowData:e.agGridData,overlayLoadingTemplate:e.overlayLoadingTemplate,tooltipShowDelay:2e3},on:{"grid-ready":e.onGridReady,"first-data-rendered":e.onFirstDataRendered}})},Q=[],X=n("2909"),Z=(n("ac1f"),n("00b4"),n("b360"),n("cf36"),n("203c"),n("401b")),ee={page:"Page",more:"Plus",to:"au",of:"de",next:"Suivant",last:"Dérnier",first:"Premier",previous:"Précedent",loadingOoo:"Chargement...",selectAll:"Sélectionner tous",searchOoo:"Rechercher ...",blanks:"Vide",filterOoo:"Filtrer...",applyFilter:"Appliquer ...",equals:"Egal à",notEqual:"Pas égal à",lessThan:"moins que",greaterThan:"Plus que",lessThanOrEqual:"moins que ou égal",greaterThanOrEqual:"Plus que ou égal",inRange:"dans la gamme",contains:"Contient",notContains:"Ne contient pas",startsWith:"Commence par",endsWith:"Termine par",andCondition:"ET",orCondition:"OU",group:"Groupe",columns:"Colonnes",filters:"Filtre",rowGroupColumns:"le Pivot Cols",rowGroupColumnsEmptyMessage:"la drag cols to group",valueColumns:"Valeurs colones",pivotMode:"Le Pivot-Mode",groups:"Les groups",values:"Les valeurs",pivots:"Les pivots",valueColumnsEmptyMessage:"la drag cols to aggregate",pivotColumnsEmptyMessage:"la drag here to pivot",toolPanelButton:"le tool panel",noRowsToShow:"aucune ligne trouvée",pinColumn:"Epingler la colonne",valueAggregation:"Agrégation de valeur",autosizeThiscolumn:"Autoriser cette colonne",autosizeAllColumns:"Autoriser tous",groupBy:"Grouper par",ungroupBy:"Dégrouper par",resetColumns:"Réinitialiser",expandAll:"Détacher tous",collapseAll:"Attacher Tous",toolPanel:"Boite utils",export:"Exporter",csvExport:"Sous forme (csv)",excelExport:"Sous forme (.xlsx)",excelXmlExport:"Sous forme (.xml)",pinLeft:"<< Épingle gauche",pinRight:"Épingle droit >>",noPin:"Sans épingle",sum:"Somme",min:"Min",max:"Max",none:"Pas",count:"compte",average:"Moy",filteredRows:"Filter les lignes",selectedRows:"Selectionner les lignes",totalRows:"Totals des lignes",totalAndFilteredRows:"Total et filter les lignes",copy:"Copier",copyWithHeaders:"Copier avec l'êntete ",ctrlC:"Ctr + C",paste:"Coller",ctrlV:"Ctr + V"},te=ee,ne={components:{AgGridVue:Z["AgGridVue"]},props:{agGridData:{type:Array,required:!0},agGridColumnDefs:{type:Array,required:!0},sizeColumnsToFit:{type:Boolean,default:!0},multiRowSelection:{type:Boolean,default:!1}},setup:function(){var e=Object(C["a"])(),t=e.skin,n=Object(c["computed"])((function(){return"dark"===t.value}));return{skin:t,isDark:n}},data:function(){var e=this;return{handleColumnsConfigChanged:!1,overlayLoadingTemplate:'<span class="ag-overlay-loading-center">Merci de patienter pendant le chargement des données...</span>',gridOptions:{localeText:te,rowSelection:this.multiRowSelection?"multiple":"single",suppressCellSelection:!0,enableCellTextSelection:!0,onColumnMoved:function(t){e.onColumnChanged(t)},onColumnVisible:function(t){e.onColumnChanged(t)},onColumnResized:function(t){t.finished&&e.onColumnChanged(t)}},defaultColDef:{onCellDoubleClicked:this.handleCellDoubleClick,onCellClicked:this.onCellClicked,onCellValueChanged:this.onCellValueChanged,sortable:!0,resizable:!0,suppressToolPanel:!1,filter:!0,cellStyle:{"font-weight":"500",border:"1px solid #EBE9F1","border-width":"1px","font-family":"'Montserrat', Helvetica, Arial, serif"},tooltipValueGetter:function(t){return e.getTooltipContent(t.data)}},gridApi:null,columnApi:null}},methods:{onColumnChanged:function(e){this.handleColumnsConfigChanged&&this.$emit("onColumnChanged",e)},getTooltipContent:function(e){var t=e.createdBy,n=e.createdAt,i=e.updatedBy,o=e.updatedAt;return"Created By: ".concat(t,"\nCreated At: ").concat(n,"\nUpdated By: ").concat(i,"\nUpdated At: ").concat(o)},onCellValueChanged:function(e){this.$emit("onCellValueChanged",e)},onCellClicked:function(e){this.$emit("onCellClicked",e)},handleCellDoubleClick:function(e){this.$emit("cellDoubleClicked",e)},onFirstDataRendered:function(e){this.$emit("onFirstDataRendered"),e.api.hideOverlay(),this.handleColumnsConfigChanged=!0},onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.sizeColumnsToFit&&(/Mobi/i.test(navigator.userAgent)||this.gridApi.sizeColumnsToFit()),this.$emit("onGridReady",e)},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)}},watch:{multiRowSelection:function(e){this.gridOptions.rowSelection=e?"multiple":"single",this.gridApi&&this.gridApi.deselectAll();var t="__checkbox__",n=this.gridApi.getColumnDefs(),i=n.some((function(e){return e.colId===t}));if(e)if(i)this.columnApi.setColumnVisible(t,!0);else{var o={colId:t,headerName:"",checkboxSelection:!0,headerCheckboxSelection:!0,width:40,pinned:"left",resizable:!1,suppressColumnsToolPanel:!0,suppressMovable:!0,filter:!1,sortable:!1};this.gridApi.setColumnDefs([o].concat(Object(X["a"])(n)))}else i&&this.columnApi.setColumnVisible(t,!1);this.sizeColumnsToFit&&(/Mobi/i.test(navigator.userAgent)||this.gridApi.sizeColumnsToFit())}}},ie=ne,oe=(n("4563"),n("36ec"),Object(_["a"])(ie,Y,Q,!1,null,"c5d3eeae",null)),ae=oe.exports,re=n("25ca"),se=n("21a6"),le=n.n(se),ue=(n("0481"),n("4069"),function(){return window.entities?window.entities:(console.warn("⚠️ window.entities is not defined. Make sure entities-config.js is loaded."),{})}),ce=function(e){var t=ue()[e];return t&&t.fields?t.fields.map((function(e){var t;return{field:e.field,headerName:(null===(t=e.label)||void 0===t?void 0:t.fr)||e.headerName||e.field,hide:!e.showList}})):[]},de=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr";console.log("getColumnDefinitionForCard is called with entityName:",e);var i=ue()[e];if(!i)return null;var o=i.apiURI||"",a=(null===(t=i.titleForm)||void 0===t?void 0:t[n])||"",r=(i.fields.filter((function(e){return e.showCard}))||[]).flat();if(r.forEach((function(e){"Lookup"===e.type&&e.lookupEntity&&(e.lookupApiURI=pe(e.lookupEntity)||null)})),Array.isArray(i.tabs)){var s={};return i.tabs.forEach((function(e){s[e.id]=Object(A["a"])(Object(A["a"])({},e),{},{fields:[]})})),r.forEach((function(e){var t,n=null!==(t=e.tab)&&void 0!==t?t:1;s[n]&&s[n].fields.push(e)})),{apiURI:o,titleForm:a,tabs:Object.values(s)}}return{apiURI:o,titleForm:a,fields:r}},pe=function(e){var t;return(null===(t=ue()[e])||void 0===t?void 0:t.apiURI)||""},fe=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr",o=ue()[e];if(!o)return null;var a=(o.breadcrumb||[]).map((function(e){return{text:e}}));return{title:(null===(t=o.titleList)||void 0===t?void 0:t[i])||"",route:[].concat(Object(X["a"])(a),[{text:(null===(n=o.titleList)||void 0===n?void 0:n[i])||"",active:!0}])}},me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"modal",attrs:{"hide-footer":"",title:e.entityDefinition.titleForm,scrollable:"",size:"xl","no-close-on-esc":"","no-close-on-backdrop":""},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[n("b-overlay",{attrs:{show:e.showLoading,"spinner-variant":"primary"}},[n("Form",{ref:"form",attrs:{isPopup:!0,entityDefinition:e.entityDefinition,entity:e.entity,componentName:e.componentName,isEditMode:e.localEditMode,seriesHeaderData:e.seriesHeaderData},on:{"update:entity":function(t){e.entity=t}},model:{value:e.entity,callback:function(t){e.entity=t},expression:"entity"}}),n("hr"),n("b-row",{staticClass:"text-right"},[n("b-col",{attrs:{cols:"12",md:"12"}},[n("b-button",{staticClass:"mr-50",attrs:{variant:"outline-primary"},on:{click:e.reset}},[n("feather-icon",{attrs:{icon:"RotateCcwIcon"}}),e._v(" Reset ")],1),n("b-button",{attrs:{variant:"relief-success"},on:{click:e.save}},[n("feather-icon",{attrs:{icon:"SaveIcon"}}),e._v(" Sauvegarder ")],1)],1)],1)],1)],1)},he=[],be=(n("a15b9"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.entityDefinition.tabs&&e.entityDefinition.tabs.length?e._l(e.entityDefinition.tabs,(function(t){return n("app-collapse",{key:t.id,staticClass:"mb-50",attrs:{accordion:"",type:"border"}},[n("app-collapse-item",{attrs:{title:t.title.fr,isVisible:t.open}},[n("b-row",e._l(t.fields||[],(function(t,i){return n("BcFormField",{key:t.field,ref:"ref_"+i,refInFor:!0,attrs:{isPopup:e.isPopup,label:t.label.fr,type:t.type,tooltip:t.tooltip&&t.tooltip.fr?t.tooltip.fr:t.label.fr,lookupComponentName:t.lookupEntity,lookupApiURI:t.lookupApiURI,value:e.entity[t.field],autoFocus:0===i,componentName:e.componentName,field:t.field,apiURI:e.entityDefinition.apiURI,mandatory:t.mandatory||!1,disabled:t.disabled||!1,isEditMode:e.isEditMode,seriesHeaderData:e.seriesHeaderData},on:{input:function(n){return e.onFieldInput(t.field,n)}}})})),1)],1)],1)})):[n("b-row",e._l(e.entityDefinition.fields||[],(function(t,i){return n("BcFormField",{key:t.field,ref:"ref_"+i,refInFor:!0,attrs:{isPopup:e.isPopup,label:t.label.fr,type:t.type,tooltip:t.tooltip&&t.tooltip.fr?t.tooltip.fr:t.label.fr,lookupComponentName:t.lookupEntity,lookupApiURI:t.lookupApiURI,value:e.entity[t.field],autoFocus:0===i,componentName:e.componentName,field:t.field,apiURI:e.entityDefinition.apiURI,mandatory:t.mandatory||!1,disabled:t.disabled||!1,isEditMode:e.isEditMode,seriesHeaderData:e.seriesHeaderData},on:{input:function(n){return e.onFieldInput(t.field,n)}}})})),1)]],2)}),ge=[],Ce=n("ade3"),ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-col",{attrs:{cols:12,md:e.colSize,lg:e.colSize,xl:e.colSize}},[n("b-form-group",{attrs:{"label-cols-md":e.labelCols},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",{staticClass:"d-flex align-items-center"},[n("span",{staticClass:"text-truncate",staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"160px"},attrs:{title:e.tooltip||e.label}},[e._v(" "+e._s(e.label)),e.mandatory?n("span",{staticClass:"text-danger ml-1"},[e._v("*")]):e._e()]),n("div",{staticClass:"flex-grow-1 ml-50",staticStyle:{"border-bottom":"1px dotted #999",height:"1px"}})])]},proxy:!0}])},[e.$slots.default?e._e():["String"==e.type?n("b-form-input",{ref:"input",attrs:{size:"sm",title:e.inputValue,disabled:e.isFieldDisabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):"Number"==e.type?n("b-form-input",{ref:"input",attrs:{type:"number",size:"sm",title:e.inputValue,disabled:e.isFieldDisabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):"Boolean"===e.type?n("b-form-checkbox",{ref:"input",attrs:{switch:"",title:e.inputValue?"Yes":"No",disabled:e.isFieldDisabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):"Date"===e.type?n("b-form-datepicker",{ref:"input",attrs:{size:"sm",title:e.inputValue?"Yes":"No",disabled:e.isFieldDisabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):"Lookup"===e.type?n("EntityLookup",{ref:"input",attrs:{title:e.label,componentName:e.lookupComponentName,apiURI:e.lookupApiURI,selectedItem:e.inputValue,disabled:e.isFieldDisabled},on:{onItemSelected:e.onLookupItemSelected}}):"Dropdown"===e.type?n("b-form-select",{ref:"input",attrs:{size:"sm",options:e.dropdownItems,title:e.inputValue,disabled:e.isFieldDisabled||e.dropdownLoading},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):e._e()],e._t("default")],2)],1)},ye=[],ke=n("9dee"),Se=n.n(ke),we={name:"BcFormField",components:{},props:{label:{type:String,required:!0},labelCols:{type:Number,default:4,required:!1},tooltip:{type:String,default:null,required:!1},value:[String,Number,Boolean],type:{type:String,default:"String",required:!1},lookupComponentName:{type:String,default:null,required:!1},lookupApiURI:{type:String,default:null,required:!1},isPopup:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},field:{type:String,required:!1},componentName:{type:String,required:!1},apiURI:{type:String,required:!1},mandatory:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1},isEditMode:{type:Boolean,default:!1,required:!1},seriesHeaderData:{type:Object,default:null,required:!1}},data:function(){return{dropdownItems:[],dropdownLoading:!1}},emits:["input"],computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},colSize:function(){return this.isPopup?12:Se.a.colSize},isFieldDisabled:function(){return!("no"!==this.field||!this.isEditMode)||(!("no"!==this.field||!this.seriesHeaderData||this.seriesHeaderData.manualNo)||this.disabled)}},methods:{loadDropdown:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i,o,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Dropdown"===e.type&&e.field&&e.componentName){t.next=3;break}return e.dropdownItems=[],t.abrupt("return");case 3:return e.dropdownLoading=!0,t.prev=4,n=String(e.componentName),i=String(e.field),t.next=9,e.$http.get(e.apiURI+"/getEnumValuesByField",{params:{entity:n,field:i}});case 9:o=t.sent,r=o.data,e.dropdownItems=Array.isArray(r)?r.map((function(e){return{value:e,text:e}})):[],t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),console.error("Dropdown load failed",t.t0),e.dropdownItems=[];case 18:return t.prev=18,e.dropdownLoading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,14,18,21]])})))()},onLookupItemSelected:function(e){this.$emit("input",e.no)},focus:function(){var e,t;null===(e=this.$refs.input)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}},mounted:function(){var e=this;this.autoFocus&&this.$nextTick((function(){var t,n;null===(t=e.$refs.input)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)})),"Dropdown"===this.type&&this.loadDropdown()}},Ee=we,_e=Object(_["a"])(Ee,ve,ye,!1,null,null,null),Te=_e.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collapse-icon",class:e.collapseClasses,attrs:{role:"tablist"}},[e._t("default")],2)},Ae=[],De=n("ec26"),Ie={props:{accordion:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},type:{type:String,default:"default"}},data:function(){return{collapseID:""}},computed:{collapseClasses:function(){var e=[],t={default:"collapse-default",border:"collapse-border",shadow:"collapse-shadow",margin:"collapse-margin"};return e.push(t[this.type]),e}},created:function(){this.collapseID=Object(De["a"])()}},Re=Ie,xe=Object(_["a"])(Re,Oe,Ae,!1,null,null,null),Ne=xe.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{class:{open:e.visible},attrs:{"no-body":""},on:{mouseenter:e.collapseOpen,mouseleave:e.collapseClose}},[n("b-card-header",{class:{collapsed:!e.visible},attrs:{"aria-expanded":e.visible?"true":"false","aria-controls":e.collapseItemID,role:"tab","data-toggle":"collapse"},on:{click:function(t){return e.updateVisible(!e.visible)}}},[e._t("header",[n("span",{staticClass:"lead collapse-title"},[e._v(e._s(e.title))])])],2),n("b-collapse",{attrs:{id:e.collapseItemID,accordion:e.accordion,role:"tabpanel"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("b-card-body",[e._t("default")],2)],1)],1)},Le=[],Pe=n("205f"),Be=n("b885"),Fe=n("6197"),ze=n("5843"),Me={components:{BCard:Pe["a"],BCardHeader:Be["a"],BCardBody:Fe["a"],BCollapse:ze["a"]},props:{isVisible:{type:Boolean,default:!1},title:{type:String,required:!0}},data:function(){return{visible:!1,collapseItemID:"",openOnHover:this.$parent.hover}},computed:{accordion:function(){return this.$parent.accordion?"accordion-".concat(this.$parent.collapseID):null}},created:function(){this.collapseItemID=Object(De["a"])(),this.visible=this.isVisible},methods:{updateVisible:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.visible=e,this.$emit("visible",e)},collapseOpen:function(){this.openOnHover&&this.updateVisible(!0)},collapseClose:function(){this.openOnHover&&this.updateVisible(!1)}}},$e=Me,qe=Object(_["a"])($e,je,Le,!1,null,null,null),Ue=qe.exports,Ge={props:{entityDefinition:{type:Object,required:!0},entity:{type:Object,required:!0},isPopup:{type:Boolean,default:!1},componentName:{type:String,required:!1},isEditMode:{type:Boolean,default:!1},seriesHeaderData:{type:Object,default:null,required:!1}},emits:["update:entity"],components:{BcFormField:Te,AppCollapse:Ne,AppCollapseItem:Ue},methods:{onFieldInput:function(e,t){this.$emit("update:entity",Object(A["a"])(Object(A["a"])({},this.entity),{},Object(Ce["a"])({},e,t)))}}},Ve=Ge,He=Object(_["a"])(Ve,be,ge,!1,null,null,null),We=He.exports,Ke={name:"CardPopup",props:{enableAutoSave:{type:Boolean,required:!1,default:!0},componentName:{type:String,required:!0},entityData:{type:Object,required:!1},editMode:{type:Boolean,required:!1}},components:{Form:We},data:function(){return{localEditMode:this.editMode||!1,showPopup:!1,showLoading:!1,entity:{},selectedEntity:{},entityDefinition:de(this.componentName),seriesHeaderData:null}},created:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localEditMode){t.next=3;break}return t.next=3,e.loadSeriesHeaderData();case 3:case"end":return t.stop()}}),t)})))()},watch:{showPopup:function(e){var t=this;e&&setTimeout((function(){var e=t.$refs.form.$refs.ref_0[0];e.focus()}),200)},entityData:{handler:function(e){this.entity=e,this.selectedEntity=e},immediate:!0},editMode:function(e){this.localEditMode=e}},methods:{loadSeriesHeaderData:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.hasSeriesHeaderField(),!n){t.next=7;break}return t.next=5,e.$http.get("/series_header/findByEntityName/"+e.componentName);case 5:i=t.sent,e.seriesHeaderData=i.data;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.warn("Error loading series header data:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},hasSeriesHeaderField:function(){return window.entitiesWithSeriesHeaders&&window.entitiesWithSeriesHeaders.includes(this.componentName)},reset:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.entity=e.localEditMode?e.selectedEntity:{};case 1:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.validateMandatoryFields(),!(n.length>0)){t.next=4;break}return e.$swal.fire({position:"absolute",icon:"error",title:"Champs obligatoires manquants",html:"Les champs suivants sont obligatoires :<br><ul>".concat(n.map((function(e){return"<li>".concat(e,"</li>")})).join(""),"</ul>"),showConfirmButton:!0}),t.abrupt("return");case 4:if(!e.enableAutoSave){t.next=17;break}return e.showLoading=!0,t.prev=6,i=e.seriesHeaderData?e.seriesHeaderData.no:null,t.next=10,e.$http.post(e.entityDefinition.apiURI,e.entity,{params:{seriesHeaderNo:i}});case 10:e.$refs.modal.hide();case 11:return t.prev=11,e.showLoading=!1,e.$emit("entitySaved",e.entity),t.finish(11);case 15:t.next=19;break;case 17:e.$refs.modal.hide(),e.$emit("saveClicked",e.entity);case 19:case"end":return t.stop()}}),t,null,[[6,,11,15]])})))()},validateMandatoryFields:function(){var e=this,t=[],n=[];return this.entityDefinition.tabs&&this.entityDefinition.tabs.length?this.entityDefinition.tabs.forEach((function(e){e.fields&&(n=n.concat(e.fields))})):this.entityDefinition.fields&&(n=this.entityDefinition.fields),n.forEach((function(n){if(n.mandatory){if("no"===n.field&&e.hasSeriesHeaderField())return;var i=e.entity[n.field];(!i||"string"===typeof i&&""===i.trim())&&t.push(n.label.fr||n.field)}})),t}}},Je=Ke,Ye=Object(_["a"])(Je,me,he,!1,null,null,null),Qe=Ye.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("div",{staticClass:"customizer d-none d-md-block",class:{open:e.isCustomizerOpen}},[n("b-link",{staticClass:"customizer-toggle d-flex align-items-center justify-content-center",on:{click:function(t){e.isCustomizerOpen=!e.isCustomizerOpen}}},[n("feather-icon",{staticClass:"spinner",attrs:{icon:"SettingsIcon",size:"15"}})],1),n("div",{staticClass:"customizer-section d-flex justify-content-between align-items-center"},[e._m(0),n("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon",size:"18"},on:{click:function(t){e.isCustomizerOpen=!e.isCustomizerOpen}}})],1),n("div",{staticClass:"customizer-section"},[n("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[n("span",{staticClass:"font-weight-bold"},[e._v("S'adapter à la taille de l'écran")]),n("b-form-checkbox",{staticClass:"mr-0",attrs:{name:"is-vertical-menu-collapsed",switch:"",inline:""},on:{change:function(t){return e.$emit("sizeColumnsToFit",e.localSizeColumnsToFit)}},model:{value:e.localSizeColumnsToFit,callback:function(t){e.localSizeColumnsToFit=t},expression:"localSizeColumnsToFit"}})],1),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("span",{staticClass:"font-weight-bold"},[e._v("Sélection multi-lignes")]),n("b-form-checkbox",{staticClass:"mr-0",attrs:{name:"is-vertical-menu-collapsed",switch:"",inline:""},on:{change:function(t){return e.$emit("multiRowSelectionChanged",e.localMultiRowSelection)}},model:{value:e.localMultiRowSelection,callback:function(t){e.localMultiRowSelection=t},expression:"localMultiRowSelection"}})],1)]),n("vue-perfect-scrollbar",{staticClass:"ps-customizer-area scroll-area ",attrs:{settings:e.perfectScrollbarSettings}},[n("div",{staticClass:"customizer-section mb-5"},[n("h6",{staticClass:"mb-2"},[e._v("Afficher/Masquer les colonnes")]),n("b-form-input",{staticClass:"mb-1",attrs:{placeholder:"Rechercher une colonne...",size:"sm"},on:{input:e.searchField}}),n("draggable",{staticClass:"list-group list-group-flush cursor-move",attrs:{tag:"ul"},on:{end:e.onDragEnd},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}},e._l(e.visibleColumns,(function(t,i){return n("b-list-group-item",{key:i,attrs:{tag:"li"}},[n("b-form-checkbox",{on:{change:function(n){return e.toggleColumn(t)}},model:{value:t.visible,callback:function(n){e.$set(t,"visible",n)},expression:"col.visible"}},[n("strong",[e._v(" "+e._s(t.headerName||t.colId))])])],1)})),1)],1)])],1):e._e()},Ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-uppercase mb-0"},[e._v(" Personnalisateur de liste ")]),n("small",[e._v("Personnaliser & prévisualiser en temps réel")])])}],et=n("9d63"),tt=n.n(et),nt=n("b76a"),it=n.n(nt),ot={components:{VuePerfectScrollbar:tt.a,draggable:it.a},props:{columnApi:{type:Object,required:!0},gridApi:{type:Object,required:!0},sizeColumnsToFit:{type:Boolean,default:!0},multiRowSelection:{type:Boolean,default:!1}},data:function(){return{localSizeColumnsToFit:this.sizeColumnsToFit,localMultiRowSelection:this.multiRowSelection,isCustomizerOpen:!1,visibleColumns:[],perfectScrollbarSettings:{maxScrollbarLength:60,wheelPropagation:!1},loaded:!1}},watch:{columnApi:{handler:function(e){if(null!==e&&void 0!==e&&e.getAllColumns){var t=e.getAllColumns().map((function(t){var n=e.getColumnState().find((function(e){return e.colId===t.getColId()}))||{};return{colId:t.getColId(),headerName:t.getColDef().headerName,visible:!n.hide}})).filter((function(e){return"__checkbox__"!==e.colId}));this.visibleColumns=t,this.$emit("visibleColumnsChanged",this.visibleColumns)}},immediate:!0},sizeColumnsToFit:function(e){this.localSizeColumnsToFit=e}},methods:{toggleColumn:function(e){this.columnApi&&(this.columnApi.setColumnVisible(e.colId,e.visible),this.localSizeColumnsToFit=!1)},changeColumnToFit:function(){this.$emit("sizeColumnsToFit",this.localSizeColumnsToFit)},showColumns:function(){var e=this.searchField.toLowerCase(),t=this.columnApi.getAllColumns().filter((function(t){return t.headerName.toLowerCase().includes(e)})),n=t.map((function(e){var n=t.find((function(t){return t.colId===e.getColId()}))||{};return{colId:e.getColId(),headerName:e.getColDef().headerName,visible:!n.hide}}));this.visibleColumns=n},searchField:function(e){var t=this,n=this.columnApi.getAllColumns().map((function(e){var n=t.columnApi.getColumnState().find((function(t){return t.colId===e.getColId()}))||{};return{colId:e.getColId(),headerName:e.getColDef().headerName,visible:!n.hide}}));this.visibleColumns=n.filter((function(t){return t.headerName.toLowerCase().includes(e.toLowerCase())}))},onDragEnd:function(){var e=this.visibleColumns.map((function(e,t){return{colId:e.colId,order:t,hide:!e.visible}})),t=this.columnApi.getColumnState(),n=e.map((function(e){var n=t.find((function(t){return t.colId===e.colId}));return Object(A["a"])(Object(A["a"])({},n),{},{hide:e.hide})}));this.columnApi.applyColumnState({state:n,applyOrder:!0})}},created:function(){var e=this;setTimeout((function(){e.loaded=!0}),500)}},at=ot,rt=(n("b07c"),Object(_["a"])(at,Xe,Ze,!1,null,"4f74ea10",null)),st=rt.exports,lt={components:{Breadcrumb:J,AgGrid:ae,ListCustomizer:st,CardPopup:Qe},props:{isCardLine:{type:Boolean,default:!1,required:!1},entityHeader:{type:Object,required:!1},showBreadCrumbOpenNewTab:{type:Boolean,default:!1},hideBreadCrumbPath:{type:Boolean,default:!1},componentName:{type:String,required:!0},breadcrumbData:{type:Object,required:!1},agGridData:{type:Array,required:!1},onlyListComponent:{type:Boolean},retrieveDataFromParent:{type:Boolean,default:!1},linesEnabled:{type:Boolean,default:!0}},data:function(){return{editMode:!1,entityPopup:{},filterFields:[],sizeColumnsToFit:!0,multiRowSelection:!1,agGridColumnDefs:null,showLoading:!1,hasGridConfigChanged:!1,columnApi:null,gridApi:null,localAgGridData:this.agGridData||[],localBreadcrumbData:this.breadcrumbData||{title:"",route:[]}}},mounted:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i,o,r,s,l,u,c,d,p;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.breadcrumbData||(e.localBreadcrumbData=fe(e.componentName)),window.addEventListener("beforeunload",e.handleBeforeUnload),n=ce(e.componentName),t.prev=3,t.next=6,e.$http.get("grid_config",{params:{laptopKey:"laptopKey",entity:e.componentName}});case 6:if(r=t.sent,s=r.data,null!==s&&void 0!==s&&s.configJson){t.next=11;break}return e.agGridColumnDefs=n,t.abrupt("return");case 11:l=s.configJson,"string"===typeof l&&(l=JSON.parse(l)),"string"===typeof l.configJson?l=JSON.parse(l.configJson):l.configJson&&(l=l.configJson),u=l.columnState||[],c=null===(i=l.sizeColumnsToFit)||void 0===i||i,d=null!==(o=l.multiRowSelection)&&void 0!==o&&o,e.multiRowSelection=d,e.sizeColumnsToFit=c,p=[],u.forEach((function(e){var t,i,o,a=n.find((function(t){return(t.colId||t.field)===e.colId}));a&&p.push(Object(A["a"])(Object(A["a"])({},a),{},{width:null!==(t=e.width)&&void 0!==t?t:a.width,hide:null!==(i=e.hide)&&void 0!==i?i:a.hide,pinned:null!==(o=e.pinned)&&void 0!==o?o:a.pinned}))})),n.forEach((function(e){var t=e.colId||e.field,n=p.find((function(e){return(e.colId||e.field)===t}));n||p.push(Object(A["a"])(Object(A["a"])({},e),{},{hide:!0}))})),e.multiRowSelection&&p.unshift({colId:"__checkbox__",headerName:"",checkboxSelection:!0,headerCheckboxSelection:!0,width:40,pinned:"left",resizable:!1,suppressColumnsToolPanel:!0,suppressMovable:!0,filter:!1,sortable:!1}),e.agGridColumnDefs=p,t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](3),console.log("Error loading grid config:",t.t0),e.agGridColumnDefs=n;case 30:case"end":return t.stop()}}),t,null,[[3,26]])})))()},beforeDestroy:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload),this.saveGridConfigIfChanged()},methods:{sizeColumnsToFitChanged:function(e){if(this.sizeColumnsToFit=e,this.hasGridConfigChanged=!0,e){var t=this.columnApi.getAllColumns().map((function(e){var t=e.getColDef();return{field:e.getColId(),headerName:t.headerName,width:e.getActualWidth(),flex:e.getActualWidth()/100,hide:!1===e.isVisible()}})).filter((function(e){return"__checkbox__"!==e.field}));this.multiRowSelection&&t.unshift({colId:"__checkbox__",headerName:"",checkboxSelection:!0,headerCheckboxSelection:!0,width:40,pinned:"left",resizable:!1,suppressColumnsToolPanel:!0,suppressMovable:!0,filter:!1,sortable:!1}),this.agGridColumnDefs=t}else if(this.multiRowSelection){var n=this.columnApi.getAllColumns(),i=n.filter((function(e){return"__checkbox__"!==e.getColId()})).map((function(e){return e.getColId()}));this.columnApi.autoSizeColumns(i)}else this.$refs.agGrid.gridOptions.columnApi.autoSizeAllColumns()},multiRowSelectionChanged:function(e){this.multiRowSelection=e,this.hasGridConfigChanged=!0},onColumnChanged:function(e){this.hasGridConfigChanged=!0,("columnVisible"===e.type||"columnResized"===e.type&&"uiColumnDragged"===e.source)&&(this.sizeColumnsToFit=!1)},saveGridConfigIfChanged:function(){if(this.hasGridConfigChanged){var e=this.getCurrentGridColumnConfig();e&&this.$http.post("grid_config",{configJson:e},{params:{laptopKey:"laptopKey",entity:this.componentName}})}},getCurrentGridColumnConfig:function(){if(!this.$refs.agGrid.gridOptions.columnApi)return null;var e=this.$refs.agGrid.gridOptions.columnApi.getColumnState().filter((function(e){return!1===e.hide&&"__checkbox__"!=e.colId})),t=this.gridApi.getSortModel();return{columnState:e,sortModel:t,sizeColumnsToFit:this.sizeColumnsToFit,multiRowSelection:this.multiRowSelection}},visibleColumnsChanged:function(e){this.filterFields=e.map((function(e){return{value:e.colId,text:e.headerName}}))},onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.$emit("onGridReady")},editClicked:function(){if(this.$refs.agGrid.gridApi.getSelectedRows().length>0&&this.linesEnabled){var e=this.$refs.agGrid.gridApi.getSelectedRows();this.$can("EDIT",this.componentName)&&(this.onlyListComponent?(this.editMode=!0,this.entityPopup=e[0],this.$refs.popup.$refs.modal.show(),this.$emit("editclicked",e[0])):this.$router.push({name:this.componentName+"_EDIT",params:{id:e[0].id}}))}},cellDoubleClicked:function(e){this.hideBreadCrumbPath?this.$emit("lookupItemClicked",e.data):this.$can("EDIT",this.componentName)&&this.linesEnabled&&(this.onlyListComponent?(this.editMode=!0,this.entityPopup=e.data,this.$refs.popup.$refs.modal.show(),this.$emit("editclicked",e.data)):this.$router.push({name:this.componentName+"_EDIT",params:{id:e.data.id}}))},newClicked:function(){this.onlyListComponent&&this.linesEnabled&&(this.entityPopup={},this.editMode=!1,console.log("List newClicked - entityPopup reset to:",this.entityPopup),console.log("List newClicked - editMode set to:",this.editMode),this.$refs.popup.$refs.modal.show(),this.$emit("newClicked"))},deleteClicked:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i,o,r,s,l,u,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.agGrid.gridApi,i=e.$refs.agGrid._data.gridOptions.rowData,o=n.getSelectedRows(),o.length&&e.linesEnabled){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$swal({title:"Êtes-vous sûr ?",text:"Vous allez supprimer ".concat(o.length," ligne").concat(o.length>1?"s":"","."),icon:"question",showCancelButton:!0,confirmButtonText:"Oui, supprimer !",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1});case 7:if(r=t.sent,s=r.value,s){t.next=11;break}return t.abrupt("return");case 11:return e.showLoading=!0,t.prev=12,l=o.map((function(e){return e.id})),t.next=16,Promise.all(l.map((function(t){return e.$http.delete("".concat(pe(e.componentName),"/").concat(t))})));case 16:return n.applyTransaction({remove:o}),l.forEach((function(e){var t=i.findIndex((function(t){return t.id===e}));-1!==t&&i.splice(t,1)})),t.next=20,e.$swal({title:"Suppression effectuée avec succès",icon:"success",customClass:{confirmButton:"btn btn-primary"},showClass:{popup:"animate__animated animate__flipInX"},buttonsStyling:!1});case 20:t.next=27;break;case 22:return t.prev=22,t.t0=t["catch"](12),console.error(t.t0),t.next=27,e.$swal({title:"Erreur lors de la suppression",text:null!==(u=null===(c=t.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)&&void 0!==u?u:t.t0.message,icon:"error",customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1});case 27:return t.prev=27,e.showLoading=!1,t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[12,22,27,30]])})))()},downloadClicked:function(){var e=[];this.$refs.agGrid.gridApi.forEachNodeAfterFilter((function(t){e.push(t.data)}));var t=["odata.etag","ETag","@odata.etag",""],n=e.map((function(e){var n={};for(var i in e)t.includes(i)||(n[i]=e[i]);return n})),i=Object.keys(n[0]),o=n.map((function(e){return Object.values(e)}));o.unshift(i);var a=re["a"].aoa_to_sheet(o),r=re["a"].book_new();re["a"].book_append_sheet(r,a,"Sheet1");var s=re["b"](r,{bookType:"xlsx",type:"array"}),l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});le.a.saveAs(l,this.componentName+".xlsx")},printClicked:function(){var e=this.$refs.agGrid.gridOptions.columnApi.getAllDisplayedColumns(),t=[];this.$refs.agGrid.gridApi.forEachNodeAfterFilter((function(e){t.push(e.data)}));var n=["odata.etag","ETag","@odata.etag",""],i="<html><head>\n                <title>".concat(this.componentName,"</title>\n                <style>\n                  /* Add your CSS styles here */\n                  table {\n                    border-collapse: collapse;\n                    width: 100%;\n                  }\n\n                  th, td {\n                    border: 1px solid black;\n                    padding: 8px;\n                    text-align: left;\n                  }\n\n                  th {\n                    background-color: lightgray;\n                  }\n                </style>\n              </head><body>");i+="<table>",i+="<thead><tr>",e.forEach((function(e){var t=e.getColDef().field;n.includes(t)||(i+="<th>".concat(t,"</th>"))})),i+="</tr></thead>",i+="<tbody>",t.forEach((function(t){i+="<tr>",e.forEach((function(e){var o=e.getColDef().field;n.includes(o)||(i+="<td>".concat(t[o],"</td>"))})),i+="</tr>"})),i+="</tbody>",i+="</table></body></html>";var o=window.open("","_blank");o.document.open(),o.document.write(i),o.document.close(),o.print()},updateSearchQuery:function(e){this.$refs.agGrid.gridApi.setQuickFilter(e)},filterSearchChnaged:function(e){var t={};e.forEach((function(e){e.value&&(t[e.parameter]={filterType:"text",type:"contains",filter:e.value})})),this.$refs.agGrid.gridApi.setFilterModel(t)},handleBeforeUnload:function(){this.saveGridConfigIfChanged()},loadData:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isCardLine){t.next=13;break}if(!e.entityHeader||!e.entityHeader.id){t.next=10;break}return e.showLoading=!0,t.next=5,e.$http.get(pe(e.componentName)+"/findByField",{params:{fieldName:"documentId",operation:"=",value:e.entityHeader.id}});case 5:n=t.sent,e.localAgGridData=n.data,e.showLoading=!1,t.next=11;break;case 10:e.localAgGridData=[];case 11:t.next=19;break;case 13:return e.showLoading=!0,t.next=16,e.$http.get(pe(e.componentName));case 16:i=t.sent,e.localAgGridData=i.data,e.showLoading=!1;case 19:case"end":return t.stop()}}),t)})))()}},created:function(){this.retrieveDataFromParent||this.loadData()}},ut=lt,ct=(n("9a78"),Object(_["a"])(ut,q,U,!1,null,"d9d581aa",null)),dt=ct.exports,pt={name:"EntityLookup",props:{columnDefs:{type:Array,required:!1,default:function(){return[{headerName:"N°",field:"no"},{headerName:"Description",field:"description"}]}},field:{type:String,required:!1},componentName:{type:String,required:!0},apiURI:{type:String,required:!0},selectedItem:{required:!0,default:""},size:{type:String,required:!1,default:"sm"},lookupSize:{type:String,required:!1,default:"xl"},title:{type:String,required:!1},disabled:{type:Boolean,default:!1,required:!1}},components:{List:dt},data:function(){return{localValue:this.selectedItem,localLookupSize:this.lookupSize,agGridData:{columnDefs:this.columnDefs,rows:[]},loadedComponent:null}},mounted:function(){},watch:{selectedItem:{handler:function(e){this.localValue=e},deep:!0}},methods:{openInNewTab:function(){var e=this.$router.resolve({name:this.componentName+"_READ"}).href;window.open(e,"_blank")},changeModalSize:function(){var e=this;"sm"==this.localLookupSize?this.localLookupSize="lg":"lg"==this.localLookupSize?this.localLookupSize="xl":this.localLookupSize="sm",setTimeout((function(){e.$refs.agGrid.gridApi.sizeColumnsToFit()}),200)},openModal:function(){this.disabled||this.$refs["modal"].show()},getData:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.get(e.apiURI).then((function(t){e.agGridData.rows=t.data}));case 1:case"end":return t.stop()}}),t)})))()},updateSearchQuery:function(e){this.$refs.agGrid.gridApi.setQuickFilter(e)},cellDoubleClicked:function(e){this.$refs.modal.hide(),this.localValue=e.no,this.$emit("onItemSelected",e,this.field)},onGridReady:function(){this.getData()},refresh:function(){this.$refs.agGrid.gridApi.showLoadingOverlay(),this.getData()}},computed:{lookupSizeIcon:function(){return"sm"==this.localLookupSize?"Maximize2Icon":"lg"==this.localLookupSize?"MaximizeIcon":"MinimizeIcon"}}},ft=pt,mt=(n("ab05"),Object(_["a"])(ft,M,$,!1,null,"0a7a4419",null)),ht=mt.exports;s["default"].use(d["a"]),s["default"].use(l["a"]),s["default"].use(u["a"]),s["default"].use(c["default"]),s["default"].component("EntityLookup",ht),n("4131"),n("78a7"),s["default"].config.productionTip=!1;var bt=new s["default"];Object(r["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n=document.createElement("script");n.src="/config/entities-config.js",n.onload=e,n.onerror=function(){console.error("❌ Failed to load entities-config.js"),t()},document.head.appendChild(n)}));case 2:new s["default"]({router:p["a"],store:f["default"],render:function(e){return e(O)}}).$mount("#app");case 3:case"end":return e.stop()}}),e)})))()},6872:function(e,t,n){"use strict";n("226d")},7100:function(e,t,n){"use strict";var i=n("5530"),o=n("d4ec"),a=n("bee2"),r=n("ade3"),s=(n("99af"),n("4de4"),n("e9c4"),n("d3b7"),{loginEndpoint:"/login",registerEndpoint:"/jwt/register",refreshEndpoint:"/jwt/refresh-token",logoutEndpoint:"/jwt/logout",tokenType:"Bearer",storageTokenKeyName:"accessToken",storageRefreshTokenKeyName:"refreshToken"}),l=n("56d7"),u=function(){function e(t,n){var a=this;Object(o["a"])(this,e),Object(r["a"])(this,"axiosIns",null),Object(r["a"])(this,"jwtConfig",Object(i["a"])({},s)),Object(r["a"])(this,"isAlreadyFetchingAccessToken",!1),Object(r["a"])(this,"subscribers",[]),this.axiosIns=t,this.jwtConfig=Object(i["a"])(Object(i["a"])({},this.jwtConfig),n),this.axiosIns.interceptors.request.use((function(e){var t=a.getToken();return t&&(e.headers.Authorization="".concat(a.jwtConfig.tokenType," ").concat(t)),e}),(function(e){return Promise.reject(e)})),this.axiosIns.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,n=e.response;l["eventBus"].$emit("show-sweetalert-error",n);var i=t;if(n&&401===n.status){a.isAlreadyFetchingAccessToken||(a.isAlreadyFetchingAccessToken=!0,a.refreshToken().then((function(e){a.isAlreadyFetchingAccessToken=!1,a.setToken(e.data.accessToken),a.setRefreshToken(e.data.refreshToken),a.onAccessTokenFetched(e.data.accessToken)})));var o=new Promise((function(e){a.addSubscriber((function(t){i.headers.Authorization="".concat(a.jwtConfig.tokenType," ").concat(t),e(a.axiosIns(i))}))}));return o}return Promise.reject(e)}))}return Object(a["a"])(e,[{key:"onAccessTokenFetched",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t(e)}))}},{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"getToken",value:function(){return localStorage.getItem(this.jwtConfig.storageTokenKeyName)}},{key:"getRefreshToken",value:function(){return localStorage.getItem(this.jwtConfig.storageRefreshTokenKeyName)}},{key:"setToken",value:function(e){localStorage.setItem(this.jwtConfig.storageTokenKeyName,e)}},{key:"setUserData",value:function(e){localStorage.setItem("userData",JSON.stringify(e))}},{key:"setRefreshToken",value:function(e){localStorage.setItem(this.jwtConfig.storageRefreshTokenKeyName,e)}},{key:"login",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.axiosIns.post(this.jwtConfig.loginEndpoint+"",null,{headers:{username:t[0].username,password:t[0].password}})}},{key:"register",value:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=this.axiosIns).post.apply(e,[this.jwtConfig.registerEndpoint].concat(n))}},{key:"refreshToken",value:function(){return this.axiosIns.post(this.jwtConfig.refreshEndpoint,{refreshToken:this.getRefreshToken()})}},{key:"logout",value:function(){localStorage.removeItem(this.jwtConfig.storageTokenKeyName),localStorage.removeItem(this.jwtConfig.storageRefreshTokenKeyName),localStorage.removeItem("userData")}}])}();function c(e,t){var n=new u(e,t);return{jwt:n}}var d=n("7f80"),p=c(d["default"],{}),f=p.jwt;t["a"]=f},"78a7":function(e,t,n){},"7f80":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=n("bc3a"),a=n.n(o),r=a.a.create({baseURL:"/posws/"});i["default"].prototype.$http=r,t["default"]=r},8675:function(e,t,n){},"8b71":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));n("b64b");var i=n("7100"),o=function(){return localStorage.getItem("userData")&&localStorage.getItem(i["a"].jwtConfig.storageTokenKeyName)},a=function(){return JSON.parse(localStorage.getItem("userData"))},r=function(e){return"POS_USER"===e?{name:"pos-item-selection"}:"RESPONSIBLE"===e?{name:"responsible-sessions"}:"ADMIN"===e?{name:"admin-sessions"}:{name:"login"}}},"8fdc":function(e,t,n){},"925e":function(e,t,n){"use strict";n("f333")},"9a78":function(e,t,n){"use strict";n("43f3")},"9dee":function(e,t){},a18c:function(e,t,n){"use strict";var i=n("c7eb"),o=n("1da1"),a=(n("caad"),n("b0c0"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0"),n("2b0e")),r=n("8c4f"),s=n("8b71"),l=n("d680"),u=function(e){return e.matched.some((function(e){return l["a"].can(e.meta.action,e.meta.resource)||void 0==e.meta.resource}))};a["default"].use(r["a"]);var c=new r["a"]({mode:"history",base:"/",scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"/pos/open-session",name:"pos-open-session",component:function(){return n.e("chunk-2c6de018").then(n.bind(null,"e76f"))},meta:{requiresAuth:!0,requiredRole:"POS_USER",skipSessionCheck:!0,hideNavMenu:!0}},{path:"/pos/items",name:"pos-item-selection",component:function(){return n.e("chunk-70d4f87e").then(n.bind(null,"6f31"))},meta:{requiresAuth:!0,requiredRole:"POS_USER",requiresSession:!0,hideNavMenu:!0}},{path:"/pos/customers",name:"pos-customers",component:function(){return n.e("chunk-d2595d6e").then(n.bind(null,"8199"))},meta:{requiresAuth:!0,requiredRole:"POS_USER",requiresSession:!0,hideNavMenu:!0}},{path:"/admin/customers",name:"admin-customers",component:function(){return n.e("chunk-d2595d6e").then(n.bind(null,"8199"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN","RESPONSIBLE"]}},{path:"/pos/payment",name:"pos-payment",component:function(){return Promise.all([n.e("chunk-22421e23"),n.e("chunk-9fec372c")]).then(n.bind(null,"f304"))},meta:{requiresAuth:!0,requiredRole:"POS_USER",requiresSession:!0,hideNavMenu:!0}},{path:"/pos/return",name:"pos-return",component:function(){return Promise.all([n.e("chunk-22421e23"),n.e("chunk-71903056")]).then(n.bind(null,"627b"))},meta:{requiresAuth:!0,requiredRole:"POS_USER",requiresSession:!0,hideNavMenu:!0}},{path:"/",name:"home",component:function(){return n.e("chunk-2d21a3d2").then(n.bind(null,"bb51"))}},{path:"/admin/users",name:"admin-users",component:function(){return n.e("chunk-3bc99379").then(n.bind(null,"58ff"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/admin/sessions",name:"admin-sessions",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-280c29d6")]).then(n.bind(null,"41db"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/admin/sessions/history",name:"admin-sessions-history",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-58c57485")]).then(n.bind(null,"4c74"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/tickets/history",name:"tickets-history",component:function(){return Promise.all([n.e("chunk-22421e23"),n.e("chunk-eeafe182")]).then(n.bind(null,"e3d0"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN","RESPONSIBLE"]}},{path:"/admin/item-barcodes",name:"admin-item-barcodes",component:function(){return n.e("chunk-9baffa62").then(n.bind(null,"8c72"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN","RESPONSIBLE"]}},{path:"/admin/item-families",name:"admin-item-families",component:function(){return n.e("chunk-0d4d49a6").then(n.bind(null,"d1e76"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/admin/item-subfamilies",name:"admin-item-subfamilies",component:function(){return n.e("chunk-61e345f4").then(n.bind(null,"0570"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/admin/locations",name:"admin-locations",component:function(){return n.e("chunk-cae318d8").then(n.bind(null,"b25a"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/admin/payment-methods",name:"admin-payment-methods",component:function(){return n.e("chunk-29250da6").then(n.bind(null,"53b2"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/admin/general-setup",name:"admin-general-setup",component:function(){return n.e("chunk-126a2044").then(n.bind(null,"a8b6"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN"]}},{path:"/admin/erp-jobs",name:"admin-erp-jobs",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-5df1258f")]).then(n.bind(null,"bc74"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/admin/erp-jobs/statistics/:jobId?",name:"erp-job-statistics",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-46bd009e")]).then(n.bind(null,"08bd"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/admin/erp-communications",name:"admin-erp-communications",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-de41b178")]).then(n.bind(null,"8f24"))},meta:{requiresAuth:!0,requiredRole:"ADMIN"}},{path:"/admin/returns",name:"admin-returns",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-22421e23"),n.e("chunk-ff2d1a3e")]).then(n.bind(null,"1421"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN","RESPONSIBLE"]}},{path:"/responsible/sessions",name:"responsible-sessions",component:function(){return Promise.all([n.e("chunk-135f7500"),n.e("chunk-280c29d6")]).then(n.bind(null,"41db"))},meta:{requiresAuth:!0,allowedRoles:["ADMIN","RESPONSIBLE"]}},{path:"/login",name:"login",component:function(){return n.e("chunk-15e290d2").then(n.bind(null,"a55b"))},meta:{layout:"full",redirectIfLoggedIn:!0}},{path:"/not-authorized",name:"misc-not-authorized",component:function(){return n.e("chunk-802162b8").then(n.bind(null,"9784"))},meta:{layout:"full"}},{path:"/error-404",name:"error-404",component:function(){return n.e("chunk-d73191b6").then(n.bind(null,"d80f"))},meta:{layout:"full"}},{path:"*",redirect:"error-404"}]});c.beforeEach(function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(t,o,a){var r,l,c,d,p,f,m,h,b,g,C,v;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(s["c"])(),r||"login"===t.name){e.next=3;break}return e.abrupt("return",a({name:"login"}));case 3:if(!t.meta.requiredRole){e.next=7;break}if(l=Object(s["b"])(),l&&l.role===t.meta.requiredRole){e.next=7;break}return e.abrupt("return",a({name:"misc-not-authorized"}));case 7:if(!t.meta.allowedRoles||!Array.isArray(t.meta.allowedRoles)){e.next=11;break}if(c=Object(s["b"])(),c&&t.meta.allowedRoles.includes(c.role)){e.next=11;break}return e.abrupt("return",a({name:"misc-not-authorized"}));case 11:if(!t.meta.requiresSession||t.meta.skipSessionCheck){e.next=27;break}if(d=Object(s["b"])(),!d||"POS_USER"!==d.role){e.next=27;break}if(p=n("4360").default,f=p.getters["pos/isSessionChecked"],m=p.getters["pos/hasOpenSession"],f){e.next=25;break}return e.next=20,p.dispatch("pos/checkSession");case 20:if(h=e.sent,h){e.next=23;break}return e.abrupt("return",a({name:"pos-open-session"}));case 23:e.next=27;break;case 25:if(m){e.next=27;break}return e.abrupt("return",a({name:"pos-open-session"}));case 27:if(!t.meta.redirectIfLoggedIn||!r){e.next=31;break}return b=Object(s["b"])(),g=Object(s["a"])(null===b||void 0===b?void 0:b.role),e.abrupt("return",a(g));case 31:if(!r||"home"!==t.name){e.next=36;break}if(C=Object(s["b"])(),v=Object(s["a"])(null===C||void 0===C?void 0:C.role),"home"===v.name){e.next=36;break}return e.abrupt("return",a(v));case 36:if(u(t)){e.next=38;break}return e.abrupt("return",a({name:"misc-not-authorized"}));case 38:return e.abrupt("return",a());case 39:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}());t["a"]=c},ab05:function(e,t,n){"use strict";n("2184")},ada0:function(e,t,n){},b07c:function(e,t,n){"use strict";n("ada0")},b8f2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ed09"),o=n("4360");function a(){var e=Object(i["computed"])({get:function(){return o["default"].state.verticalMenu.isVerticalMenuCollapsed},set:function(e){o["default"].commit("verticalMenu/UPDATE_VERTICAL_MENU_COLLAPSED",e)}}),t=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.isRTL},set:function(e){o["default"].commit("appConfig/TOGGLE_RTL",e)}}),n=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.skin},set:function(e){o["default"].commit("appConfig/UPDATE_SKIN",e)}}),a=Object(i["computed"])((function(){return"bordered"===n.value?"bordered-layout":"semi-dark"===n.value?"semi-dark-layout":null})),r=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.routerTransition},set:function(e){o["default"].commit("appConfig/UPDATE_ROUTER_TRANSITION",e)}}),s=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.type},set:function(e){o["default"].commit("appConfig/UPDATE_LAYOUT_TYPE",e)}});Object(i["watch"])(s,(function(e){"horizontal"===e&&"semi-dark"===n.value&&(n.value="light")}));var l=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.contentWidth},set:function(e){o["default"].commit("appConfig/UPDATE_CONTENT_WIDTH",e)}}),u=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.menu.hidden},set:function(e){o["default"].commit("appConfig/UPDATE_NAV_MENU_HIDDEN",e)}}),c=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.navbar.backgroundColor},set:function(e){o["default"].commit("appConfig/UPDATE_NAVBAR_CONFIG",{backgroundColor:e})}}),d=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.navbar.type},set:function(e){o["default"].commit("appConfig/UPDATE_NAVBAR_CONFIG",{type:e})}}),p=Object(i["computed"])({get:function(){return o["default"].state.appConfig.layout.footer.type},set:function(e){o["default"].commit("appConfig/UPDATE_FOOTER_CONFIG",{type:e})}});return{isVerticalMenuCollapsed:e,isRTL:t,skin:n,skinClasses:a,routerTransition:r,navbarBackgroundColor:c,navbarType:d,footerType:p,layoutType:s,contentWidth:l,isNavMenuHidden:u}}},cc0f:function(e,t,n){},cf36:function(e,t,n){},d680:function(e,t,n){"use strict";n("b64b");var i=n("4b58"),o=n("ff93"),a=JSON.parse(localStorage.getItem("userData")),r=a?a.abilities:null;t["a"]=new i["a"](r||o["a"])},ed29:function(e,t,n){e.exports=n.p+"img/logo.ce7c298d.svg"},f333:function(e,t,n){},ff93:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=[{action:"read",subject:"Auth"}]}});
//# sourceMappingURL=app.3bdea8c4.js.map