(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-280c29d6"],{1148:function(s,t,e){"use strict";var a=e("a691"),i=e("1d80");s.exports="".repeat||function(s){var t=String(i(this)),e="",n=a(s);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(e+=t);return e}},"13d5":function(s,t,e){"use strict";var a=e("23e7"),i=e("d58f").left,n=e("a640"),o=e("ae40"),r=e("2d00"),l=e("605d"),c=n("reduce"),u=o("reduce",{1:0}),d=!l&&r>79&&r<83;a({target:"Array",proto:!0,forced:!c||!u||d},{reduce:function(s){return i(this,s,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"408a":function(s,t,e){var a=e("c6b6");s.exports=function(s){if("number"!=typeof s&&"Number"!=a(s))throw TypeError("Incorrect invocation");return+s}},"41db":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"session-dashboard-container"},[e("div",{staticClass:"page-header"},[e("h2",{staticClass:"mb-0"},[s._v("Session Dashboard")]),e("b-button",{attrs:{variant:"outline-primary"},on:{click:s.loadSessions}},[e("feather-icon",{attrs:{icon:"RefreshCwIcon",size:"16"}}),s._v(" Refresh ")],1)],1),!s.loading&&s.filteredSessions.length>0?e("div",{staticClass:"sessions-grid"},s._l(s.filteredSessions,(function(t){return e("b-card",{key:t.id,staticClass:"session-card mb-3",on:{click:function(e){return s.viewSessionDetails(t)}}},[e("div",{staticClass:"session-card-header"},[e("div",{staticClass:"session-number"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"ClockIcon",size:"18"}}),e("strong",[s._v(s._s(t.sessionNumber))])],1),e("b-badge",{staticClass:"status-badge",attrs:{variant:s.getStatusBadgeVariant(t.status)}},[s._v(" "+s._s(t.status)+" ")])],1),e("div",{staticClass:"session-card-body"},[e("div",{staticClass:"session-info-row"},[e("div",{staticClass:"info-item"},[e("feather-icon",{attrs:{icon:"UserIcon",size:"16"}}),e("span",{staticClass:"label"},[s._v("Cashier:")]),e("span",{staticClass:"value"},[s._v(s._s(t.cashierFullName||t.cashierUsername))])],1)]),e("div",{staticClass:"session-info-row"},[e("div",{staticClass:"info-item"},[e("feather-icon",{attrs:{icon:"CalendarIcon",size:"16"}}),e("span",{staticClass:"label"},[s._v("Opened:")]),e("span",{staticClass:"value"},[s._v(s._s(s.formatDateTime(t.openedAt)))])],1),t.closedAt?e("div",{staticClass:"info-item"},[e("feather-icon",{attrs:{icon:"CalendarIcon",size:"16"}}),e("span",{staticClass:"label"},[s._v("Closed:")]),e("span",{staticClass:"value"},[s._v(s._s(s.formatDateTime(t.closedAt)))])],1):s._e()]),e("div",{staticClass:"session-stats"},[e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[s._v("Sales")]),e("div",{staticClass:"stat-value"},[s._v(s._s(t.salesCount||0))])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[s._v("Total Sales")]),e("div",{staticClass:"stat-value text-primary"},[s._v("TND "+s._s(s.formatPrice(t.totalSalesAmount||0)))])]),t.returnsCount>0?e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-label"},[s._v("Returns")]),e("div",{staticClass:"stat-value text-danger"},[s._v(s._s(t.returnsCount||0))])]):s._e()]),t.returnsCount>0?e("div",{staticClass:"returns-summary"},[e("div",{staticClass:"returns-header"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"RotateCcwIcon",size:"16"}}),e("strong",[s._v("Returns Information")])],1),e("div",{staticClass:"returns-row"},[e("span",{staticClass:"returns-label"},[s._v("Total Returns:")]),e("span",{staticClass:"returns-value text-danger"},[s._v("TND "+s._s(s.formatPrice(t.totalReturnsAmount||0)))])]),t.simpleReturnsAmount>0?e("div",{staticClass:"returns-row"},[e("span",{staticClass:"returns-label"},[s._v("Simple Returns (Cash):")]),e("span",{staticClass:"returns-value text-danger"},[s._v("TND "+s._s(s.formatPrice(t.simpleReturnsAmount||0)))])]):s._e(),t.voucherReturnsAmount>0?e("div",{staticClass:"returns-row"},[e("span",{staticClass:"returns-label"},[s._v("Voucher Returns:")]),e("span",{staticClass:"returns-value text-info"},[s._v("TND "+s._s(s.formatPrice(t.voucherReturnsAmount||0)))])]):s._e()]):s._e(),e("div",{staticClass:"cash-summary"},[e("div",{staticClass:"cash-row"},[e("span",{staticClass:"cash-label"},[s._v("Real Cash:")]),e("span",{staticClass:"cash-value"},[s._v("TND "+s._s(s.formatPrice(t.realCash||0)))])]),t.posUserClosureCash?e("div",{staticClass:"cash-row"},[e("span",{staticClass:"cash-label"},[s._v("POS Closure:")]),e("span",{staticClass:"cash-value"},[s._v("TND "+s._s(s.formatPrice(t.posUserClosureCash)))])]):s._e(),t.responsibleClosureCash?e("div",{staticClass:"cash-row"},[e("span",{staticClass:"cash-label"},[s._v("Resp Closure:")]),e("span",{staticClass:"cash-value"},[s._v("TND "+s._s(s.formatPrice(t.responsibleClosureCash)))])]):s._e(),null!==t.cashDifference&&void 0!==t.cashDifference?e("div",{staticClass:"cash-row"},[e("span",{staticClass:"cash-label"},[s._v("Difference:")]),e("span",{staticClass:"cash-value",class:s.getDifferenceClass(t.cashDifference)},[s._v(" TND "+s._s(s.formatPrice(t.cashDifference))+" ")])]):s._e()])]),e("div",{staticClass:"session-card-footer"},[e("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.stopPropagation(),s.viewSessionDetails(t)}}},[s._v(" View Details ")])],1)])})),1):s.loading?e("b-card",{staticClass:"text-center py-5"},[e("div",{staticClass:"text-center my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",{staticClass:"d-block mt-2"},[s._v("Loading...")])],1)]):e("b-card",{staticClass:"text-center py-5"},[e("feather-icon",{staticClass:"text-muted mb-3",attrs:{icon:"InboxIcon",size:"48"}}),e("h5",{staticClass:"text-muted"},[s._v("No Active Sessions")]),e("p",{staticClass:"text-muted mb-0"},[s._v("There are no open or closed sessions at the moment.")])],1),e("b-modal",{attrs:{title:"Session Details",size:"xl"},on:{hide:s.resetDetailsForm},scopedSlots:s._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between w-100"},[e("div"),e("div",[e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:function(t){s.showDetailsModal=!1}}},[s._v(" Close ")]),s.sessionDetails&&"CLOSED"===s.sessionDetails.session.status&&!s.sessionDetails.session.responsibleClosureCash?e("b-button",{attrs:{variant:"success",disabled:!s.canVerify},on:{click:s.verifySession}},[e("feather-icon",{staticClass:"mr-50",attrs:{icon:"CheckIcon",size:"16"}}),s._v(" Verify Session ")],1):s._e()],1)])]},proxy:!0}]),model:{value:s.showDetailsModal,callback:function(t){s.showDetailsModal=t},expression:"showDetailsModal"}},[s.sessionDetails?e("div",{staticClass:"session-details"},[e("b-card",{staticClass:"mb-3"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("h4",{staticClass:"mb-0"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"ClockIcon",size:"20"}}),s._v(" "+s._s(s.sessionDetails.session.sessionNumber)+" ")],1),e("b-badge",{staticStyle:{"font-size":"0.9rem",padding:"6px 12px"},attrs:{variant:s.getStatusBadgeVariant(s.sessionDetails.session.status)}},[s._v(" "+s._s(s.sessionDetails.session.status)+" ")])],1),e("b-row",[e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"info-section"},[e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"UserIcon",size:"16"}}),e("strong",[s._v("Cashier:")]),s._v(" "+s._s(s.sessionDetails.session.cashierName)+" ")],1),e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"CalendarIcon",size:"16"}}),e("strong",[s._v("Opened:")]),s._v(" "+s._s(s.formatDateTime(s.sessionDetails.session.openedAt))+" ")],1),s.sessionDetails.session.closedAt?e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"CalendarIcon",size:"16"}}),e("strong",[s._v("Closed:")]),s._v(" "+s._s(s.formatDateTime(s.sessionDetails.session.closedAt))+" ")],1):s._e()])]),e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"info-section"},[e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"DollarSignIcon",size:"16"}}),e("strong",[s._v("Opening Cash:")]),s._v(" "),e("span",{staticClass:"text-primary"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.session.openingCash)))])],1),e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"DollarSignIcon",size:"16"}}),e("strong",[s._v("Real Cash:")]),s._v(" "),e("span",{staticClass:"text-success"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.session.realCash)))])],1),s.sessionDetails.session.posUserClosureCash?e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"DollarSignIcon",size:"16"}}),e("strong",[s._v("POS Closure:")]),s._v(" "),e("span",{staticClass:"text-info"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.session.posUserClosureCash)))])],1):s._e(),s.sessionDetails.session.responsibleClosureCash?e("div",{staticClass:"info-item mb-2"},[e("feather-icon",{staticClass:"mr-2 text-muted",attrs:{icon:"DollarSignIcon",size:"16"}}),e("strong",[s._v("Resp Closure:")]),s._v(" "),e("span",{staticClass:"text-warning"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.session.responsibleClosureCash)))])],1):s._e()])])],1)],1),e("b-card",{staticClass:"mb-3"},[e("h5",{staticClass:"mb-3"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"ShoppingCartIcon",size:"18"}}),s._v(" Sales & Returns Summary ")],1),e("b-row",[e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box"},[e("div",{staticClass:"stat-label"},[s._v("Sales Count")]),e("div",{staticClass:"stat-value text-primary"},[s._v(s._s(s.sessionDetails.salesCount||0))])])]),e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box"},[e("div",{staticClass:"stat-label"},[s._v("Total Sales")]),e("div",{staticClass:"stat-value text-primary",staticStyle:{"font-size":"1.3rem"}},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.totalSalesAmount)))])])])],1),s.sessionDetails.returnsCount>0?e("b-row",{staticClass:"mt-3"},[e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box mb-2"},[e("div",{staticClass:"stat-label"},[s._v("Returns Count")]),e("div",{staticClass:"stat-value text-danger"},[s._v(s._s(s.sessionDetails.returnsCount))])])]),e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box mb-2"},[e("div",{staticClass:"stat-label"},[s._v("Total Returns")]),e("div",{staticClass:"stat-value text-danger"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.totalReturnsAmount)))])])]),s.sessionDetails.simpleReturnsAmount>0?e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box mb-2"},[e("div",{staticClass:"stat-label small"},[s._v("Simple Returns (Cash)")]),e("div",{staticClass:"stat-value text-danger small"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.simpleReturnsAmount)))])])]):s._e(),s.sessionDetails.voucherReturnsAmount>0?e("b-col",{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"stat-box"},[e("div",{staticClass:"stat-label small"},[s._v("Voucher Returns")]),e("div",{staticClass:"stat-value text-info small"},[s._v("TND "+s._s(s.formatPrice(s.sessionDetails.voucherReturnsAmount)))])])]):s._e()],1):s._e()],1),s.posUserCashCounts.length>0?e("b-card",{staticClass:"mb-3"},[e("h5",{staticClass:"mb-3"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"UserIcon",size:"18"}}),s._v(" Cash Count - POS User ")],1),e("b-table",{staticClass:"mb-0",attrs:{items:s.posUserCashCounts,fields:s.cashCountFields,small:"",striped:"",bordered:"",responsive:""},scopedSlots:s._u([{key:"cell(paymentMethod)",fn:function(t){return[s._v(" "+s._s(t.item.paymentMethod?t.item.paymentMethod.name:"Cash")+" ")]}},{key:"cell(lineTotal)",fn:function(t){return[e("strong",[s._v("TND "+s._s(s.formatPrice(t.item.lineTotal)))])]}},{key:"cell(counterType)",fn:function(t){return[e("b-badge",{attrs:{variant:"info"}},[s._v(s._s(t.item.counterType))])]}}],null,!1,1784026807)}),e("div",{staticClass:"mt-3"},[e("div",{staticClass:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[e("strong",[s._v("Total Counted:")]),e("strong",{staticStyle:{"font-size":"1.2rem"}},[s._v("TND "+s._s(s.formatPrice(s.posUserCashCountsTotal)))])])])],1):s._e(),"CLOSED"!==s.sessionDetails.session.status||s.sessionDetails.session.responsibleClosureCash?s._e():e("b-card",{staticClass:"mb-3"},[e("h5",{staticClass:"mb-3"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"CheckCircleIcon",size:"18"}}),s._v(" Verify Session ")],1),e("div",{staticClass:"mb-4"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("h6",{staticClass:"mb-0"},[s._v("Add Responsible Cash Count")]),e("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:s.addResponsibleCashCountLine}},[e("feather-icon",{staticClass:"mr-50",attrs:{icon:"PlusIcon",size:"14"}}),s._v(" Add Line ")],1)],1),e("div",{staticClass:"cash-count-table-container"},[s.responsibleCashCountForm.length>0?e("b-table",{staticClass:"mb-0",attrs:{items:s.responsibleCashCountForm,fields:s.cashCountFieldsForm,small:"",striped:"",bordered:"",responsive:""},scopedSlots:s._u([{key:"cell(denominationValue)",fn:function(t){return[e("b-input-group",{attrs:{prepend:"TND",size:"sm"}},[e("b-form-input",{attrs:{type:"number",step:"0.01",min:"0",size:"sm",placeholder:"0.00"},model:{value:t.item.denominationValue,callback:function(e){s.$set(t.item,"denominationValue",s._n(e))},expression:"row.item.denominationValue"}})],1)]}},{key:"cell(quantity)",fn:function(t){return[e("b-form-input",{attrs:{type:"number",min:"1",size:"sm",placeholder:"0"},model:{value:t.item.quantity,callback:function(e){s.$set(t.item,"quantity",s._n(e))},expression:"row.item.quantity"}})]}},{key:"cell(paymentMethod)",fn:function(t){return[e("b-form-select",{attrs:{options:s.paymentMethodOptionsWithCash,"value-field":"id","text-field":"name",size:"sm"},model:{value:t.item.paymentMethodId,callback:function(e){s.$set(t.item,"paymentMethodId",e)},expression:"row.item.paymentMethodId"}})]}},{key:"cell(referenceNumber)",fn:function(t){return[e("b-form-input",{attrs:{placeholder:"Check #, Card last 4...",size:"sm"},model:{value:t.item.referenceNumber,callback:function(e){s.$set(t.item,"referenceNumber",e)},expression:"row.item.referenceNumber"}})]}},{key:"cell(lineTotal)",fn:function(t){return[e("strong",[s._v("TND "+s._s(s.formatPrice((t.item.denominationValue||0)*(t.item.quantity||0))))])]}},{key:"cell(actions)",fn:function(t){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger p-0",attrs:{variant:"link",size:"sm",title:"Remove line"},on:{click:function(e){return s.removeResponsibleCashCountLine(t.index)}}},[e("feather-icon",{attrs:{icon:"XIcon",size:"16"}})],1)]}}],null,!1,3126004036)}):e("div",{staticClass:"text-center text-muted py-4"},[e("feather-icon",{staticClass:"mb-2 text-muted",attrs:{icon:"FileTextIcon",size:"48"}}),e("p",{staticClass:"mb-0"},[s._v("No cash count lines added yet")])],1)],1),s.responsibleCashCountForm.length>0?e("div",{staticClass:"mt-3"},[e("div",{staticClass:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[e("strong",[s._v("Total:")]),e("strong",{staticStyle:{"font-size":"1.2rem"}},[s._v("TND "+s._s(s.formatPrice(s.calculatedResponsibleTotal)))])])]):s._e()]),e("b-form",[e("b-form-group",{attrs:{label:"Responsible Closure Cash","label-for":"responsible-closure-cash"}},[e("b-input-group",{attrs:{prepend:"TND"}},[e("b-form-input",{attrs:{id:"responsible-closure-cash",type:"number",step:"0.01",min:"0",placeholder:"Enter counted cash"},model:{value:s.verificationForm.responsibleClosureCash,callback:function(t){s.$set(s.verificationForm,"responsibleClosureCash",s._n(t))},expression:"verificationForm.responsibleClosureCash"}})],1)],1),e("b-form-group",{attrs:{label:"Verification Notes","label-for":"verification-notes"}},[e("b-form-textarea",{attrs:{id:"verification-notes",rows:"3",placeholder:"Enter any notes about the verification..."},model:{value:s.verificationForm.verificationNotes,callback:function(t){s.$set(s.verificationForm,"verificationNotes",t)},expression:"verificationForm.verificationNotes"}})],1)],1)],1)],1):s._e()])],1)},i=[],n=e("c7eb"),o=e("1da1"),r=e("2909"),l=(e("99af"),e("4de4"),e("13d5"),e("a434"),e("b680"),e("d3b7"),e("c1df")),c=e.n(l),u=e("223c"),d={name:"SessionDashboard",data:function(){return{sessions:[],loading:!1,showDetailsModal:!1,sessionDetails:null,paymentMethods:[],verificationForm:{responsibleClosureCash:null,verificationNotes:""},responsibleCashCountForm:[],cashCountFields:[{key:"denominationValue",label:"Value"},{key:"quantity",label:"Qty"},{key:"paymentMethod",label:"Payment Method"},{key:"referenceNumber",label:"Reference"},{key:"lineTotal",label:"Total"},{key:"counterType",label:"Counter"}],cashCountFieldsForm:[{key:"denominationValue",label:"Value"},{key:"quantity",label:"Qty"},{key:"paymentMethod",label:"Payment Method"},{key:"referenceNumber",label:"Reference"},{key:"lineTotal",label:"Total"},{key:"actions",label:""}]}},computed:{filteredSessions:function(){return this.sessions.filter((function(s){return"OPENED"===s.status||"CLOSED"===s.status}))},posUserCashCounts:function(){return this.sessionDetails&&this.sessionDetails.cashCountLines?this.sessionDetails.cashCountLines.filter((function(s){return"POS_USER"===s.counterType})):[]},responsibleCashCounts:function(){return this.sessionDetails&&this.sessionDetails.cashCountLines?this.sessionDetails.cashCountLines.filter((function(s){return"RESPONSIBLE"===s.counterType})):[]},posUserCashCountsTotal:function(){return this.posUserCashCounts.reduce((function(s,t){return s+(t.lineTotal||0)}),0)},responsibleCashCountsTotal:function(){return this.responsibleCashCounts.reduce((function(s,t){return s+(t.lineTotal||0)}),0)},paymentMethodOptions:function(){return this.paymentMethods.filter((function(s){return!1!==s.active}))},paymentMethodOptionsWithCash:function(){var s={id:null,name:"Cash"};return[s].concat(Object(r["a"])(this.paymentMethodOptions))},calculatedResponsibleTotal:function(){return this.responsibleCashCountForm.reduce((function(s,t){var e=parseFloat(t.denominationValue)||0,a=parseInt(t.quantity)||0;return s+e*a}),0)},canVerify:function(){return!!(this.verificationForm.responsibleClosureCash&&this.verificationForm.responsibleClosureCash>0)||this.responsibleCashCountForm.length>0&&this.responsibleCashCountForm.every((function(s){return s.denominationValue&&s.denominationValue>0&&s.quantity&&s.quantity>0}))}},mounted:function(){this.loadSessions(),this.loadPaymentMethods()},methods:{loadSessions:function(){var s=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var e;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s.loading=!0,t.prev=1,t.next=4,s.$http.get("/cashier-session/dashboard");case 4:e=t.sent,s.sessions=e.data,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error loading sessions:",t.t0),s.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load sessions",variant:"danger"}});case 12:return t.prev=12,s.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},loadPaymentMethods:function(){var s=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var e;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.$http.get("/payment-method");case 3:e=t.sent,s.paymentMethods=e.data.filter((function(s){return!1!==s.active})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Error loading payment methods:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},viewSessionDetails:function(s){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/cashier-session/".concat(s.id,"/details"));case 3:a=e.sent,t.sessionDetails=a.data,t.verificationForm={responsibleClosureCash:s.responsibleClosureCash||null,verificationNotes:""},t.responsibleCashCountForm=[],t.showDetailsModal=!0,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("Error loading session details:",e.t0),t.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load session details",variant:"danger"}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},addResponsibleCashCountLine:function(){this.responsibleCashCountForm.push({denominationValue:null,quantity:null,paymentMethodId:null,referenceNumber:"",notes:""})},removeResponsibleCashCountLine:function(s){this.responsibleCashCountForm.splice(s,1)},verifySession:function(){var s=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var e,a,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.canVerify){t.next=3;break}return s.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Please add cash count lines or enter responsible closure cash",variant:"danger"}}),t.abrupt("return");case 3:return t.prev=3,e={sessionId:s.sessionDetails.session.id,verificationNotes:s.verificationForm.verificationNotes},s.responsibleCashCountForm.length>0?(a=s.responsibleCashCountForm.reduce((function(s,t){return s+(t.denominationValue||0)*(t.quantity||0)}),0),e.responsibleClosureCash=a):s.verificationForm.responsibleClosureCash&&(e.responsibleClosureCash=s.verificationForm.responsibleClosureCash),t.next=8,s.$http.post("/cashier-session/verify",e);case 8:s.$toast({component:u["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"Session verified successfully",variant:"success"}}),s.showDetailsModal=!1,s.resetDetailsForm(),s.loadSessions(),t.next=20;break;case 14:t.prev=14,t.t0=t["catch"](3),console.error("Error verifying session:",t.t0),i="Failed to verify session",t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(i=t.t0.response.data.error),s.$toast({component:u["default"],props:{title:"Error",icon:"XIcon",text:i,variant:"danger"}});case 20:case"end":return t.stop()}}),t,null,[[3,14]])})))()},resetDetailsForm:function(){this.sessionDetails=null,this.verificationForm={responsibleClosureCash:null,verificationNotes:""},this.responsibleCashCountForm=[]},formatPrice:function(s){return s||0===s?parseFloat(s).toFixed(2):"0.00"},formatDateTime:function(s){return s?c()(s).format("YYYY-MM-DD HH:mm:ss"):null},getStatusBadgeVariant:function(s){switch(s){case"OPENED":return"success";case"CLOSED":return"warning";case"TERMINATED":return"secondary";default:return"secondary"}},getDifferenceClass:function(s){return s||0===s?s>=0?"text-success":"text-danger":""}}},m=d,C=(e("a385"),e("2877")),f=Object(C["a"])(m,a,i,!1,null,"6277bb1a",null);t["default"]=f.exports},a385:function(s,t,e){"use strict";e("fef3")},b680:function(s,t,e){"use strict";var a=e("23e7"),i=e("a691"),n=e("408a"),o=e("1148"),r=e("d039"),l=1..toFixed,c=Math.floor,u=function(s,t,e){return 0===t?e:t%2===1?u(s,t-1,e*s):u(s*s,t/2,e)},d=function(s){var t=0,e=s;while(e>=4096)t+=12,e/=4096;while(e>=2)t+=1,e/=2;return t},m=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));a({target:"Number",proto:!0,forced:m},{toFixed:function(s){var t,e,a,r,l=n(this),m=i(s),C=[0,0,0,0,0,0],f="",v="0",h=function(s,t){var e=-1,a=t;while(++e<6)a+=s*C[e],C[e]=a%1e7,a=c(a/1e7)},p=function(s){var t=6,e=0;while(--t>=0)e+=C[t],C[t]=c(e/s),e=e%s*1e7},b=function(){var s=6,t="";while(--s>=0)if(""!==t||0===s||0!==C[s]){var e=String(C[s]);t=""===t?e:t+o.call("0",7-e.length)+e}return t};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(t=d(l*u(2,69,1))-69,e=t<0?l*u(2,-t,1):l/u(2,t,1),e*=4503599627370496,t=52-t,t>0){h(0,e),a=m;while(a>=7)h(1e7,0),a-=7;h(u(10,a,1),0),a=t-1;while(a>=23)p(1<<23),a-=23;p(1<<a),h(1,1),p(2),v=b()}else h(0,e),h(1<<-t,0),v=b()+o.call("0",m);return m>0?(r=v.length,v=f+(r<=m?"0."+o.call("0",m-r)+v:v.slice(0,r-m)+"."+v.slice(r-m))):v=f+v,v}})},d58f:function(s,t,e){var a=e("1c0b"),i=e("7b0b"),n=e("44ad"),o=e("50c4"),r=function(s){return function(t,e,r,l){a(e);var c=i(t),u=n(c),d=o(c.length),m=s?d-1:0,C=s?-1:1;if(r<2)while(1){if(m in u){l=u[m],m+=C;break}if(m+=C,s?m<0:d<=m)throw TypeError("Reduce of empty array with no initial value")}for(;s?m>=0:d>m;m+=C)m in u&&(l=e(l,u[m],m,c));return l}};s.exports={left:r(!1),right:r(!0)}},fef3:function(s,t,e){}}]);
//# sourceMappingURL=chunk-280c29d6.3e1c1f7c.js.map