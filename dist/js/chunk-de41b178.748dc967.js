(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de41b178"],{"4e82":function(t,e,a){"use strict";var s=a("23e7"),i=a("1c0b"),n=a("7b0b"),r=a("d039"),o=a("a640"),c=[],l=c.sort,u=r((function(){c.sort(void 0)})),d=r((function(){c.sort(null)})),m=o("sort"),f=u||!d||!m;s({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),i(t))}})},"5a63":function(t,e,a){"use strict";a("dc95")},6062:function(t,e,a){"use strict";var s=a("6d61"),i=a("6566");t.exports=s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,a){"use strict";var s=a("9bf2").f,i=a("7c73"),n=a("e2cc"),r=a("0366"),o=a("19aa"),c=a("2266"),l=a("7dd0"),u=a("2626"),d=a("83ab"),m=a("f183").fastKey,f=a("69f3"),p=f.set,v=f.getterFor;t.exports={getConstructor:function(t,e,a,l){var u=t((function(t,s){o(t,u,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=s&&c(s,t[l],{that:t,AS_ENTRIES:a})})),f=v(e),b=function(t,e,a){var s,i,n=f(t),r=h(t,e);return r?r.value=a:(n.last=r={index:i=m(e,!0),key:e,value:a,previous:s=n.last,next:void 0,removed:!1},n.first||(n.first=r),s&&(s.next=r),d?n.size++:t.size++,"F"!==i&&(n.index[i]=r)),t},h=function(t,e){var a,s=f(t),i=m(e);if("F"!==i)return s.index[i];for(a=s.first;a;a=a.next)if(a.key==e)return a};return n(u.prototype,{clear:function(){var t=this,e=f(t),a=e.index,s=e.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete a[s.index],s=s.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,a=f(e),s=h(e,t);if(s){var i=s.next,n=s.previous;delete a.index[s.index],s.removed=!0,n&&(n.next=i),i&&(i.previous=n),a.first==s&&(a.first=i),a.last==s&&(a.last=n),d?a.size--:e.size--}return!!s},forEach:function(t){var e,a=f(this),s=r(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:a.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!h(this,t)}}),n(u.prototype,a?{get:function(t){var e=h(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),d&&s(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(t,e,a){var s=e+" Iterator",i=v(e),n=v(s);l(t,e,(function(t,e){p(this,{type:s,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=n(this),e=t.kind,a=t.last;while(a&&a.removed)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(e)}}},"6d61":function(t,e,a){"use strict";var s=a("23e7"),i=a("da84"),n=a("94ca"),r=a("6eeb"),o=a("f183"),c=a("2266"),l=a("19aa"),u=a("861d"),d=a("d039"),m=a("1c7e"),f=a("d44e"),p=a("7156");t.exports=function(t,e,a){var v=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),h=v?"set":"add",C=i[t],g=C&&C.prototype,y=C,x={},_=function(t){var e=g[t];r(g,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return b&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!u(t))&&e.call(this,0===t?0:t)}:function(t,a){return e.call(this,0===t?0:t,a),this})};if(n(t,"function"!=typeof C||!(b||g.forEach&&!d((function(){(new C).entries().next()})))))y=a.getConstructor(e,t,v,h),o.REQUIRED=!0;else if(n(t,!0)){var w=new y,k=w[h](b?{}:-0,1)!=w,D=d((function(){w.has(1)})),P=m((function(t){new C(t)})),R=!b&&d((function(){var t=new C,e=5;while(e--)t[h](e,e);return!t.has(-0)}));P||(y=e((function(e,a){l(e,y,t);var s=p(new C,e,y);return void 0!=a&&c(a,s[h],{that:s,AS_ENTRIES:v}),s})),y.prototype=g,g.constructor=y),(D||R)&&(_("delete"),_("has"),v&&_("get")),(R||k)&&_(h),b&&g.clear&&delete g.clear}return x[t]=y,s({global:!0,forced:y!=C},x),f(y,t),b||a.setStrong(y,t,v),y}},"8f24":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"erp-communications-container"},[a("div",{staticClass:"page-header"},[a("h2",{staticClass:"mb-0"},[t._v("ERP Communications")]),a("b-button",{attrs:{variant:"outline-primary",disabled:t.loading},on:{click:t.loadCommunications}},[a("feather-icon",{staticClass:"mr-50",attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),a("b-card",{staticClass:"mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"12",lg:"4"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Search","label-for":"communication-search"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"communication-search",placeholder:"Search by URL, error message, payload..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[a("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),a("b-col",{attrs:{cols:"12",lg:"2"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Status","label-for":"status-filter"}},[a("b-form-select",{attrs:{id:"status-filter",options:t.statusOptions},model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}})],1)],1),a("b-col",{attrs:{cols:"12",lg:"2"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"Operation","label-for":"operation-filter"}},[a("b-form-select",{attrs:{id:"operation-filter",options:t.operationOptions},model:{value:t.operationFilter,callback:function(e){t.operationFilter=e},expression:"operationFilter"}})],1)],1),a("b-col",{attrs:{cols:"12",lg:"2"}},[a("b-form-group",{staticClass:"mb-lg-0",attrs:{label:"From","label-for":"from-date"}},[a("b-form-input",{attrs:{id:"from-date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1)],1),a("b-col",{attrs:{cols:"12",lg:"2"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"To","label-for":"to-date"}},[a("b-form-input",{attrs:{id:"to-date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)],1)],1),a("b-row",{staticClass:"mt-1"},[a("b-col",{staticClass:"d-flex align-items-end justify-content-lg-end",attrs:{cols:"12"}},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"communication":"communications")+" ")])])],1)],1),a("b-card",[a("b-table",{attrs:{items:t.paginatedCommunications,fields:t.fields,striped:"",hover:"",responsive:"","show-empty":"",busy:t.loading},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",{staticClass:"ml-1"},[t._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center py-4"},[a("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"InboxIcon",size:"48"}}),a("p",{staticClass:"text-muted mb-0"},[t._v("No communications found.")])],1)]},proxy:!0},{key:"cell(status)",fn:function(e){return[a("b-badge",{attrs:{variant:t.statusVariant(e.item.status)}},[t._v(" "+t._s(e.item.status)+" ")])]}},{key:"cell(startedAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.startedAt))+" ")]}},{key:"cell(completedAt)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.completedAt))+" ")]}},{key:"cell(durationMs)",fn:function(e){return[null!=e.item.durationMs?a("span",[t._v(" "+t._s((e.item.durationMs/1e3).toFixed(2))+"s ")]):a("span",{staticClass:"text-muted"},[t._v("-")])]}},{key:"cell(errorMessage)",fn:function(e){return[a("span",{staticClass:"text-truncate d-inline-block",staticStyle:{"max-width":"260px"}},[t._v(" "+t._s(e.item.errorMessage||"—")+" ")])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"d-flex justify-content-end"},[a("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(a){return t.openDetails(e.item)}}},[t._v(" Details ")])],1)]}}])}),a("div",{staticClass:"mt-3"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"communications-per-page"}},[t._v("Items per page:")]),a("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"communications-per-page",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-center text-md-right"},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" communications ")])])])],1),a("div",{staticClass:"d-flex justify-content-center mt-2"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1),a("b-modal",{attrs:{id:"communication-details",size:"xl",title:"Communication Details","ok-only":"","ok-title":"Close","ok-variant":"primary"},model:{value:t.showDetailsModal,callback:function(e){t.showDetailsModal=e},expression:"showDetailsModal"}},[t.selectedCommunication?a("div",[t.selectedCommunication.url?a("b-card",{staticClass:"mb-3 url-card"},[a("div",{staticClass:"d-flex align-items-center mb-2"},[a("feather-icon",{staticClass:"mr-2 text-primary",attrs:{icon:"LinkIcon",size:"18"}}),a("strong",{staticClass:"text-primary"},[t._v("Endpoint URL")])],1),a("div",{staticClass:"url-container"},[a("code",{staticClass:"url-text"},[t._v(t._s(t.selectedCommunication.url))]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"copy-btn",attrs:{size:"sm",variant:"outline-primary",title:"Copy URL"},on:{click:function(e){return t.copyToClipboard(t.selectedCommunication.url)}}},[a("feather-icon",{attrs:{icon:"CopyIcon",size:"14"}})],1)],1)]):t._e(),a("b-card",{staticClass:"mb-3"},[a("h6",{staticClass:"section-title mb-3"},[a("feather-icon",{staticClass:"mr-2",attrs:{icon:"InfoIcon",size:"16"}}),t._v(" Operation Details ")],1),a("b-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"detail-item mb-3"},[a("label",{staticClass:"detail-label"},[t._v("Operation")]),a("div",{staticClass:"detail-value"},[t._v(t._s(t.formatOperation(t.selectedCommunication.operation)))])]),a("div",{staticClass:"detail-item mb-3"},[a("label",{staticClass:"detail-label"},[t._v("Status")]),a("div",{staticClass:"detail-value"},[a("b-badge",{staticClass:"status-badge",attrs:{variant:t.statusVariant(t.selectedCommunication.status)}},[t._v(" "+t._s(t.selectedCommunication.status)+" ")])],1)])]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"detail-item mb-3"},[a("label",{staticClass:"detail-label"},[t._v("Started")]),a("div",{staticClass:"detail-value"},[t._v(t._s(t.formatDateTime(t.selectedCommunication.startedAt)||"—"))])]),a("div",{staticClass:"detail-item mb-3"},[a("label",{staticClass:"detail-label"},[t._v("Completed")]),a("div",{staticClass:"detail-value"},[t._v(t._s(t.formatDateTime(t.selectedCommunication.completedAt)||"—"))])]),a("div",{staticClass:"detail-item mb-3"},[a("label",{staticClass:"detail-label"},[t._v("Duration")]),a("div",{staticClass:"detail-value"},[null!=t.selectedCommunication.durationMs?a("span",[t._v(" "+t._s((t.selectedCommunication.durationMs/1e3).toFixed(2))+"s ")]):a("span",[t._v("—")])])])])],1)],1),t.selectedCommunication.errorMessage?a("b-alert",{staticClass:"mb-3",attrs:{variant:"danger",show:""}},[a("div",{staticClass:"d-flex align-items-start"},[a("feather-icon",{staticClass:"mr-2 mt-1",attrs:{icon:"AlertCircleIcon",size:"20"}}),a("div",[a("strong",{staticClass:"d-block mb-1"},[t._v("Error Message")]),a("div",[t._v(t._s(t.selectedCommunication.errorMessage))])])],1)]):t._e(),a("b-card",{staticClass:"mb-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[a("h6",{staticClass:"section-title mb-0"},[a("feather-icon",{staticClass:"mr-2",attrs:{icon:"SendIcon",size:"16"}}),t._v(" Request Payload ")],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"outline-secondary",title:"Copy Request"},on:{click:function(e){return t.copyToClipboard(t.selectedCommunication.requestPayload)}}},[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"CopyIcon",size:"14"}}),t._v(" Copy ")],1)],1),a("pre",{staticClass:"payload"},[t._v(t._s(t.formatJson(t.selectedCommunication.requestPayload)))])]),a("b-card",[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[a("h6",{staticClass:"section-title mb-0"},[a("feather-icon",{staticClass:"mr-2",attrs:{icon:"InboxIcon",size:"16"}}),t._v(" Response Payload ")],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"outline-secondary",title:"Copy Response"},on:{click:function(e){return t.copyToClipboard(t.selectedCommunication.responsePayload)}}},[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"CopyIcon",size:"14"}}),t._v(" Copy ")],1)],1),a("pre",{staticClass:"payload"},[t._v(t._s(t.formatJson(t.selectedCommunication.responsePayload)))])])],1):t._e()])],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("2909"),c=(a("99af"),a("4de4"),a("a630"),a("caad"),a("a15b9"),a("d81d"),a("fb6a"),a("4e82"),a("e9c4"),a("b64b"),a("d3b7"),a("25f0"),a("6062"),a("2532"),a("3ca3"),a("498a"),a("159b"),a("ddb0"),a("c1df")),l=a.n(c),u=a("223c"),d={name:"ErpCommunications",data:function(){var t=l()().format("YYYY-MM-DD");return{communications:[],loading:!1,searchTerm:"",statusFilter:"ALL",operationFilter:"ALL",fromDate:t,toDate:t,currentPage:1,perPage:20,perPageOptions:[{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"},{value:200,text:"200"}],statusOptions:[{value:"ALL",text:"All statuses"},{value:"SUCCESS",text:"Success"},{value:"WARNING",text:"Warning"},{value:"ERROR",text:"Error"}],showDetailsModal:!1,selectedCommunication:null,fields:[{key:"operation",label:"Operation",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"startedAt",label:"Started",sortable:!0},{key:"completedAt",label:"Completed",sortable:!0},{key:"durationMs",label:"Duration",sortable:!0},{key:"errorMessage",label:"Error",sortable:!1},{key:"actions",label:"",sortable:!1,class:"text-right"}]}},computed:{operationOptions:function(){var t=this,e=new Set;this.communications.forEach((function(t){t.operation&&e.add(t.operation)}));var a=Array.from(e).sort();return[{value:"ALL",text:"All operations"}].concat(Object(o["a"])(a.map((function(e){return{value:e,text:t.formatOperation(e)}}))))},filteredCommunications:function(){var t=this,e=this.searchTerm.trim().toLowerCase();return this.communications.filter((function(a){return("ALL"===t.statusFilter||a.status===t.statusFilter)&&(("ALL"===t.operationFilter||a.operation===t.operationFilter)&&(!e||[a.url,a.errorMessage,a.requestPayload,a.responsePayload,a.operation,a.status].some((function(t){return t&&t.toString().toLowerCase().includes(e)}))))}))},totalRows:function(){return this.filteredCommunications.length},paginatedCommunications:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredCommunications.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)}},watch:{searchTerm:function(){this.currentPage=1},statusFilter:function(){this.currentPage=1},operationFilter:function(){this.currentPage=1},perPage:function(t,e){t!==e&&(this.currentPage=1)},fromDate:function(t,e){t!==e&&this.loadCommunications()},toDate:function(t,e){t!==e&&this.loadCommunications()},filteredCommunications:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},mounted:function(){this.loadCommunications()},methods:{loadCommunications:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.get("/admin/erp/communications",{params:{limit:500,from:t.fromDate,to:t.toDate}});case 4:a=e.sent,t.communications=Array.isArray(a.data)?a.data:[],e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Error loading ERP communications:",e.t0),t.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load ERP communications",variant:"danger"}});case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},formatDateTime:function(t){return t?l()(t).format("YYYY-MM-DD HH:mm:ss"):null},statusVariant:function(t){switch(t){case"SUCCESS":return"success";case"WARNING":return"warning";case"ERROR":return"danger";default:return"secondary"}},clearSearch:function(){this.searchTerm=""},openDetails:function(t){this.selectedCommunication=t,this.showDetailsModal=!0},formatJson:function(t){if(!t)return"—";try{var e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(a){return t}},formatOperation:function(t){return t?t.toString().toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" "):""},copyToClipboard:function(t){var e=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,navigator.clipboard.writeText(t);case 5:e.$toast({component:u["default"],props:{title:"Copied!",icon:"CheckIcon",text:"Content copied to clipboard",variant:"success"}}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](2),console.error("Failed to copy:",a.t0),e.$toast({component:u["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to copy to clipboard",variant:"danger"}});case 12:case"end":return a.stop()}}),a,null,[[2,8]])})))()}}},m=d,f=(a("5a63"),a("2877")),p=Object(f["a"])(m,s,i,!1,null,"6fd7a31c",null);e["default"]=p.exports},bb2f:function(t,e,a){var s=a("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},dc95:function(t,e,a){},f183:function(t,e,a){var s=a("d012"),i=a("861d"),n=a("5135"),r=a("9bf2").f,o=a("90e3"),c=a("bb2f"),l=o("meta"),u=0,d=Object.isExtensible||function(){return!0},m=function(t){r(t,l,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,l)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[l].objectID},p=function(t,e){if(!n(t,l)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[l].weakData},v=function(t){return c&&b.REQUIRED&&d(t)&&!n(t,l)&&m(t),t},b=t.exports={REQUIRED:!1,fastKey:f,getWeakData:p,onFreeze:v};s[l]=!0}}]);
//# sourceMappingURL=chunk-de41b178.748dc967.js.map