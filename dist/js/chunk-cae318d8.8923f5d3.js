(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cae318d8"],{"216b":function(t,e,a){},"223c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[t.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+t.variant,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},n=[],o=a("e8a3"),i={components:{BAvatar:o["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},r=i,c=(a("2edd"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"55dd3057",null);e["default"]=l.exports},"2edd":function(t,e,a){"use strict";a("216b")},3126:function(t,e,a){"use strict";a("dc75")},b25a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"locations-management-container"},[a("div",{staticClass:"page-header"},[a("h2",{staticClass:"mb-0"},[t._v("Locations")]),a("b-button",{attrs:{variant:"outline-primary"},on:{click:t.loadLocations}},[a("feather-icon",{attrs:{icon:"RefreshCwIcon",size:"16"}}),t._v(" Refresh ")],1)],1),a("b-card",{staticClass:"mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Search","label-for":"search-input"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"search-input",placeholder:"Search by code, name, city, or contact..."},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary",disabled:!t.searchTerm},on:{click:t.clearSearch}},[a("feather-icon",{attrs:{icon:"XIcon",size:"14"}})],1)],1)],1)],1)],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-row",[a("b-col",{attrs:{cols:"12",md:"6"}},[a("b-form-group",{staticClass:"mb-md-0",attrs:{label:"Filter by Default","label-for":"default-filter"}},[a("b-form-checkbox",{staticClass:"mt-2",attrs:{id:"default-filter"},model:{value:t.showDefaultOnly,callback:function(e){t.showDefaultOnly=e},expression:"showDefaultOnly"}},[t._v(" Show Default Only ")])],1)],1),a("b-col",{staticClass:"d-flex align-items-end justify-content-md-end",attrs:{cols:"12",md:"6"}},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.totalRows)+" "+t._s(1===t.totalRows?"location":"locations")+" ")])])],1)],1)],1)],1),a("b-card",[a("b-table",{attrs:{items:t.paginatedLocations,fields:t.locationFields,striped:"",hover:"",responsive:"",busy:t.loading,"show-empty":""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[t._v(" Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center py-4"},[a("feather-icon",{staticClass:"text-muted mb-2",attrs:{icon:"MapPinIcon",size:"48"}}),a("p",{staticClass:"text-muted mb-0"},[t._v("No locations found.")])],1)]},proxy:!0},{key:"cell(locationCode)",fn:function(e){return[a("strong",[t._v(t._s(e.item.locationCode))])]}},{key:"cell(address)",fn:function(e){return[a("div",{staticClass:"small"},[e.item.address?a("div",[t._v(t._s(e.item.address))]):t._e(),e.item.city||e.item.state||e.item.postalCode?a("div",[t._v(" "+t._s(t.formatCityState(e.item))+" ")]):t._e(),e.item.country?a("div",[t._v(t._s(e.item.country))]):t._e()]),e.item.address||e.item.city||e.item.country?t._e():a("span",{staticClass:"text-muted small"},[t._v("-")])]}},{key:"cell(contact)",fn:function(e){return[a("div",{staticClass:"small"},[e.item.phone?a("div",[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"PhoneIcon",size:"12"}}),t._v(" "+t._s(e.item.phone)+" ")],1):t._e(),e.item.email?a("div",[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"MailIcon",size:"12"}}),t._v(" "+t._s(e.item.email)+" ")],1):t._e(),e.item.contactPerson?a("div",[a("feather-icon",{staticClass:"mr-1",attrs:{icon:"UserIcon",size:"12"}}),t._v(" "+t._s(e.item.contactPerson)+" ")],1):t._e()]),e.item.phone||e.item.email||e.item.contactPerson?t._e():a("span",{staticClass:"text-muted small"},[t._v("-")])]}},{key:"cell(isDefault)",fn:function(e){return[a("b-badge",{attrs:{variant:e.item.isDefault?"success":"secondary"}},[t._v(" "+t._s(e.item.isDefault?"Default":"No")+" ")])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{variant:"outline-primary",size:"sm",disabled:e.item.isDefault},on:{click:function(a){return t.setAsDefaultLocation(e.item)}}},[a("feather-icon",{attrs:{icon:"StarIcon",size:"14"}}),t._v(" Set as Default ")],1)],1)]}}])}),a("div",{staticClass:"mt-3"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{staticClass:"mb-2 mb-md-0",attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"per-page-select"}},[t._v("Items per page:")]),a("b-form-select",{staticStyle:{width:"auto"},attrs:{id:"per-page-select",options:t.perPageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)]),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-center text-md-right"},[a("small",{staticClass:"text-muted"},[t._v(" Showing "+t._s(t.startIndex)+" to "+t._s(t.endIndex)+" of "+t._s(t.totalRows)+" locations ")])])])],1),a("div",{staticClass:"d-flex justify-content-center mt-2"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1)},n=[],o=a("c7eb"),i=a("1da1"),r=(a("99af"),a("4de4"),a("caad"),a("a15b9"),a("fb6a"),a("b0c0"),a("d3b7"),a("2532"),a("223c")),c={name:"LocationsManagement",data:function(){return{locations:[],loading:!1,searchTerm:"",showDefaultOnly:!1,currentPage:1,perPage:10,perPageOptions:[{value:10,text:"10"},{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],locationFields:[{key:"locationCode",label:"Code",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"address",label:"Address",sortable:!1},{key:"contact",label:"Contact",sortable:!1},{key:"isDefault",label:"Default",sortable:!0},{key:"actions",label:"Actions",sortable:!1,thClass:"text-right",tdClass:"text-right"}]}},computed:{filteredLocations:function(){var t=this.locations;if(this.showDefaultOnly&&(t=t.filter((function(t){return!0===t.isDefault}))),this.searchTerm){var e=this.searchTerm.toLowerCase();t=t.filter((function(t){return t.locationCode&&t.locationCode.toLowerCase().includes(e)||t.name&&t.name.toLowerCase().includes(e)||t.city&&t.city.toLowerCase().includes(e)||t.country&&t.country.toLowerCase().includes(e)||t.phone&&t.phone.toLowerCase().includes(e)||t.email&&t.email.toLowerCase().includes(e)}))}return t},totalRows:function(){return this.filteredLocations.length},paginatedLocations:function(){var t=(this.currentPage-1)*this.perPage;return this.filteredLocations.slice(t,t+this.perPage)},startIndex:function(){return 0===this.totalRows?0:(this.currentPage-1)*this.perPage+1},endIndex:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)}},watch:{searchTerm:function(){this.currentPage=1},showDefaultOnly:function(){this.currentPage=1},perPage:function(){this.currentPage=1},filteredLocations:function(t){var e=Math.max(1,Math.ceil(t.length/this.perPage));this.currentPage>e&&(this.currentPage=e)}},mounted:function(){this.loadLocations()},methods:{loadLocations:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$http.get("/location");case 4:a=e.sent,t.locations=Array.isArray(a.data)?a.data:[],e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Error loading locations:",e.t0),t.$toast({component:r["default"],props:{title:"Error",icon:"AlertCircleIcon",text:"Failed to load locations",variant:"danger"}});case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},clearSearch:function(){this.searchTerm=""},formatCityState:function(t){return[t.city,t.state,t.postalCode].filter(Boolean).join(", ")},setAsDefaultLocation:function(t){var e=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var s,n,i,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$swal({title:"Set as Default Location?",text:'Are you sure you want to set "'.concat(t.name,'" (').concat(t.locationCode,") as the default location?"),icon:"question",showCancelButton:!0,confirmButtonText:"Yes, set as default",cancelButtonText:"Cancel",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-secondary ml-1"},buttonsStyling:!1});case 3:if(s=a.sent,n=s.value,n){a.next=7;break}return a.abrupt("return");case 7:return e.loading=!0,a.next=10,e.$http.put("/location/".concat(t.id,"/set-default"),{});case 10:if(i=a.sent,200!==i.status){a.next=15;break}return e.$toast({component:r["default"],props:{title:"Success",icon:"CheckCircleIcon",text:"Default location updated successfully",variant:"success"}}),a.next=15,e.loadLocations();case 15:a.next=23;break;case 17:a.prev=17,a.t0=a["catch"](0),console.error("Error setting default location:",a.t0),c="Failed to set default location",a.t0.response&&a.t0.response.data&&(c=a.t0.response.data||c),e.$toast({component:r["default"],props:{title:"Error",icon:"XIcon",text:c,variant:"danger"}});case 23:return a.prev=23,e.loading=!1,a.finish(23);case 26:case"end":return a.stop()}}),a,null,[[0,17,23,26]])})))()}}},l=c,u=(a("3126"),a("2877")),d=Object(u["a"])(l,s,n,!1,null,"06ffd117",null);e["default"]=d.exports},dc75:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cae318d8.8923f5d3.js.map